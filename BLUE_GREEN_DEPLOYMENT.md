# ğŸ”µğŸŸ¢ Blue-Green Deployment Guide - aaPanel

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

- [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#-Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
- [ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Blue-Green](#-ÙƒÙŠÙ-ÙŠØ¹Ù…Ù„-blue-green)
- [Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©](#-Ø§Ù„Ø¨Ù†ÙŠØ©-Ø§Ù„ØªØ­ØªÙŠØ©)
- [Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©](#-Ø§Ù„Ù…Ù„ÙØ§Øª-Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©)
- [Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯](#-Ø¯Ù„ÙŠÙ„-Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯)
- [Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…](#-Ø¯Ù„ÙŠÙ„-Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…)
- [Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡](#-Ø§Ø³ØªÙƒØ´Ø§Ù-Ø§Ù„Ø£Ø®Ø·Ø§Ø¡)
- [Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª](#-Ø£ÙØ¶Ù„-Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª)
- [Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©](#-Ø§Ù„Ø£Ø³Ø¦Ù„Ø©-Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©)

---

## ğŸŒŸ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

**Blue-Green Deployment** Ù‡ÙŠ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù†Ø´Ø± Ù…ØªÙ‚Ø¯Ù…Ø© ØªØ¶Ù…Ù† **zero-downtime** (Ø¹Ø¯Ù… ØªÙˆÙ‚Ù Ø§Ù„Ø®Ø¯Ù…Ø©) Ø¹Ù†Ø¯ Ù†Ø´Ø± Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.

### Ø§Ù„Ù…Ø²Ø§ÙŠØ§ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

âœ… **Zero Downtime** - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ù„Ø§ ÙŠØ´Ø¹Ø±ÙˆÙ† Ø¨Ø£ÙŠ ØªÙˆÙ‚Ù  
âœ… **Rollback ÙÙˆØ±ÙŠ** - Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙÙŠ Ø«ÙˆØ§Ù†Ù  
âœ… **Ø§Ø®ØªØ¨Ø§Ø± Ø¢Ù…Ù†** - Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‚Ø¨Ù„ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„  
âœ… **ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø®Ø§Ø·Ø±** - Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØªØ¨Ù‚Ù‰ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…  
âœ… **CI/CD Ù…ØªÙ‚Ø¯Ù…** - Ù†Ø´Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ¯Ø®Ù„ ÙŠØ¯ÙˆÙŠ  
âœ… **Ø¹Ø²Ù„ ÙƒØ§Ù…Ù„** - Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†ÙØµÙ„Ø© Ù„ÙƒÙ„ Ø¨ÙŠØ¦Ø© (Blue/Green)  

### Ù…ØªÙ‰ ØªØ³ØªØ®Ø¯Ù… Blue-GreenØŸ

- âœ… ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø°Ø§Øª Ø§Ù„Ø£Ù‡Ù…ÙŠØ© Ø§Ù„Ø­Ø±Ø¬Ø©
- âœ… Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† downtime ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„
- âœ… Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬
- âœ… Ø¹Ù†Ø¯Ù…Ø§ ØªØ±ÙŠØ¯ rollback ÙÙˆØ±ÙŠ ÙˆØ¢Ù…Ù†

---

## ğŸ”„ ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Blue-Green

### Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ù„Ø¯ÙŠÙƒ Ø¨ÙŠØ¦ØªØ§Ù† Ù…ØªØ·Ø§Ø¨Ù‚ØªØ§Ù† ØªÙ…Ø§Ù…Ø§Ù‹:                         â”‚
â”‚  â€¢ Blue Environment (Ø§Ù„Ø£Ø²Ø±Ù‚)                            â”‚
â”‚  â€¢ Green Environment (Ø§Ù„Ø£Ø®Ø¶Ø±)                           â”‚
â”‚                                                          â”‚
â”‚  ÙÙŠ Ø£ÙŠ Ù„Ø­Ø¸Ø©ØŒ ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Ø§Ù„Ù†Ø´Ø·Ø©)          â”‚
â”‚  ÙˆØ§Ù„Ø£Ø®Ø±Ù‰ Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ù†Ø´Ø± (ØºÙŠØ± Ù†Ø´Ø·Ø©)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø¯ÙˆØ±Ø© Ø§Ù„Ù†Ø´Ø±

```
Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blue (Ù†Ø´Ø·)   â”‚ â—„â”€â”€â”€ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†
â”‚ Port 5001    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Green (Ù…Ø¹Ø·Ù„) â”‚
â”‚ Port 5002    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†“ (1) Ù†Ø´Ø± Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¹Ù„Ù‰ Green

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blue (Ù†Ø´Ø·)   â”‚ â—„â”€â”€â”€ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†
â”‚ Port 5001    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Green (Ù†Ø´Ø·)  â”‚ â† Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯
â”‚ Port 5002    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†“ (2) Health Check Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø³Ù„Ø§Ù…Ø© Green

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blue (Ù†Ø´Ø·)   â”‚ â—„â”€â”€â”€ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†
â”‚ Port 5001    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Green (âœ…)    â”‚ â† Health check Ù†Ø¬Ø­
â”‚ Port 5002    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†“ (3) ØªØ¨Ø¯ÙŠÙ„ Traffic Ù…Ù† Blue Ø¥Ù„Ù‰ Green

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blue (Ù…Ø¹Ø·Ù„)  â”‚
â”‚ Port 5001    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Green (Ù†Ø´Ø·)  â”‚ â—„â”€â”€â”€ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† (ØªØ­ÙˆÙŠÙ„ ÙÙˆØ±ÙŠ)
â”‚ Port 5002    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†“ (4) Ø¥ÙŠÙ‚Ø§Ù Blue (Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ø£Ù…Ø§Ù†)

Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blue (Ù…Ø¹Ø·Ù„)  â”‚ â† Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø´Ø± Ø§Ù„ØªØ§Ù„ÙŠ
â”‚ Port 5001    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Green (Ù†Ø´Ø·)  â”‚ â—„â”€â”€â”€ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†
â”‚ Port 5002    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©

### Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Load Balancer                       â”‚
â”‚                  (Nginx / HAProxy)                       â”‚
â”‚                                                          â”‚
â”‚  ÙŠÙÙˆØ¬Ù‘Ù‡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø©:                       â”‚
â”‚  â€¢ Blue: http://localhost:5001                           â”‚
â”‚  â€¢ Green: http://localhost:5002                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Blue Environment â”‚   â”‚ Green Environmentâ”‚
   â”‚ ================ â”‚   â”‚ ================â”‚
   â”‚ â€¢ app-blue       â”‚   â”‚ â€¢ app-green     â”‚
   â”‚   (Port 5001)    â”‚   â”‚   (Port 5002)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                      â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    Shared Infrastructure       â”‚
         â”‚    ===================         â”‚
         â”‚    â€¢ PostgreSQL (postgres-     â”‚
         â”‚      shared)                   â”‚
         â”‚    â€¢ Redis (redis-shared)      â”‚
         â”‚    â€¢ Persistent Volumes        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© vs Ø§Ù„Ù…Ù†ÙØµÙ„Ø©

| Ø§Ù„Ù…ÙˆØ±Ø¯ | Ù†ÙˆØ¹Ù‡ | Ø§Ù„Ø³Ø¨Ø¨ |
|--------|------|-------|
| **PostgreSQL** | Ù…Ø´ØªØ±Ùƒ | Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ­Ø¯Ø© Ø¨ÙŠÙ† Ø§Ù„Ø¨ÙŠØ¦ØªÙŠÙ† |
| **Redis** | Ù…Ø´ØªØ±Ùƒ | cache Ù…Ø´ØªØ±Ùƒ |
| **App Container** | Ù…Ù†ÙØµÙ„ | ÙƒÙ„ Ø¨ÙŠØ¦Ø© Ù„Ù‡Ø§ ØªØ·Ø¨ÙŠÙ‚ Ù…Ø³ØªÙ‚Ù„ |
| **App Data** | Ù…Ù†ÙØµÙ„ | Ø¹Ø²Ù„ ÙƒØ§Ù…Ù„ - ØªØ¬Ù†Ø¨ ØªØ¶Ø§Ø±Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª |
| **Logs** | Ù…Ù†ÙØµÙ„ | logs Ù…Ù†ÙØµÙ„Ø© Ù„ÙƒÙ„ Ø¨ÙŠØ¦Ø© |

> âš ï¸ **Ù…Ù‡Ù…**: ÙƒÙ„ Ø¨ÙŠØ¦Ø© Ù„Ù‡Ø§ `app_data` Ù…Ù†ÙØµÙ„ ØªÙ…Ø§Ù…Ø§Ù‹ (`app_data_blue`, `app_data_green`) Ù„Ø¶Ù…Ø§Ù† Ø¹Ø²Ù„ ÙƒØ§Ù…Ù„ ÙˆØªØ¬Ù†Ø¨ ØªØ¶Ø§Ø±Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙŠØ¦ØªÙŠÙ† Ù…Ø¹Ø§Ù‹.

---

## ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### 1. Docker Compose Files

```bash
docker-compose.blue.yml    # ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡
docker-compose.green.yml   # ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡
```

**Ø§Ù„Ø§Ø®ØªÙ„Ø§ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**
- **Container name**: `aapanel_app_blue` vs `aapanel_app_green`
- **Port mapping**: `5001:5000` vs `5002:5000`
- **Environment**: `APP_COLOR=blue` vs `APP_COLOR=green`
- **Data volume**: `app_data_blue` vs `app_data_green` (Ø¹Ø²Ù„ ÙƒØ§Ù…Ù„)
- **Logs volume**: `app_logs_blue` vs `app_logs_green`

### 0. Shared Services (Ø¬Ø¯ÙŠØ¯!)

```bash
docker-compose.shared.yml   # Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© (PostgreSQL + Redis)
```

**ÙŠØ¬Ø¨ ØªØ´ØºÙŠÙ„Ù‡ Ø£ÙˆÙ„Ø§Ù‹** Ù‚Ø¨Ù„ Ø£ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ¦ØªÙŠÙ† Blue Ø£Ùˆ Green.

### 2. Deployment Scripts

```bash
blue-green-deploy.sh       # Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
switch.sh                  # Ø³ÙƒØ±ÙŠØ¨Øª ØªØ¨Ø¯ÙŠÙ„ Traffic
```

### 3. Configuration Files

```bash
nginx-blue-green.conf.template   # ØªÙƒÙˆÙŠÙ† nginx Ù„Ù„Ù€ Blue-Green
.active_environment              # Ù…Ù„Ù ØªØªØ¨Ø¹ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø©
```

### 4. GitHub Actions

```bash
.github/workflows/blue-green-deploy.yml   # Workflow Ù„Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
```

---

## ğŸ› ï¸ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯

### Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

```bash
# 1. Docker & Docker Compose
docker --version          # >= 20.10
docker-compose --version  # >= 1.29

# 2. Nginx (Ù„Ù„Ù€ traffic routing)
nginx -v                  # >= 1.18

# 3. curl (Ù„Ù„Ù€ health checks)
curl --version
```

### Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¹Ù„Ù‰ VPS

```bash
# Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ VPS
ssh user@your-vps-ip

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù†Ø´Ø±
sudo mkdir -p /opt/aapanel
cd /opt/aapanel

# Ù†Ø³Ø® Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ù…Ù† GitHub Ø£Ùˆ Ù…Ø­Ù„ÙŠØ§Ù‹)
# Ø³ÙŠØªÙ… Ù†Ø³Ø®Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ø¨Ø± GitHub Actions
```

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù„Ù .env

```bash
# Ù†Ø³Ø® Ù…Ù† Ø§Ù„Ù…Ø«Ø§Ù„
cp .env.example .env

# ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
nano .env
```

**Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**

```bash
# Docker Registry
REGISTRY=ghcr.io
IMAGE_NAME=owner/aapanel
IMAGE_TAG=latest

# Database
POSTGRES_USER=aapanel_user
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=production_db

# Application
ENVIRONMENT=production
SECRET_KEY=your_secret_key_here
```

### Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ø¹Ø¯Ø§Ø¯ Nginx

```bash
# Ù†Ø³Ø® template
sudo cp nginx-blue-green.conf.template /etc/nginx/sites-available/aapanel

# Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
sudo sed -i 's/${DOMAIN}/your-domain.com/g' /etc/nginx/sites-available/aapanel
sudo sed -i 's/${ACTIVE_PORT}/5001/g' /etc/nginx/sites-available/aapanel

# ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹
sudo ln -s /etc/nginx/sites-available/aapanel /etc/nginx/sites-enabled/

# Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙƒÙˆÙŠÙ†
sudo nginx -t

# Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ nginx
sudo systemctl reload nginx
```

### Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø¥Ø¶Ø§ÙØ© Rate Limiting Zones

```bash
# ØªØ­Ø±ÙŠØ± nginx.conf Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
sudo nano /etc/nginx/nginx.conf
```

**Ø£Ø¶Ù Ø¯Ø§Ø®Ù„ http block:**

```nginx
http {
    # ... existing config ...
    
    # Rate limiting zones
    limit_req_zone $binary_remote_addr zone=api_limit:10m rate=100r/s;
    limit_req_zone $binary_remote_addr zone=login_limit:10m rate=5r/m;
}
```

### Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø¥Ø¹Ø¯Ø§Ø¯ GitHub Secrets

ÙÙŠ repository settings â†’ Secrets and variables â†’ ActionsØŒ Ø£Ø¶Ù:

```yaml
VPS_HOST: your.vps.ip.address
VPS_USER: deployment_user
VPS_SSH_KEY: |
  -----BEGIN OPENSSH PRIVATE KEY-----
  ... your SSH private key ...
  -----END OPENSSH PRIVATE KEY-----
VPS_DOMAIN: your-domain.com
```

---

## ğŸš€ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### Ø§Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø¹Ø¨Ø± GitHub Actions)

#### Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ

```yaml
# ÙŠØªÙ… ØªØ´ØºÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯:
# 1. Push Ø¥Ù„Ù‰ main branch Ø¨Ø¹Ø¯ build Ù†Ø§Ø¬Ø­
# 2. Ø¥Ù†Ø´Ø§Ø¡ tag Ø¨ØµÙŠØºØ© v*.*.* (Ù…Ø«Ù„ v1.0.0)
```

#### Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ

```bash
# 1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ GitHub Actions tab
# 2. Ø§Ø®ØªØ± "Blue-Green Deployment"
# 3. Ø§Ø¶ØºØ· "Run workflow"
# 4. Ø§Ø®ØªØ± Ø§Ù„Ø¨ÙŠØ¦Ø© (production/staging)
# 5. Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø­Ø¯Ø¯ (blue/green) Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
```

### Ø§Ù„Ù†Ø´Ø± Ø§Ù„ÙŠØ¯ÙˆÙŠ (Ø¹Ù„Ù‰ VPS Ù…Ø¨Ø§Ø´Ø±Ø©)

```bash
# Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ VPS
ssh user@your-vps-ip
cd /opt/aapanel

# Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¨Ø¯Ø¡ Shared Services (PostgreSQL + Redis)
docker-compose -f docker-compose.shared.yml up -d

# Ø§Ù„Ø®Ø·ÙˆØ© 2: ØªØµØ¯ÙŠØ± Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
export REGISTRY=ghcr.io
export IMAGE_NAME=owner/aapanel
export IMAGE_TAG=latest

# ØªØ´ØºÙŠÙ„ Blue-Green deployment
./blue-green-deploy.sh
```

**Ù…Ø§Ø°Ø§ ÙŠÙØ¹Ù„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨ØªØŸ**

```
âœ“ ÙŠÙƒØªØ´Ù Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
âœ“ ÙŠÙÙ†Ø²Ù‘Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Registry
âœ“ ÙŠÙ†Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¦Ø© ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·Ø©
âœ“ ÙŠÙØ­Øµ ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Health Check)
âœ“ ÙŠØ¨Ø¯Ù„ Traffic Ù„Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
âœ“ ÙŠÙˆÙ‚Ù Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (Ø¨Ø¹Ø¯ 30 Ø«Ø§Ù†ÙŠØ©)
âœ“ ÙŠÙ†Ø¸Ù Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
```

### Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ø¨ÙŠÙ† Ø§Ù„Ø¨ÙŠØ¦Ø§Øª

```bash
# Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Blue
./switch.sh blue

# Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Green
./switch.sh green
```

### ÙØ­Øµ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

```bash
# Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø©
cat .active_environment

# Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ø¬Ø§Ø±ÙŠØ©
docker ps | grep aapanel

# ÙØ­Øµ logs
docker-compose -f docker-compose.blue.yml logs --tail=50 app-blue
docker-compose -f docker-compose.green.yml logs --tail=50 app-green
```

### Rollback Ø§Ù„Ø³Ø±ÙŠØ¹

#### Rollback ØªÙ„Ù‚Ø§Ø¦ÙŠ
```bash
# ÙŠØ­Ø¯Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙØ´Ù„:
# â€¢ Health check
# â€¢ Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª
# â€¢ Ø£ÙŠ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø´Ø±
```

#### Rollback ÙŠØ¯ÙˆÙŠ

```bash
# 1. Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
cat .active_environment.backup

# 2. Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ù„Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
./switch.sh <previous_environment>

# Ù…Ø«Ø§Ù„:
./switch.sh blue   # Ø¥Ø°Ø§ ÙƒØ§Ù†Øª blue Ù‡ÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
```

---

## ğŸ” Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø© 1: ÙØ´Ù„ Health Check

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
```
âŒ Health check failed after 15 attempts
```

**Ø§Ù„Ø­Ù„ÙˆÙ„:**

```bash
# 1. ÙØ­Øµ logs
docker-compose -f docker-compose.<color>.yml logs app-<color>

# 2. ÙØ­Øµ Ø§Ù„Ù…Ù†ÙØ° Ù…Ø¨Ø§Ø´Ø±Ø©
curl http://localhost:5001/   # Blue
curl http://localhost:5002/   # Green

# 3. ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª
docker-compose -f docker-compose.<color>.yml ps

# 4. ÙØ­Øµ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
docker-compose -f docker-compose.<color>.yml config
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø© 2: Ø§Ù„Ø¨ÙŠØ¦ØªØ§Ù† ØªØ¹Ù…Ù„Ø§Ù† Ù…Ø¹Ø§Ù‹

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
```
Both blue and green containers are running
```

**Ø§Ù„Ø­Ù„:**

```bash
# Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹
docker-compose -f docker-compose.<old_color>.yml down
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø© 3: ÙØ´Ù„ ØªØ¨Ø¯ÙŠÙ„ nginx

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
```
âš ï¸  Failed to reload nginx
```

**Ø§Ù„Ø­Ù„ÙˆÙ„:**

```bash
# 1. ÙØ­Øµ ØªÙƒÙˆÙŠÙ† nginx
sudo nginx -t

# 2. ÙØ­Øµ logs
sudo tail -50 /var/log/nginx/error.log

# 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
ls -l /etc/nginx/sites-available/aapanel
ls -l /etc/nginx/sites-enabled/aapanel

# 4. Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ nginx ÙŠØ¯ÙˆÙŠØ§Ù‹
sudo systemctl reload nginx
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø© 4: Database connection errors

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
```
could not connect to server: Connection refused
```

**Ø§Ù„Ø­Ù„ÙˆÙ„:**

```bash
# 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† postgres container
docker ps | grep postgres

# 2. ÙØ­Øµ logs
docker logs aapanel_postgres_shared

# 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙÙŠ .env
cat .env | grep POSTGRES

# 4. Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ postgres
docker-compose -f docker-compose.blue.yml restart postgres-shared
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø© 5: Port already in use

**Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶:**
```
Error: bind: address already in use
```

**Ø§Ù„Ø­Ù„ÙˆÙ„:**

```bash
# 1. Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªÙŠ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†ÙØ°
sudo lsof -i :5001   # Blue
sudo lsof -i :5002   # Green

# 2. Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
sudo kill -9 <PID>

# Ø£Ùˆ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
docker-compose -f docker-compose.<color>.yml down
```

---

## âœ… Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª

### 1. Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±

```bash
# âœ… Ø§ÙØ­Øµ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù…Ø­Ù„ÙŠØ§Ù‹
docker pull ${REGISTRY}/${IMAGE_NAME}:${IMAGE_TAG}
docker run --rm ${REGISTRY}/${IMAGE_NAME}:${IMAGE_TAG} --version

# âœ… Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù€ logs Ù…Ù† build Ø§Ù„Ø­Ø§Ù„ÙŠ
# ÙÙŠ GitHub Actions

# âœ… Ø£Ø®Ø·Ø± Ø§Ù„ÙØ±ÙŠÙ‚ Ø¨Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù‚Ø§Ø¯Ù…
```

### 2. Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø±

```bash
# âœ… Ø±Ø§Ù‚Ø¨ logs ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
tail -f /var/log/nginx/aapanel_access.log

# âœ… Ø±Ø§Ù‚Ø¨ metrics (CPU, Memory)
docker stats

# âœ… Ø±Ø§Ù‚Ø¨ GitHub Actions workflow
```

### 3. Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø±

```bash
# âœ… ÙØ­Øµ Ø´Ø§Ù…Ù„ Ù„Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
# (Login, Dashboard, API endpoints)

# âœ… Ù…Ø±Ø§Ù‚Ø¨Ø© Ù„Ù…Ø¯Ø© 15-30 Ø¯Ù‚ÙŠÙ‚Ø©

# âœ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„

# âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø¥Ù† Ù„Ø²Ù…
```

### 4. Ø£Ù…Ø§Ù†

```bash
# âœ… Ø§Ø³ØªØ®Ø¯Ù… HTTPS ÙÙ‚Ø·
# âœ… Ø­Ø¯Ù‘Ø« Ø§Ù„Ø£Ø³Ø±Ø§Ø± Ø¨Ø§Ù†ØªØ¸Ø§Ù…
# âœ… ÙØ­Øµ Ø§Ù„ØµÙˆØ± Ù„Ù„Ø«ØºØ±Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±
# âœ… Ø§Ø­ØªÙØ¸ Ø¨Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (SHA-256 + HMAC)

# Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±
python backups/backup_manager.py
```

> **â„¹ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©:** Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØªØ³ØªØ®Ø¯Ù… SHA-256 + HMAC Ù„Ù„Ø£Ù…Ø§Ù†. Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (MD5) Ù…Ø¯Ø¹ÙˆÙ…Ø© Ù„Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙÙ‚Ø·.  
> Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø­ÙˆÙ„ SECRET_KEY ÙˆØ§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©ØŒ Ø±Ø§Ø¬Ø¹ [DEPLOYMENT_SECRETS.md](./DEPLOYMENT_SECRETS.md)

### 5. Ø§Ù„Ø£Ø¯Ø§Ø¡

```bash
# âœ… Ø§Ø³ØªØ®Ø¯Ù… layer caching ÙÙŠ Docker
# âœ… Ø§Ø­ØªÙØ¸ Ø¨Ø¢Ø®Ø± 3 Ø¥ØµØ¯Ø§Ø±Ø§Øª ÙÙ‚Ø· Ù…Ù† Ø§Ù„ØµÙˆØ±
# âœ… Ù†Ø¸Ù‘Ù volumes Ø§Ù„ÙŠØªÙŠÙ…Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù…
# âœ… Ø±Ø§Ù‚Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØ§Ø±Ø¯
```

---

## â“ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

### Ø³: ÙƒÙ… Ù…Ù† Ø§Ù„ÙˆÙ‚Øª ÙŠØ³ØªØºØ±Ù‚ Ø§Ù„Ù†Ø´Ø±ØŸ

**Ø¬:** Ø¹Ø§Ø¯Ø© 2-5 Ø¯Ù‚Ø§Ø¦Ù‚:
- Pull Ø§Ù„ØµÙˆØ±Ø©: 30-60 Ø«Ø§Ù†ÙŠØ©
- Ø¨Ø¯Ø¡ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©: 30-60 Ø«Ø§Ù†ÙŠØ©  
- Health checks: 30-90 Ø«Ø§Ù†ÙŠØ©
- ØªØ¨Ø¯ÙŠÙ„ Traffic: ÙÙˆØ±ÙŠ (< 1 Ø«Ø§Ù†ÙŠØ©)

### Ø³: Ù‡Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¢Ù…Ù†Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø±ØŸ

**Ø¬:** Ù†Ø¹Ù…! Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ØªØ±ÙƒØ© Ø¨ÙŠÙ† Ø§Ù„Ø¨ÙŠØ¦ØªÙŠÙ† ÙˆÙ„Ø§ ÙŠØªÙ… Ø¥ÙŠÙ‚Ø§ÙÙ‡Ø§ Ø£Ø¨Ø¯Ø§Ù‹.

### Ø³: Ù…Ø§Ø°Ø§ Ù„Ùˆ ÙØ´Ù„ Ø§Ù„Ù†Ø´Ø±ØŸ

**Ø¬:** ÙŠØªÙ… Rollback ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ù„Ø§ ÙŠØªØ£Ø«Ø±ÙˆÙ†.

### Ø³: Ù‡Ù„ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙŠØ¦ØªÙŠÙ† Ù…Ø¹Ø§Ù‹ØŸ

**Ø¬:** ØªÙ‚Ù†ÙŠØ§Ù‹ Ù†Ø¹Ù…ØŒ Ù„ÙƒÙ† Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙ‚Ø·. ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.

### Ø³: ÙƒÙŠÙ Ø£Ø®ØªØ¨Ø± Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‚Ø¨Ù„ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ØŸ

**Ø¬:** Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø± ÙˆÙ‚Ø¨Ù„ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©:
```bash
# Blue
curl http://your-vps:5001/

# Green
curl http://your-vps:5002/
```

### Ø³: Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙØ±Ù‚ Ø¹Ù† Rolling DeploymentØŸ

**Ø¬:** 
| Blue-Green | Rolling |
|------------|---------|
| Ø¨ÙŠØ¦ØªØ§Ù† ÙƒØ§Ù…Ù„ØªØ§Ù† | Ø­Ø§ÙˆÙŠØ© Ø¨Ø­Ø§ÙˆÙŠØ© |
| Rollback ÙÙˆØ±ÙŠ | Rollback Ø¨Ø·ÙŠØ¡ |
| ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§Ø±Ø¯ Ø£ÙƒØ«Ø± | ÙŠØ­ØªØ§Ø¬ Ù…ÙˆØ§Ø±Ø¯ Ø£Ù‚Ù„ |
| Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø­Ø±Ø¬Ø© | Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© |

### Ø³: ÙƒÙŠÙ Ø£Ø¶ÙŠÙ Ø¨ÙŠØ¦Ø© Ø«Ø§Ù„Ø«Ø© (Ù…Ø«Ù„ Canary)ØŸ

**Ø¬:** Blue-Green ÙŠØ¯Ø¹Ù… Ø¨ÙŠØ¦ØªØ§Ù† ÙÙ‚Ø·. Ù„Ù„Ù€ Canary deploymentØŒ ØªØ­ØªØ§Ø¬ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…Ø®ØªÙ„ÙØ©.

---

## ğŸ“Š Ù…Ø®Ø·Ø· Ø§Ù„ØªØ¯ÙÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø´Ø± (Trigger)                            â”‚
â”‚   â€¢ GitHub Actions (Auto)                                â”‚
â”‚   â€¢ Manual Script                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø·Ø©                                 â”‚
â”‚     â€¢ Ù‚Ø±Ø§Ø¡Ø© .active_environment                          â”‚
â”‚     â€¢ Ø§ÙƒØªØ´Ø§Ù ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Docker containers                 â”‚
â”‚     â€¢ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Pull Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©                                 â”‚
â”‚     â€¢ Ù…Ù† ghcr.io                                         â”‚
â”‚     â€¢ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† integrity                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©                            â”‚
â”‚     â€¢ docker-compose up Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©                   â”‚
â”‚     â€¢ Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Health Check Ø´Ø§Ù…Ù„                                    â”‚
â”‚     â€¢ ÙØ­Øµ /health endpoint                               â”‚
â”‚     â€¢ ÙØ­Øµ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©                                â”‚
â”‚     â€¢ 15 Ù…Ø­Ø§ÙˆÙ„Ø© Ã— 5 Ø«ÙˆØ§Ù†Ù                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                  â”‚
         [Ù†Ø¬Ø­] â”‚                  â”‚ [ÙØ´Ù„]
               â”‚                  â”‚
               â–¼                  â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ 5. ØªØ¨Ø¯ÙŠÙ„        â”‚  â”‚ ROLLBACK          â”‚
     â”‚    Traffic      â”‚  â”‚ â€¢ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©   â”‚
     â”‚                 â”‚  â”‚ â€¢ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ 6. Ø¥ÙŠÙ‚Ø§Ù        â”‚
     â”‚    Ø§Ù„Ø¨ÙŠØ¦Ø©       â”‚
     â”‚    Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ 7. ØªÙ†Ø¸ÙŠÙ        â”‚
     â”‚    Ø§Ù„Ù…ÙˆØ§Ø±Ø¯      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ âœ… Ø§ÙƒØªÙ…Ø§Ù„       â”‚
     â”‚    Ø§Ù„Ù†Ø´Ø±        â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

Ø±Ø§Ø¬Ø¹ Ù‚Ø³Ù… [Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡](#-Ø§Ø³ØªÙƒØ´Ø§Ù-Ø§Ù„Ø£Ø®Ø·Ø§Ø¡) Ø£Ø¹Ù„Ø§Ù‡.

### Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©

1. **Ø±Ø§Ø¬Ø¹ logs:**
   ```bash
   # Application logs
   docker-compose -f docker-compose.<color>.yml logs

   # Nginx logs
   sudo tail -100 /var/log/nginx/aapanel_error.log

   # System logs
   sudo journalctl -u docker -n 100
   ```

2. **ÙØ­Øµ Ø§Ù„Ø­Ø§Ù„Ø©:**
   ```bash
   # Docker containers
   docker ps -a | grep aapanel

   # Nginx status
   sudo systemctl status nginx

   # Resource usage
   docker stats --no-stream
   ```

3. **Ø§ØªØµÙ„ Ø¨Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ÙÙ†ÙŠ**

---

## ğŸ“š Ù…Ø±Ø§Ø¬Ø¹ Ø¥Ø¶Ø§ÙÙŠØ©

- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Nginx Documentation](https://nginx.org/en/docs/)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Blue-Green Deployment Pattern](https://martinfowler.com/bliki/BlueGreenDeployment.html)

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 30 Ø³Ø¨ØªÙ…Ø¨Ø± 2025  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0.0  
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:** Ø§Ù„ÙˆÙƒÙŠÙ„ Ø±Ù‚Ù… 9
