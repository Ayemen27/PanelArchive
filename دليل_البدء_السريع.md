# 🚀 دليل البدء السريع - aaPanel

## 📌 للفريق الجديد: ابدأ من هنا!

### الخطوة 0: 🔴 **إلزامي - اقرأ تقارير Architect أولاً** (15 دقيقة)
**قبل أي شيء آخر:**
1. 🔴 **اقرأ `تقارير_مراجعة_ارشكتر.md`** - جداً مهم!
   - يحتوي على 10 مشاكل مكتشفة
   - 1 محلولة، 9 تحتاج حل
   - طريقة الحل لكل مشكلة
   - خطة العمل للمشاكل المتبقية
2. **افهم المشاكل الحرجة:**
   - المشكلة #2: db_pool غير متكامل
   - المشكلة #3: backup_manager غير مجدول
   - المشكلة #4: CI/CD غير مُنفذ
3. **تحقق من المشاكل التي تخص مهمتك**

### الخطوة 1: فهم المشروع (15 دقيقة)
1. اقرأ `replit.md` - نظرة عامة على المشروع
2. اقرأ `README.md` - معلومات aaPanel الأساسية
3. افهم الهدف: تطبيق واحد يعمل في بيئتين (Replit + VPS)

### الخطوة 2: فهم الخطة (30 دقيقة)
1. اقرأ `خطة_التطوير.md` كاملة
2. راجع `قائمة_التحقق.md`
3. **راجع `تقارير_مراجعة_ارشكتر.md` مرة أخرى**
4. حدد موقعك في الخطة:
   - ابحث عن آخر مهمة بحالة "✅ مكتملة"
   - المهمة التالية هي نقطة بدايتك
   - **تحقق إذا كانت تتعلق بمشكلة من تقارير Architect**

### الخطوة 3: تجهيز البيئة (10 دقائق)
```bash
# نسخ المشروع محلياً (إن لم يكن موجوداً)
git clone <repository-url>
cd <project-directory>

# فحص الملفات المهمة
ls -la
cat .env
cat runserver.py
```

### الخطوة 4: البدء بالعمل
1. اختر مهمة من `خطة_التطوير.md` (ابدأ بالأولوية العالية)
2. حدّث حالتها إلى "🔄 قيد التنفيذ"
3. افتح `قائمة_التحقق.md` واتبع النقاط
4. عند الانتهاء، حدّث جميع الملفات

---

## 🔍 فهم البنية الحالية

### الملفات الرئيسية:
```
.
├── runserver.py          # نقطة دخول التطبيق
├── runconfig.py          # إعدادات Gunicorn
├── BTPanel/              # التطبيق الأساسي Flask
├── class/                # منطق برمجي قديم
├── class_v2/             # منطق برمجي محدث
├── data/                 # بيانات وإعدادات
├── .env                  # متغيرات البيئة
├── replit.md             # توثيق المشروع
├── خطة_التطوير.md        # الخطة الشاملة
└── قائمة_التحقق.md        # قائمة المهام
```

### كيف يعمل التطبيق حالياً:
1. `runserver.py` يقرأ المنفذ من `data/port.pl`
2. يشغل Flask app على `0.0.0.0:PORT`
3. يستخدم SQLite محلياً (في Replit)
4. مصمم للعمل على `/www/server/panel` في الإنتاج

---

## 🎯 أول مهمة: من أين أبدأ؟

### إذا كانت جميع المهام "⏳ لم تبدأ":
**ابدأ بالمرحلة الأولى، المهمة 1.1**

#### المهمة 1.1: إنشاء نظام اكتشاف البيئة

**الهدف**: ملف Python يكتشف تلقائياً إذا كان التطبيق يعمل على Replit أو VPS.

**ما يجب عمله**:
```python
# 1. أنشئ ملف: environment_detector.py
import os

def detect_environment():
    """
    اكتشاف البيئة الحالية
    Returns: 'development' or 'production'
    """
    # فحص متغيرات Replit
    if os.getenv("REPL_ID") or os.getenv("REPL_OWNER"):
        return "development"
    
    # فحص متغير ENVIRONMENT
    env = os.getenv("ENVIRONMENT", "").lower()
    if env in ("production", "prod"):
        return "production"
    if env in ("development", "dev"):
        return "development"
    
    # فحص وجود systemd (VPS)
    if os.path.exists("/etc/systemd/system"):
        return "production"
    
    # افتراضي
    return "development"

# 2. اختبر الدالة
if __name__ == "__main__":
    env = detect_environment()
    print(f"البيئة الحالية: {env}")
```

**الاختبار**:
```bash
# في Replit
python environment_detector.py
# يجب أن يطبع: البيئة الحالية: development

# محاكاة VPS
ENVIRONMENT=production python environment_detector.py
# يجب أن يطبع: البيئة الحالية: production
```

**بعد الانتهاء**:
1. ✅ ضع علامة على جميع نقاط المهمة في `قائمة_التحقق.md`
2. 📝 حدّث `replit.md` في قسم "آخر التغييرات"
3. 📝 حدّث `خطة_التطوير.md` - غير حالة المهمة لـ "✅ مكتملة"
4. 📅 أضف التاريخ واسمك

---

## 📚 المراجع السريعة

### الأوامر الشائعة:
```bash
# تشغيل التطبيق
python runserver.py

# تشغيل مع Gunicorn
gunicorn -c runconfig.py BTPanel:app

# فحص المنفذ الحالي
cat data/port.pl

# فحص متغيرات البيئة
cat .env
```

### الملفات التي ستعمل عليها كثيراً:
- `environment_detector.py` - (ستنشئه)
- `config_factory.py` - (ستنشئه)
- `runserver.py` - (ستحدثه)
- `.env` - (ستحسنه)
- `Dockerfile` - (ستنشئه)
- `docker-compose.yml` - (ستنشئه)

---

## ⚠️ تحذيرات مهمة

### ❌ لا تفعل:
- **لا** تعدل الملفات الأساسية للتطبيق بدون فهم كامل
- **لا** تحذف أي ملفات من `data/` أو `config/`
- **لا** تشغل التطبيق كـ root في الإنتاج
- **لا** تضع أسرار في المستودع

### ✅ افعل دائماً:
- **نسخ احتياطي** قبل التعديلات الكبيرة
- **اختبار** في Replit قبل النشر للإنتاج
- **توثيق** كل تغيير تقوم به
- **تحديث** جميع ملفات .md ذات الصلة

---

## 🆘 مشاكل شائعة وحلولها

### المشكلة 1: التطبيق لا يعمل
```bash
# تحقق من المنفذ
cat data/port.pl

# تحقق من السجلات
tail -f logs/error.log

# تحقق من المتغيرات
echo $PORT
```

### المشكلة 2: خطأ في الاستيراد
```python
# تأكد من المسار
import sys
print(sys.path)

# أضف المسار إن لزم
sys.path.insert(0, 'class/')
sys.path.insert(0, 'class_v2/')
```

### المشكلة 3: قاعدة البيانات
```bash
# تحقق من اتصال DB
python -c "import sqlite3; print(sqlite3.sqlite_version)"

# أو للـ PostgreSQL
psql $DATABASE_URL -c "SELECT version();"
```

---

## 📞 من تستشير؟

### للأسئلة التقنية:
1. راجع التوثيق في `replit.md`
2. ابحث في `خطة_التطوير.md`
3. تحقق من `TROUBLESHOOTING.md` (سيتم إنشاؤه)
4. استشر الفريق الفني

### لتحديث الخطة:
1. افتح `خطة_التطوير.md`
2. ابحث عن المهمة
3. حدّث الحالة والتفاصيل
4. احفظ واعمل commit

---

## 🎉 نصائح للنجاح

### 1. ابدأ صغيراً
- لا تحاول فهم كل شيء دفعة واحدة
- ركز على مهمة واحدة في كل مرة
- اتبع الأولويات في الخطة

### 2. وثّق باستمرار
- كل تغيير تقوم به، وثّقه
- هذا يساعد الفريق القادم
- استخدم التعليقات في الكود

### 3. اختبر جيداً
- اختبر كل تغيير قبل الانتقال للتالي
- اختبر في بيئات مختلفة
- لا تترك أخطاء غير محلولة

### 4. اطلب المساعدة
- لا تتردد في السؤال
- الفريق هنا للمساعدة
- وثّق الأسئلة والأجوبة

---

## ✅ قائمة التحقق قبل البدء

- [ ] قرأت `replit.md`
- [ ] قرأت `خطة_التطوير.md`
- [ ] فهمت البنية الحالية
- [ ] أعرف من أين أبدأ
- [ ] جهزت بيئة العمل
- [ ] أعرف كيف أحدث التوثيق
- [ ] جاهز للبدء! 🚀

---

**مرحباً بك في الفريق! نتمنى لك عملاً ممتعاً ومثمراً.**

**آخر تحديث**: 30 سبتمبر 2025
