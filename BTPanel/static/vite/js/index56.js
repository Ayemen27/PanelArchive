import{t,i as e,p as a,F as n,_ as i,w as s,cz as o,cu as l,a4 as r,n as d,l as c,a7 as u,R as m,bd as p,c as x,cr as y,m as v,N as A,q as f}from"./page_layout.js?v=1758532619827";import{d as h,q as g}from"./public.js?v=1758532619827";import{R as b,S as _,X as M,k as S,r as w,aJ as C,o as I,l as k,v as B,V as T,ad as N,t as O,P as q,ae as W,ao as J,c as R,aK as Y,a3 as z,F as U,O as E,j as Q,a4 as F,aj as L,U as G,W as j,x as P,a2 as V}from"./vue.js?v=1758532619827";import{H as Z,dZ as D,dT as H,aC as K,dh as X,dS as $,dV as tt,dj as et,df as at,e2 as nt}from"./naive.js?v=1758532619827";import{m as it,O as st,U as ot}from"./common.js?v=1758532619827";import{_ as lt}from"./index.vue_vue_type_script_setup_true_lang15.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";const rt=a=>t.post("/config?action=SetControl",a,{requestOptions:{loading:e.global.t("Monitor.API.system_1"),successMessage:!0}}),dt=e=>t.post("/ajax?action=GetCpuIo",e),ct={class:"flex-center h-full"};const ut=a({},[["render",function(t,e){const a=Z;return b(),_("div",ct,[M(a,{size:"large"})])}]]),mt=["title"],pt=S({__name:"index",setup(t){const e=w(null),a=w(null),{isFullscreen:s,toggle:o}=C(a),l=()=>{o()};return I((()=>{e.value&&(a.value=n(e.value,"n-card"))})),(t,a)=>{const n=i;return k((b(),_("div",{ref_key:"iconRef",ref:e,class:"inline-flex cursor-pointer ml-8px",title:t.$t("Monitor.System.index_27"),onClick:l},[M(n,{ref_key:"iconRef",ref:e,name:"base-full-exit",size:"22"},null,512)],8,mt)),[[B,T(s)]])}}}),xt={class:"flex"},yt=a(S({__name:"index",props:N({day:{default:30}},{value:{default:()=>[]},valueModifiers:{}}),emits:N(["refresh"],["update:value"]),setup(t,{emit:e}){const a=O(t,"day"),n=e,{t:d}=q(),c=W(t,"value"),u=w(),m=w(),p=w("today"),x=w(null),y=w(!1),v=[{label:d("Public.Search.Yesterday"),value:"yesterday"},{label:d("Public.Search.Today"),value:"today"},{label:d("Public.Search.Last7"),value:"7"}],{x:A,y:f,width:h,height:g}=J(u),S=R((()=>A.value+h.value)),C=R((()=>f.value+g.value));Y(m,(()=>{y.value=!1}));const I=t=>{"custom"!==t&&(x.value=null,c.value=j())},k=t=>{s(t)&&t[0]!==t[1]&&(c.value=t.map((t=>o(t))),y.value=!1)},B=()=>{y.value||(y.value=!0)},N=t=>{const e=new Date,n=it(e,-a.value);return st(n).getTime()>=t||st(e).getTime()<t};function j(){const t=new Date;let e={start:st(t),end:t};switch(p.value){case"yesterday":e=l(it(t,-1));break;case"7":e.start=st(it(t,-6))}return[o(e.start),o(e.end)]}0===c.value.length&&(c.value=j());const P=()=>{n("refresh")};return(t,e)=>{const a=D,n=H,s=i,o=K,l=r,d=X;return b(),_("div",xt,[M(n,{value:T(p),"onUpdate:value":[e[0]||(e[0]=t=>L(p)?p.value=t:null),I],size:"small"},{default:z((()=>[(b(),_(U,null,E(v,(t=>M(a,{key:t.value,value:t.value},{default:z((()=>[Q(F(t.label),1)])),_:2},1032,["value"]))),64)),M(a,{ref_key:"customRef",ref:u,value:"custom",onClick:B},{default:z((()=>[Q(F(t.$t("Public.Search.Custom")),1)])),_:1},512)])),_:1},8,["value"]),M(o,{size:"small",class:"ml-10px px-8px",onClick:P},{default:z((()=>[M(s,{name:"refresh",size:"14"})])),_:1}),M(d,{show:T(y),placement:"bottom",trigger:"manual",x:T(S),y:T(C),"show-arrow":!1,style:{padding:0}},{trigger:z((()=>e[2]||(e[2]=[G("div",{class:"hidden"},null,-1)]))),default:z((()=>[G("div",{ref_key:"popoverContentRef",ref:m},[M(l,{value:T(x),"onUpdate:value":[e[1]||(e[1]=t=>L(x)?x.value=t:null),k],type:"daterange",panel:!0,actions:null,"is-date-disabled":N},null,8,["value"])],512)])),_:1},8,["show","x","y"])])}}}),[["__scopeId","data-v-510567b2"]]),vt=["title"],At=S({__name:"index",setup(t){const e=w(null),a=w(null),{isFullscreen:s,toggle:o}=C(a),l=()=>{o()};return I((()=>{e.value&&(a.value=n(e.value,"n-card"))})),(t,a)=>{const n=i;return k((b(),_("div",{ref_key:"iconRef",ref:e,class:"inline-flex cursor-pointer ml-8px",title:t.$t("Monitor.System.index_26"),onClick:l},[M(n,{ref_key:"iconRef",ref:e,name:"base-full",size:"22"},null,512)],8,vt)),[[B,!T(s)]])}}});function ft(){const{t:t}=q(),e=j("--color-text-2"),a=j("--color-border");function i(t,e){let a=0;const n=(e-t)/3600/1e3,i=n/24;return a=n<=1?.02:n<=3?.5:n<=6?1:n<=12?3:n<=20?6:n<=24?8:i<=3?14:i<=7?24:168,36e5*a}return{option:P({}),getAddTime:function(t,e){const a=new Date,n=a.getMonth()+1,i=e.split(" ")[0].split("/");parseInt(i[0]);const s=t.split(" "),o=s[0].split("/"),l=s[1].split(":"),r=parseInt(o[0]);let d=a.getFullYear();r<n&&(d-=1);const c=parseInt(o[1]),u=parseInt(l[0]),m=parseInt(l[1]);return new Date(d,r-1,c,u,m).getTime()},getInterval:i,renderTooltip:function(){return{trigger:"axis",axisPointer:{type:"cross"},padding:0,backgroundColor:"transparent",borderColor:"transparent",position:(t,e,a,i,s)=>function(t,e){var a;const i=e.size.contentSize[0],s=e.size.contentSize[1],o=window.innerWidth,l=window.innerHeight,r=null==(a=n(t,"n-spin-content"))?void 0:a.getBoundingClientRect(),d=e.pos[0]+((null==r?void 0:r.left)||0),c=e.pos[1]+((null==r?void 0:r.top)||0);let u=0,m=0;return m=d+i+80<o?e.pos[0]+20:e.pos[0]-i-20,u=c+s+80<l?e.pos[1]+20:e.pos[1]-s-20,c-s<0&&(u=0-((null==r?void 0:r.top)||0)+10),[m,u]}(a,{pos:t,size:s})}},renderTable:function(e,a=""){let n="",i="",s=[{title:"PID",index:1},{title:t("Monitor.System.index_28"),width:"120px",index:2},{title:t("Monitor.System.index_29"),index:0,render:t=>"".concat(t[0],"%")},{title:t("Monitor.System.index_30"),index:4}];return"memory"===a&&(s=[{title:"PID",index:1},{title:t("Monitor.System.index_28"),width:"120px",index:2},{title:t("Monitor.System.index_31"),index:0,render:t=>d(c(t[0]))},{title:t("Monitor.System.index_30"),index:4}]),"disk"===a&&(s=[{title:"PID",index:3},{title:t("Monitor.System.index_28"),width:"100px",index:4},{title:t("Monitor.System.index_32"),index:0,render:t=>d(c(t[0]))},{title:t("Monitor.System.index_18"),index:1,render:t=>d(c(t[1]))},{title:t("Monitor.System.index_19"),index:2,render:t=>d(c(t[2]))},{title:t("Monitor.System.index_30"),index:6}]),s.forEach((t=>{n+='<th style="width: '.concat(t.width||"auto",';">').concat(t.title,"</th>")})),e.forEach((t=>{let e="";s.forEach((a=>{e+='<td style="width: '.concat(a.width||"auto",';">\n\t\t\t\t\t').concat(a.render?a.render(t):t[a.index],"\n\t\t\t\t</td>")})),i+="<tr>".concat(e,"</tr>")})),'<div class="process-top5">\n\t\t\t<div class="process-header"></div>\n\t\t\t<table>\n\t\t\t\t<thead>'.concat(n,"</thead>\n\t\t\t\t<tbody>").concat(i,"</tbody>\n\t\t\t</table>\n\t\t</div>")},renderDataZoom:function(t,e){return[{type:"inside",start:0,end:100,zoomLock:!0,...t},{type:"slider",bottom:24,start:0,end:100,handleIcon:"path://M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2},...e}]},renderXAxis:function(t,a){return{type:"time",min:t,minInterval:i(t,a),axisLine:{lineStyle:{color:e.value}},axisLabel:{formatter(t){const e=u(t,"MM-dd HH:mm").split(" ");return"".concat(e[0],"\n").concat(e[1])}}}},renderYAxis:function(t){return{name:t,scale:!0,min:0,splitLine:{show:!0,lineStyle:{color:a.value}},nameTextStyle:{color:e.value,fontSize:12,align:"left"},axisLine:{lineStyle:{color:e.value}}}},renderSeries:function(t,e){return{name:t,smooth:!0,symbol:"circle",showSymbol:!1,itemStyle:{color:e},lineStyle:{width:2,color:e}}}}}const ht={class:"flex items-center"},gt=S({__name:"system-load",props:{day:{default:30}},setup(e){const{t:a}=q(),n=j("--color-text-2"),i=new Date,l=w([o(st(i)),o(i)]),r=w(!1),{option:d,getAddTime:x,renderTooltip:y,renderTable:v,renderXAxis:A,renderYAxis:f,renderSeries:g,renderDataZoom:_}=ft();const{loading:S,setLoading:C}=h(),I=async()=>{try{C(!0);const{message:i}=await(e={start:l.value[0],end:l.value[1]},t.post("/ajax?action=get_load_average",e));if(s(i)){const t=[],e=[],s=[],o=[];for(let a=0;a<i.length;a++){const n=i[a];n.time=x(n.addtime,i[i.length-1].addtime),e.push([n.time,n.pro,n]),t.push([n.time,n.one,n]),s.push([n.time,n.five,n]),o.push([n.time,n.fifteen,n])}let m=l.value[1],h=l.value[0];i.length>0?(m=i[0].time,h=ot(i[i.length-1].time).getTime(),r.value=!1):r.value=!0,function(t,e,i){d.value={legend:{top:"16px",right:"16%",textStyle:{color:n.value},data:[a("Monitor.System.index_9"),a("Monitor.System.index_10"),a("Monitor.System.index_11")]},tooltip:{...y(),formatter(t){let e="",n="",i="";const s=Object.entries(t);return s.forEach((([t,o])=>{const{data:l}=o,[,r,d]=l;if(s.length>1&&"0"===t){const t=d.pro;n+='<div class="select-data">\n\t\t\t\t\t\t\t<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:rgb(255, 140, 0);"></span>\n\t\t\t\t\t\t\t<span>'.concat(a("Monitor.System.index_14")).concat(p(t)?t.toFixed(2):0,"%</span>\n\t\t\t\t\t\t</div>")}"0"===t&&(i=v(d.cpu_top)),e=o.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(o.marker,"\n\t\t\t\t\t\t<span>").concat(o.seriesName,"ï¼š").concat(p(r)?r.toFixed(2):0,"%</span>\n\t\t\t\t\t</div>")})),'<div class="echarts-tooltip" style="width: 440px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(a("Monitor.System.index_15")).concat(e?u(e):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t\t").concat(i,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},dataZoom:_({xAxisIndex:[0,1]},{left:"5%",right:"5%",xAxisIndex:[0,1]}),grid:[{left:"5%",bottom:92,right:"55%",width:"40%",height:"auto"},{bottom:92,left:"55%",width:"40%",height:"auto"}],xAxis:[{...A(t,e),gridIndex:0},{...A(t,e),gridIndex:1}],yAxis:[{...f(a("Monitor.System.index_12")),gridIndex:0,max:function(t){return t.max>=100?Math.ceil(t.max):t.max>=80?100:c((t.max+10).toString().slice(0,1)+"0")}},{...f(a("Monitor.System.index_13")),gridIndex:1}],series:[{type:"line",xAxisIndex:0,yAxisIndex:0,data:i.pro,...g(a("Monitor.System.index_12"),"rgb(255, 140, 0)")},{type:"line",xAxisIndex:1,yAxisIndex:1,data:i.one,...g(a("Monitor.System.index_9"),"rgb(30, 144, 255)")},{type:"line",xAxisIndex:1,yAxisIndex:1,data:i.five,...g(a("Monitor.System.index_10"),"rgb(0, 178, 45)")},{type:"line",xAxisIndex:1,yAxisIndex:1,data:i.fifteen,...g(a("Monitor.System.index_11"),"rgb(147, 38, 255)")}]}}(h,m,{one:t,pro:e,five:s,fifteen:o})}}finally{C(!1)}var e};return I(),(t,e)=>{const a=At,n=yt,i=pt,s=ut,o=m,c=$;return b(),V(c,{class:"h-388px"},{header:z((()=>[G("div",ht,[G("span",null,F(t.$t("Monitor.System.index_8")),1),M(a)])])),"header-extra":z((()=>[M(n,{value:T(l),"onUpdate:value":[e[0]||(e[0]=t=>L(l)?l.value=t:null),I],day:t.day,onRefresh:I},null,8,["value","day"]),M(i)])),default:z((()=>[M(o,{class:"h-full",show:T(S)},{default:z((()=>[T(r)?(b(),V(s,{key:0})):(b(),V(lt,{key:1,type:"line",height:"100%",option:T(d)},null,8,["option"]))])),_:1},8,["show"])])),_:1})}}}),bt={class:"flex items-center"},_t=S({__name:"system-cpu",props:{day:{default:30}},setup(t){const{t:e}=q(),a=new Date,n=w([o(st(a)),o(a)]),i=w(!1),{option:l,getAddTime:r,renderTooltip:d,renderTable:c,renderXAxis:x,renderYAxis:y,renderSeries:v,renderDataZoom:A}=ft();const{loading:f,setLoading:g}=h(),_=async()=>{try{g(!0);const{message:t}=await dt({start:n.value[0],end:n.value[1]});if(s(t)){const a=[];for(let e=0;e<t.length;e++){const n=t[e];n.time=r(n.addtime,t[t.length-1].addtime),a.push([n.time,n.pro,n])}let s=n.value[1],o=n.value[0];t.length>0?(s=t[0].time,o=ot(t[t.length-1].time).getTime(),i.value=!1):i.value=!0,function(t,a,n){l.value={tooltip:{...d(),formatter(t){let a="",n="",i="";return Object.entries(t).forEach((([t,e])=>{const{data:s}=e,[,o,l]=s;"0"===t&&(i=c(l.cpu_top)),a=e.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(e.marker,"\n\t\t\t\t\t\t<span>").concat(e.seriesName,"ï¼š").concat(p(o)?o.toFixed(2):0,"%</span>\n\t\t\t\t\t</div>")})),'<div class="echarts-tooltip" style="width: 440px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(e("Monitor.System.index_15")).concat(a?u(a):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t\t").concat(i,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},grid:{bottom:92},dataZoom:A(),xAxis:{...x(t,a)},yAxis:{...y("CPU"),max:100},series:[{type:"line",data:n.cpu,...v("CPU","rgb(0, 153, 238)")}]}}(o,s,{cpu:a})}}finally{g(!1)}};return _(),(t,e)=>{const a=At,s=yt,o=pt,r=ut,d=m,c=$;return b(),V(c,{class:"h-388px"},{header:z((()=>[G("div",bt,[e[1]||(e[1]=G("span",null,"CPU",-1)),M(a)])])),"header-extra":z((()=>[M(s,{value:T(n),"onUpdate:value":[e[0]||(e[0]=t=>L(n)?n.value=t:null),_],day:t.day,onRefresh:_},null,8,["value","day"]),M(o)])),default:z((()=>[M(d,{class:"h-full",show:T(f)},{default:z((()=>[T(i)?(b(),V(r,{key:0})):(b(),V(lt,{key:1,type:"line",height:"100%",option:T(l)},null,8,["option"]))])),_:1},8,["show"])])),_:1})}}}),Mt={class:"flex items-center"},St=S({__name:"system-memory",props:{day:{default:30}},setup(t){const{t:e}=q(),a=new Date,n=w([o(st(a)),o(a)]),i=w(!1),{option:l,getAddTime:r,renderTooltip:d,renderTable:c,renderXAxis:x,renderYAxis:y,renderSeries:v,renderDataZoom:A}=ft();const{loading:f,setLoading:g}=h(),_=async()=>{try{g(!0);const{message:t}=await dt({start:n.value[0],end:n.value[1]});if(s(t)){const a=[];for(let e=0;e<t.length;e++){const n=t[e];n.time=r(n.addtime,t[t.length-1].addtime),a.push([n.time,n.mem,n])}let s=n.value[1],o=n.value[0];t.length>0?(s=t[0].time,o=ot(t[t.length-1].time).getTime(),i.value=!1):i.value=!0,function(t,a,n){l.value={tooltip:{...d(),formatter(t){let a="",n="",i="";return Object.entries(t).forEach((([t,e])=>{const{data:s}=e,[,o,l]=s;"0"===t&&(i=c(l.memory_top,"memory")),a=e.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(e.marker,"\n\t\t\t\t\t\t<span>").concat(e.seriesName,"ï¼š").concat(p(o)?o.toFixed(2):0,"%</span>\n\t\t\t\t\t</div>")})),'<div class="echarts-tooltip" style="width: 480px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(e("Monitor.System.index_15")).concat(a?u(a):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t\t").concat(i,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},grid:{bottom:92},dataZoom:A(),xAxis:{...x(t,a)},yAxis:{...y(e("Monitor.System.index_16")),max:100},series:[{type:"line",data:n.memory,...v(e("Monitor.System.index_16"),"rgb(0, 153, 238)")}]}}(o,s,{memory:a})}}finally{g(!1)}};return _(),(t,e)=>{const a=At,s=yt,o=pt,r=ut,d=m,c=$;return b(),V(c,{class:"h-388px"},{header:z((()=>[G("div",Mt,[G("span",null,F(t.$t("Monitor.System.index_16")),1),M(a)])])),"header-extra":z((()=>[M(s,{value:T(n),"onUpdate:value":[e[0]||(e[0]=t=>L(n)?n.value=t:null),_],day:t.day,onRefresh:_},null,8,["value","day"]),M(o)])),default:z((()=>[M(d,{class:"h-full",show:T(f)},{default:z((()=>[T(i)?(b(),V(r,{key:0})):(b(),V(lt,{key:1,type:"line",height:"100%",option:T(l)},null,8,["option"]))])),_:1},8,["show"])])),_:1})}}}),wt={class:"flex items-center"},Ct="KB",It=S({__name:"system-disk",props:{day:{default:30}},setup(e){const{t:a}=q(),n=j("--color-text-2"),i=new Date,l=w([o(st(i)),o(i)]),r=w(!1),{option:x,getAddTime:y,renderTooltip:v,renderTable:A,renderXAxis:f,renderYAxis:g,renderSeries:_,renderDataZoom:S}=ft();const{loading:C,setLoading:I}=h(),k=t=>c(d(t,!1,3,Ct)),B=async()=>{try{I(!0);const{message:i}=await(e={start:l.value[0],end:l.value[1]},t.post("/ajax?action=GetDiskIo",e));if(s(i)){const t=[],e=[],s=[],o=[];for(let n=0;n<i.length;n++){const l=i[n],r=k(l.read_bytes),d=k(l.write_bytes),c=l.read_time+l.write_time;l.time=y(l.addtime,i[i.length-1].addtime),t.push([l.time,r,l,"".concat(Ct,"/s")]),e.push([l.time,d,l,"".concat(Ct,"/s")]),s.push([l.time,c,l,"".concat(a("Public.Unit.Time",c),"/s")]),o.push([l.time,l.read_count+l.write_count,l,"ms"])}let d=l.value[1],c=l.value[0];i.length>0?(d=i[0].time,c=ot(i[i.length-1].time).getTime(),r.value=!1):r.value=!0,function(t,e,i){x.value={legend:{top:"16px",textStyle:{color:n.value},data:[a("Monitor.System.index_18"),a("Monitor.System.index_19"),a("Monitor.System.index_20"),a("Monitor.System.index_21")]},tooltip:{...v(),formatter(t){let e="",n="",i="";return Object.entries(t).forEach((([t,a])=>{const{data:s}=a,[,o,l,r]=s;"0"===t&&(i=A(l.disk_top,"disk")),e=a.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(a.marker,"\n\t\t\t\t\t\t<span>").concat(a.seriesName,"ï¼š").concat(p(o)?o.toFixed(2):0,"  ").concat(r,"</span>\n\t\t\t\t\t</div>")})),'<div class="echarts-tooltip" style="width: 560px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(a("Monitor.System.index_15")).concat(e?u(e):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t\t").concat(i,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},grid:{bottom:92},dataZoom:S(),xAxis:{...f(t,e)},yAxis:{...g(a("Monitor.System.index_22",[Ct]))},series:[{type:"line",data:i.read,..._(a("Monitor.System.index_18"),"rgb(255, 70, 131)")},{type:"line",data:i.write,..._(a("Monitor.System.index_19"),"rgba(46, 165, 186, .7)")},{type:"line",data:i.countTotal,..._(a("Monitor.System.index_20"),"rgba(30, 144, 255)")},{type:"line",data:i.timeTotal,..._(a("Monitor.System.index_21"),"rgba(255, 140, 0)")}]}}(c,d,{read:t,write:e,timeTotal:s,countTotal:o})}}finally{I(!1)}var e};return B(),(t,e)=>{const a=At,n=yt,i=pt,s=ut,o=m,d=$;return b(),V(d,{class:"h-388px"},{header:z((()=>[G("div",wt,[G("span",null,F(t.$t("Monitor.System.index_17")),1),M(a)])])),"header-extra":z((()=>[M(n,{value:T(l),"onUpdate:value":[e[0]||(e[0]=t=>L(l)?l.value=t:null),B],day:t.day,onRefresh:B},null,8,["value","day"]),M(i)])),default:z((()=>[M(o,{class:"h-full",show:T(C)},{default:z((()=>[T(r)?(b(),V(s,{key:0})):(b(),V(lt,{key:1,type:"line",height:"100%",option:T(x)},null,8,["option"]))])),_:1},8,["show"])])),_:1})}}}),kt={class:"flex whitespace-pre-wrap items-center"},Bt={class:"w-100px"},Tt="KB",Nt=S({__name:"system-network",props:{day:{default:30}},setup(e){const{t:a}=q(),n=j("--color-text-2"),i=new Date,l=w([o(st(i)),o(i)]),r=w("all"),x=w([]),y=w(!1),{option:v,getAddTime:A,renderTooltip:f,renderXAxis:g,renderYAxis:_,renderSeries:S,renderDataZoom:C}=ft();const{loading:I,setLoading:k}=h(),B=t=>c(d(1024*t,!1,3,Tt)),N=t=>{x.value.length>0||(x.value=Object.keys(t).map((t=>({label:t,value:t}))),x.value.unshift({label:a("Public.All"),value:"all"}))},O=async()=>{try{k(!0);const{message:i}=await(e={start:l.value[0],end:l.value[1]},t.post("/ajax?action=GetNetWorkIo",e));if(s(i)){const t=[],e=[];for(let a=0;a<i.length;a++){const n=i[a],s="all"===r.value?n.up:n.up_packets[r.value],o="all"===r.value?n.down:n.down_packets[r.value],l=B(s),d=B(o);n.time=A(n.addtime,i[i.length-1].addtime),t.push([n.time,l,n,"".concat(Tt,"/s")]),e.push([n.time,d,n,"".concat(Tt,"/s")])}let s=l.value[1],o=l.value[0];i.length>0?(s=i[0].time,o=ot(i[i.length-1].time).getTime(),y.value=!1,N(i[0].down_packets)):(y.value=!0,N({})),function(t,e,i){v.value={legend:{top:"16px",textStyle:{color:n.value},data:[a("Monitor.System.index_24"),a("Monitor.System.index_25")]},tooltip:{...f(),formatter(t){let e="",n="";return Object.entries(t).forEach((([,t])=>{const{data:a}=t,[,i,,s]=a;e=t.axisValue,n+='<div class="select-data">\n\t\t\t\t\t\t'.concat(t.marker,"\n\t\t\t\t\t\t<span>").concat(t.seriesName,"ï¼š").concat(p(i)?i.toFixed(2):0,"  ").concat(s,"</span>\n\t\t\t\t\t</div>")})),'<div class="echarts-tooltip" style="width: 280px;">\n\t\t\t\t\t<div class="formatter-header">\n\t\t\t\t\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAAAgBJREFUWIXtWN1xgzAMlkQ3YoCaYaJji8AWPjJM3AEYCasPNT3XZ2xBk17b43uCiy190b8AOHHixN8GPkpQ3/cmfrfWukfIPUyw73vjvTci8oqIJndGRBwivk3TNPwoQWYeAOC689p4hOgugsFq971KYhBRt8f9pD3IzEOOnIg4ABiJqCOibpomBIARAMbw2xd47+/BAyqoLJiznIi4pmnGmjW2rK615IuGYEbBeLvdBs3dQALTuA0yqwZqageCYBOTOxLs8zy7tm0xltW2Lc7z7Er3qv+AmSV+DzF2GJfL5R6XpZqri0mSBjMRdd8hBwDQNM0Yv3vvTel8kaCIvEbPTpMQaUdJYa11cXbHOnIoJknsCkR8KxFbluW6WoOZi64LskyqI4dNC9YsEcN7f08VLcuy2WmIyGl1qQv1VuZuCUfEqrs1UBN8hLIVT2l1JWW5llYisqfVbRJMhZfKQVo6RMTtKUklixazOMxzJjxvloO1na1hUHNhmCE/dZTOFl0clxZN0FtrVbVSW76qBNNyUCodWqSDR62vFwkGa3zGFyKaPQGeInN3zJ2LoWr86cAAByaa3JqgGTxU8yARdYlrrsx81QydaxuEryObevBQj05bi9K6uQF8xNOaSJWNT+2BX780/a+1MwUzD5rFnYiq9fEpBGM869PHiRMn/jreAZxNPtSJHlfLAAAAAElFTkSuQmCC" alt="path" />\n\t\t\t\t\t\t<span>'.concat(a("Monitor.System.index_15")).concat(e?u(e):"--",'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="formatter-body">\n\t\t\t\t\t\t').concat(n,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>")}},grid:{bottom:92},dataZoom:C(),xAxis:{...g(t,e)},yAxis:{..._(a("Monitor.System.index_22",[Tt]))},series:[{type:"line",data:i.up,...S(a("Monitor.System.index_24"),"rgb(255, 70, 131)")},{type:"line",data:i.down,...S(a("Monitor.System.index_25"),"rgba(46, 165, 186, .7)")}]}}(o,s,{up:t,down:e})}}finally{k(!1)}var e};return O(),(t,e)=>{const a=tt,n=At,i=yt,s=pt,o=ut,d=m,c=$;return b(),V(c,{class:"h-388px"},{header:z((()=>[G("div",kt,[G("span",null,F(t.$t("Monitor.System.index_23")),1),G("div",Bt,[M(a,{value:T(r),"onUpdate:value":[e[0]||(e[0]=t=>L(r)?r.value=t:null),O],options:T(x),size:"small","consistent-menu-width":!1},null,8,["value","options"])]),M(n)])])),"header-extra":z((()=>[M(i,{value:T(l),"onUpdate:value":[e[1]||(e[1]=t=>L(l)?l.value=t:null),O],day:t.day,onRefresh:O},null,8,["value","day"]),M(s)])),default:z((()=>[M(d,{class:"h-full",show:T(I)},{default:z((()=>[T(y)?(b(),V(o,{key:0})):(b(),V(lt,{key:1,type:"line",height:"100%",option:T(v)},null,8,["option"]))])),_:1},8,["show"])])),_:1})}}}),Ot={class:"flex items-center flex-wrap"},qt={class:"inline-flex items-center mr-32px"},Wt={class:"mr-12px"},Jt={class:"inline-flex items-center"},Rt={class:"mr-6px"},Yt={class:"w-86px mr-12px"},zt={class:"inline-flex mx-32px"},Ut={class:"mr-16px"},Et=S({__name:"index",setup(a){const{t:n}=q(),i=w({day:0,status:!1,size:0}),s=async t=>{await rt({type:t?1:0,day:i.value.day}),i.value.status=t},o=async()=>{i.value.day?/^-?\d+$/.test("".concat(i.value.day))?await rt({type:i.value.status?1:0,day:i.value.day}):v.error(n("Monitor.System.index_6")):v.error(n("Monitor.System.index_5"))},l=()=>{g({title:n("Monitor.System.index_4"),content:()=>M("span",{class:"text-error"},[n("Monitor.System.index_7")]),onConfirm:async()=>{await t.post("/config?action=SetControl",{type:"del"},{requestOptions:{loading:e.global.t("Monitor.API.system_2"),successMessage:!0}}),A()}})};return(async()=>{const{message:e}=await(a={type:-1},t.post("/config?action=SetControl",a));var a;x(e)&&(i.value=e)})(),(t,e)=>{const a=et,n=at,r=K,c=f,u=$,m=nt,p=y;return b(),_("div",null,[M(u,{class:"p-16px mb-16px"},{default:z((()=>[G("div",Ot,[G("div",qt,[G("span",Wt,F(t.$t("Monitor.System.index_1")),1),M(a,{value:T(i).status,"onUpdate:value":s},null,8,["value"])]),G("div",Jt,[G("span",Rt,F(t.$t("Monitor.System.index_2")),1),G("div",Yt,[M(n,{value:T(i).day,"onUpdate:value":e[0]||(e[0]=t=>T(i).day=t),min:1,"show-button":!1,placeholder:""},null,8,["value"])]),M(r,{onClick:o},{default:z((()=>[Q(F(t.$t("Monitor.System.index_3")),1)])),_:1})]),G("div",zt,[M(c,{vertical:""})]),G("span",Ut,F(t.$t("Monitor.System.index_33"))+F(T(d)(T(i).size)),1),M(r,{onClick:l},{default:z((()=>[Q(F(t.$t("Monitor.System.index_4")),1)])),_:1})])])),_:1}),M(p,{"x-gap":"16","y-gap":"16",cols:2},{default:z((()=>[M(m,{span:2},{default:z((()=>[M(gt,{day:T(i).day},null,8,["day"])])),_:1}),M(m,{span:1},{default:z((()=>[M(_t,{day:T(i).day},null,8,["day"])])),_:1}),M(m,{span:1},{default:z((()=>[M(St,{day:T(i).day},null,8,["day"])])),_:1}),M(m,{span:1},{default:z((()=>[M(It,{day:T(i).day},null,8,["day"])])),_:1}),M(m,{span:1},{default:z((()=>[M(Nt,{day:T(i).day},null,8,["day"])])),_:1})])),_:1})])}}});export{Et as default};
