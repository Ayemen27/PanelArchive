const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/form9.js?v=1758532619827","js/index.vue_vue_type_script_setup_true_lang.js?v=1758532619827","js/vue.js?v=1758532619827","js/__commonjsHelpers__.js?v=1758532619827","js/naive.js?v=1758532619827","js/common.js?v=1758532619827","js/page_layout.js?v=1758532619827","js/public.js?v=1758532619827","css/public.css?v=1758532619827","css/page_layout.css?v=1758532619827","js/index108.js?v=1758532619827","css/index21.css?v=1758532619827","js/index.vue_vue_type_script_setup_true_lang5.js?v=1758532619827","js/index.vue_vue_type_script_setup_true_lang6.js?v=1758532619827","css/index15.css?v=1758532619827","js/index.js?v=1758532619827","css/index108.css?v=1758532619827","js/terminal2.js?v=1758532619827","js/xterm.js?v=1758532619827","js/xterm-addon-canvas.js?v=1758532619827","css/xterm-addon-canvas.css?v=1758532619827","css/terminal.css?v=1758532619827"])))=>i.map(i=>d[i]);
import{_ as e,k as t,P as a,X as s,w as l,R as n,S as i,a3 as o,j as r,a4 as d,V as c,aj as u,r as m,e as p,a0 as v,a2 as _,O as h,H as x,av as f,U as g,I as y,F as k,an as w,l as b,v as C,o as T,b as j}from"./vue.js?v=1758532619827";import{i as E,t as S,a as I,d4 as L,w as O,f as P,_ as U,p as q}from"./page_layout.js?v=1758532619827";import{u as R,c as D,f as A,a as F,d as M,h as $,i as z,e as B}from"./public.js?v=1758532619827";import{_ as K}from"./index108.js?v=1758532619827";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1758532619827";import{aC as X,au as H,dP as Y,d9 as G,dS as J}from"./naive.js?v=1758532619827";import{_ as N}from"./index.js?v=1758532619827";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang.js?v=1758532619827";import{T as W}from"./terminal2.js?v=1758532619827";const{t:Z}=E.global,ee=e=>S.post("/xterm?action=create_host",e,{requestOptions:{loading:Z("Security.Api.Index_4"),successMessage:!0}}),te=e=>S.post("/xterm?action=get_host_find",e),ae=t=>{R({title:t.title,width:600,footer:!0,data:t.data,component:e((()=>I((()=>import("./form9.js?v=1758532619827")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))))})},se=t({__name:"index",setup(e,{expose:t}){const{t:m}=a(),p=L(),{keys:v,table:_,columns:h}=D([{key:"host",title:m("Term.index_8"),ellipsis:{tooltip:{width:"trigger"}},render:e=>s("span",{class:"cursor-pointer w-100%",onClick:()=>f(e)},[e.host])},A({width:130,options:e=>[{label:m("Site.TableOP.index_7"),onClick:()=>{const t={title:m("Term.index_22"),data:{isEdit:!0,row:e}};ae(t)}},{label:m("Public.Btn.Del"),onClick:()=>{F({title:m("Term.index_6"),content:m("Term.index_7",[e.host]),onConfirm:async({hide:t})=>{var a;await(a={host:e.host},S.post("/xterm?action=remove_host",a,{requestOptions:{loading:Z("Security.Api.Index_3"),successMessage:!0}})),k(),t()}})}}]})]),x=()=>{const e={title:m("Term.index_19"),data:{isEdit:!1}};ae(e)},f=e=>{p.server={...e,time:new Date}},{loading:g,setLoading:y}=M(),k=async()=>{try{y(!0);const{message:e}=await S.post("/xterm?action=get_host_list");O(e)&&(_.data=e)}finally{v.value=[],y(!1)}};return k(),l((()=>p.isRefresh),(e=>{e&&(p.setRefresh(!1),k())})),t({init:k}),(e,t)=>{const a=X,l=$,m=V;return n(),i("div",null,[s(m,null,{toolsLeft:o((()=>[s(a,{type:"primary",onClick:x},{default:o((()=>[r(d(e.$t("Term.index_19")),1)])),_:1})])),table:o((()=>[s(l,{"checked-row-keys":c(v),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>u(v)?v.value=e:null),loading:c(g),"max-height":"calc(100vh - 250px)",data:c(_).data,columns:c(h)},null,8,["checked-row-keys","loading","data","columns"])])),_:1})])}}}),le={class:"p-20px"},ne=t({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=a(),r=e,{isEdit:d,row:u,getList:v}=r.data,_=m(null),h=p({name:"",content:""}),x={name:{required:!0,message:l("Security.Conf.Index_28"),trigger:["blur","input"]},content:{required:!0,message:l("Security.Conf.Index_28"),trigger:["blur","input"]}};return d&&u&&(h.name=u.title,h.content=u.shell),t({onConfirm:async({hide:e})=>{var t,a;await(null==(t=_.value)?void 0:t.validate()),d?await(a={shell:h.content,title:u?u.title:"",new_title:h.name},S.post("/xterm?action=modify_command",a,{requestOptions:{loading:Z("Crontab.Api.index_5"),successMessage:!0}})):await(e=>S.post("/xterm?action=create_command",e,{requestOptions:{loading:Z("Security.Api.Index_4"),successMessage:!0}}))({shell:h.content,title:h.name}),null==v||v(),e()}}),(e,t)=>{const a=H,l=Y,r=Q;return n(),i("div",le,[s(r,{ref_key:"formRef",ref:_,model:c(h),rules:x},{default:o((()=>[s(l,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:o((()=>[s(a,{class:"w-280px!",value:c(h).name,"onUpdate:value":t[0]||(t[0]=e=>c(h).name=e),placeholder:e.$t("Term.idnex_1")},null,8,["value","placeholder"])])),_:1},8,["label"]),s(l,{label:e.$t("Docker.LocalImage.build_5"),path:"content"},{default:o((()=>[s(a,{class:"w-280px!",type:"textarea",rows:6,value:c(h).content,"onUpdate:value":t[1]||(t[1]=e=>c(h).content=e),placeholder:e.$t("Term.index_2")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),ie=t({__name:"index",setup(e,{expose:t}){const{t:l}=a(),{keys:m,table:p,columns:v}=D([{key:"title",title:l("Term.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>s("span",{class:"cursor-pointer w-100%",onClick:()=>{_(e.shell)}},[e.title])},A({width:130,options:e=>[{label:l("Public.Btn.Copy"),onClick:()=>{_(e.shell)}},{label:l("Public.Btn.Edit"),onClick:()=>{k(e)}},{label:l("Public.Btn.Del"),onClick:()=>{F({title:l("Term.index_20"),content:l("Term.index_21",[e.title]),onConfirm:async({hide:t})=>{var a;await(a={title:e.title},S.post("/xterm?action=remove_command",a,{requestOptions:{loading:Z("Security.Api.Index_3"),successMessage:!0}})),f(),t()}})}}]})]),_=e=>{z(e)},{loading:h,setLoading:x}=M(),f=async()=>{try{x(!0);const{message:e}=await S.post("/xterm?action=get_command_list");O(e)&&(p.data=e)}finally{m.value=[],x(!1)}},g=B(l("Term.index_3"),{isEdit:!1,getList:f}),y=()=>{g.data.isEdit=!1,g.title=l("Term.index_3"),g.show=!0},k=e=>{g.data.row=e,g.data.isEdit=!0,g.title=l("Term.index_5"),g.show=!0};return f(),t({init:f}),(e,t)=>{const a=X,l=$,_=V,x=N;return n(),i("div",null,[s(_,null,{toolsLeft:o((()=>[s(a,{type:"primary",onClick:y},{default:o((()=>[r(d(e.$t("Term.index_3")),1)])),_:1})])),table:o((()=>[s(l,{"checked-row-keys":c(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>u(m)?m.value=e:null),loading:c(h),"max-height":"calc(100vh - 250px)",data:c(p).data,columns:c(v)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),s(x,{show:c(g).show,"onUpdate:show":t[1]||(t[1]=e=>c(g).show=e),title:c(g).title,data:c(g).data,width:480,footer:!0,component:ne},null,8,["show","title","data"])])}}}),oe=t({__name:"index",setup(e){const{t:t}=a(),l=m("server"),o=[{key:"server",label:t("Term.index_23"),component:se},{key:"command",label:t("Term.index_24"),component:ie}];return(e,t)=>{const a=K;return n(),i("div",null,[s(a,{class:"w-300px!",value:c(l),"onUpdate:value":t[0]||(t[0]=e=>u(l)?l.value=e:null),options:o},null,8,["value"])])}}}),re=["onClick","onContextmenu"],de=["title"],ce=["onClick"],ue={class:"terminal bg-#333333"},me=q(t({__name:"index",setup(e){const{t:t}=a(),u=L(),{isFull:p,server:T,isShow:j}=v(u),E=m([{id:"aaaaaaaaa",host:"127.0.0.1",port:22,ps:t("Database.form.index_12"),state:!0}]),S=["Copy session","Close session","Close to right","Close other"],I=m("aaaaaaaaa"),O=()=>{const e={title:t("Term.index_19"),data:{isEdit:!1}};ae(e)},q=e=>{const t=P(9,"letter");E.value.push({id:t,host:e.host,port:e.port,ps:e.ps,state:!0}),setTimeout((()=>{R(t)}),20)},R=e=>{I.value=e},D=(e,t)=>{E.value=E.value.map((a=>a.id===e?{...a,state:t}:a))},A=e=>{E.value=E.value.filter((t=>t.id!==e)),I.value=E.value.length>0?E.value[E.value.length-1].id:"aaaaaaaaa"},F=m(!1),M=m(0),$=m(0),z=m({id:"",host:"",port:0,ps:"",state:!1});return document.addEventListener("click",(()=>{F.value=!1})),l((()=>T.value),(e=>{null!==e&&q(e)}),{deep:!0}),(e,t)=>{const a=U,l=G;return n(),_(l,{vertical:"",class:"gap-0!"},{default:o((()=>[s(l,{class:"head gap-0! xterm-head"},{default:o((()=>[(n(!0),i(k,null,h(c(E),(e=>(n(),i("div",{key:e.id,class:x(["item",{"item-active":c(I)===e.id}]),onClick:t=>R(e.id),onContextmenu:f((t=>{return a=t,s=e,z.value=s,M.value=a.clientX,$.value=a.clientY,void(F.value=!0);var a,s}),["prevent"])},[g("div",{class:"text",title:e.ps},[g("span",{class:x(["icon",{"icon-active":!e.state}])},null,2),r(d(e.ps?e.ps:e.host),1)],8,de),s(a,{name:"base-close",class:"close-terminal",size:16,onClick:f((t=>A(e.id)),["stop"])},null,8,["onClick"]),c(F)?(n(),i("div",{key:0,class:"context-menu",style:y({top:c($)-20+"px",left:c(M)-180+"px"})},[g("ul",null,[(n(),i(k,null,h(S,((e,t)=>g("li",{key:t,onClick:t=>(e=>{if(!z.value)return;let t;switch(e){case"Copy session":q(z.value);break;case"Close session":A(z.value.id);break;case"Close to right":t=E.value.findIndex((e=>e.id===z.value.id)),-1!==t&&(E.value.splice(t+1),setTimeout((()=>{var e;R((null==(e=E.value[t])?void 0:e.id)||"aaaaaaaaa")}),20));break;case"Close other":E.value=E.value.filter((e=>e.id===z.value.id)),setTimeout((()=>{R(z.value.id)}),20)}F.value=!1})(e)},d(e),9,ce))),64))])],4)):w("",!0)],42,re)))),128)),g("div",{class:"add-terminal",onClick:O},[s(a,{name:"base-add",size:24})]),g("div",{class:"absolute right-0px add-terminal",onClick:t[0]||(t[0]=e=>p.value=!c(p))},[s(a,{name:"base-full",size:24})])])),_:1}),g("div",ue,[(n(!0),i(k,null,h(c(E),(e=>b((n(),_(W,{key:e.id,data:e,onUpdateFull:R,onUpdateState:D},null,8,["data"])),[[C,e.id===c(I)]]))),128)),g("div",{class:x(["terminal-contract-tool",{active:!c(j)}]),onClick:t[1]||(t[1]=e=>j.value=!c(j))},null,2)])])),_:1})}}}),[["__scopeId","data-v-5115dd54"]]),pe={class:"p-16px box"},ve=q(t({__name:"index",setup(e){const t=L(),{isShow:a,isFull:r}=v(t),d=m(null);l((()=>r.value),(e=>{var t;e?(a.value=!1,null==(t=d.value)||t.requestFullscreen()):document.exitFullscreen().catch((e=>{console.log(e.message)}))}));const u=()=>{document.fullscreenElement?r.value=!0:r.value=!1};return T((()=>{document.addEventListener("fullscreenchange",u)})),j((()=>{document.removeEventListener("fullscreenchange",u)})),(e,t)=>{const l=G,r=J;return n(),i("div",pe,[s(r,{class:"p-16px h-100%"},{default:o((()=>[g("div",{class:"h-100%",ref_key:"contentRef",ref:d},[s(l,{class:"flex-nowrap! h-100%"},{default:o((()=>[s(me,{class:"flex-1 overflow-hidden"}),b(s(oe,null,null,512),[[C,c(a)]])])),_:1})],512)])),_:1})])}}}),[["__scopeId","data-v-57762b9d"]]),_e=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));export{ee as a,te as g,_e as i};
