System.register(["./index-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1758532619827","./public-legacy.js?v=1758532619827","./index-legacy245.js?v=1758532619827","./page_layout-legacy.js?v=1758532619827","./index-legacy39.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827","./soft-legacy2.js?v=1758532619827","./soft-legacy.js?v=1758532619827","./file-legacy2.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1758532619827"],(function(e,l){"use strict";var t,a,c,i,n,s,r,o,d,f,p,y,m,u,v,g,b,w,x,_,h,k,j,R,$,C,z,U,D,T,F,P,B;return{setters:[e=>{t=e._},e=>{a=e._},e=>{c=e.f,i=e.a,n=e.al,s=e.h},e=>{r=e._},e=>{o=e.n,d=e.a7,f=e.t,p=e.c,y=e.w,m=e.p},e=>{u=e.F,v=e.g},e=>{g=e.dc,b=e.dj,w=e.aC,x=e.dQ},e=>{_=e.k,h=e.P,k=e.i,j=e.r,R=e.X,$=e.c,C=e.R,z=e.a2,U=e.a3,D=e.U,T=e.a4,F=e.V,P=e.aj,B=e.j},null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent='@charset "UTF-8";.modal-footer-btns[data-v-2e0c3f71]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-2e0c3f71]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.recycle-wrapper .recycle-top[data-v-2e0c3f71]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;border-bottom:1px solid var(--color-border);padding:16px 20px}.recycle-wrapper .recycle-top .config-item[data-v-2e0c3f71]{display:flex;align-items:center;gap:10px}.recycle-wrapper .recycle-main[data-v-2e0c3f71]{display:flex;height:568px}.recycle-wrapper .recycle-main .bt-tabs-modal[data-v-2e0c3f71]{--n-tab-item-width: 120px}.recycle-wrapper .recycle-main .tab-content[data-v-2e0c3f71]{flex:1;width:0;height:100%;padding:16px}\n',document.head.appendChild(l);const q={class:"recycle-wrapper"},M={class:"recycle-top"},O={class:"flex gap-20px"},N={class:"config-item"},G={class:"config-item"},K={class:"config-item"},S={class:"recycle-main"},E={class:"tabs"},H={class:"tab-content"},I={class:"mt-10px"};e("default",m(_({__name:"Recycle",setup(e,{expose:l}){const{t:m}=h(),_=k("fileStore"),J=j(!1);l({open(){J.value=!0,le()},close(){J.value=!1}});const Q=j("all"),V=j(!1),X=j([]),A=j([]),L=j([]),W=j(!1),Y=j(!1),Z=j([{type:"selection",width:40},{key:"name",title:()=>m("file.fileName"),render:e=>R("div",{class:"flex items-center gap-4px"},[R(u,{ext:e.ext},null),R("div",{class:"flex-1 w-0"},[R(g,null,{default:()=>[e.name]})])])},{key:"dname",title:()=>m("file.recycle.originalDirectory"),ellipsis:{tooltip:!0}},{key:"size",title:()=>m("file.size"),width:180,render:e=>o(e.size)},{title:()=>m("file.recycle.removalTime"),key:"time",width:200,render:e=>d(e.time)},c({width:200,options:e=>[{label:m("file.recycle.recover"),onClick:()=>{de(e)}},{label:m("file.recycle.deletePermanently"),onClick:()=>{fe(e)}}]})]),ee=[{key:"restore",label:m("file.recycle.batchRestore"),type:"confirm",confirm:{title:m("file.recycle.batchRestore"),desc:m("file.recycle.batchRestoreConfirm"),api:e=>f.post("/files?action=Re_Recycle_bin",{path:e.rname}),done:()=>{le(),v(_)},columns:[{key:"name",title:()=>m("file.fileName")}]}},{key:"delete",label:m("file.recycle.batchDeletePermanently"),type:"confirm",confirm:{title:m("file.recycle.batchDeletePermanently"),desc:m("file.recycle.batchDeleteConfirm"),api:e=>f.post("/files?action=Del_Recycle_bin",{path:e.rname}),done:()=>{le()},columns:[{key:"name",title:()=>m("file.fileName")}]}}];async function le(){try{X.value=[],V.value=!0;const{message:e}=await f.post("/files?action=Get_Recycle_bin");p(e)&&(L.value=y(e.dirs)?e.dirs.map((e=>({...e,type:"dir",ext:"folder"}))):[],A.value=y(e.files)?e.files.map((e=>({...e,type:"file",ext:e.name.split(".").pop()||""}))):[],W.value=e.status,Y.value=e.status_db)}finally{V.value=!1}}const te=["jpg","jpeg","png","bmp","gif","tiff","ico","JPG","webp"],ae=["zip","rar","gz","war","tgz"],ce=["mp4","mp3","mpeg","mpg","mov","avi","webm","mkv","mkv","mp3","rmvb","wma","wmv"],ie=["iso","xlsx","xls","doc","docx","tiff","exe","so","7z","bz","dmg","apk","pptx","ppt","xlsb","pdf"],ne=$((()=>{let e=[];switch(Q.value){case"all":e=[...L.value,...A.value];break;case"folder":e=[...L.value];break;case"file":e=[...A.value];break;case"image":e=A.value.filter((e=>te.some((l=>e.name.includes(`.${l}`)))));break;case"document":e=A.value.filter((e=>{const l=te.some((l=>e.name.includes(`.${l}`))),t=ae.some((l=>e.name.includes(`.${l}`))),a=ce.some((l=>e.name.includes(`.${l}`))),c=ie.some((l=>e.name.includes(`.${l}`)));return l||t||a||c}));break;case"database":e=[...L.value,...A.value].filter((e=>e.name.includes("BTDB_")));break;default:e=[]}return e.sort(((e,l)=>l.time-e.time)),e})),se=()=>{le()},re=async e=>{const l={};"file"!==e&&(l[e]=1),await f.post("/files?action=Recycle_bin",l,{requestOptions:{loading:m("file.recycle.switching"),successMessage:!0}}),le()},oe=()=>{n({text:m("file.recycle.emptyTitle"),title:m("file.recycle.emptyTitle"),content:m("file.recycle.emptyConfirm"),onConfirm:async()=>{await f.post("/files?action=Close_Recycle_bin","",{requestOptions:{loading:m("file.recycle.emptying"),successMessage:!0}}),le()}})},de=e=>{i({title:m("file.recycle.restoreFileTitle",{name:e.name}),content:m("file.recycle.restoreFileConfirm"),onConfirm:async()=>{await f.post("/files?action=Re_Recycle_bin",{path:e.rname},{requestOptions:{loading:m("file.recycle.restoring"),successMessage:!0}}),le(),v(_)}})},fe=e=>{n({text:m("file.delete"),title:m("file.recycle.deleteFileTitle",{name:e.name}),content:m("file.recycle.deleteFileConfirm"),onConfirm:async()=>{await f.post("/files?action=Del_Recycle_bin",{path:e.rname},{requestOptions:{loading:m("file.recycle.deleting"),successMessage:!0}}),le()}})};return(e,l)=>{const c=b,i=w,n=x,o=r,d=s,f=a,p=t;return C(),z(p,{show:F(J),"onUpdate:show":l[7]||(l[7]=e=>P(J)?J.value=e:null),title:e.$t("file.recycle.title"),width:"80%"},{default:U((()=>[D("div",q,[D("div",M,[D("div",O,[D("div",N,[D("div",null,T(e.$t("file.recycle.fileRecycleBin")),1),R(c,{value:F(W),"onUpdate:value":[l[0]||(l[0]=e=>P(W)?W.value=e:null),l[1]||(l[1]=()=>re("file"))]},null,8,["value"])]),D("div",G,[D("div",null,T(e.$t("file.recycle.databaseRecycleBin")),1),R(c,{value:F(Y),"onUpdate:value":[l[2]||(l[2]=e=>P(Y)?Y.value=e:null),l[3]||(l[3]=()=>re("db"))]},null,8,["value"])]),D("div",K,T(e.$t("file.recycle.warning")),1)]),R(i,{onClick:oe},{default:U((()=>[B(T(e.$t("file.recycle.emptyRecycleBin")),1)])),_:1})]),D("div",S,[D("div",E,[R(o,{value:F(Q),"onUpdate:value":[l[4]||(l[4]=e=>P(Q)?Q.value=e:null),se],panePadding:"0"},{default:U((()=>[R(n,{name:"all",tab:e.$t("file.recycle.all")},null,8,["tab"]),R(n,{name:"folder",tab:e.$t("file.recycle.folder")},null,8,["tab"]),R(n,{name:"file",tab:e.$t("file.recycle.file")},null,8,["tab"]),R(n,{name:"image",tab:e.$t("file.recycle.image")},null,8,["tab"]),R(n,{name:"document",tab:e.$t("file.recycle.document")},null,8,["tab"]),R(n,{name:"database",tab:e.$t("file.recycle.database")},null,8,["tab"])])),_:1},8,["value"])]),D("div",H,[R(d,{"checked-row-keys":F(X),"onUpdate:checkedRowKeys":l[5]||(l[5]=e=>P(X)?X.value=e:null),loading:F(V),"max-height":450,"row-key":"rname",columns:F(Z),data:F(ne)},null,8,["checked-row-keys","loading","columns","data"]),D("div",I,[R(f,{"checked-row-keys":F(X),"onUpdate:checkedRowKeys":l[6]||(l[6]=e=>P(X)?X.value=e:null),"row-key":"rname","select-width":240,data:F(ne),options:ee},null,8,["checked-row-keys","data"])])])])])])),_:1},8,["show","title"])}}}),[["__scopeId","data-v-2e0c3f71"]]))}}}));
