System.register(["./page_layout-legacy.js?v=1758532619827","./index-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1758532619827","./public-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1758532619827","./index-legacy108.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1758532619827","./index-legacy101.js?v=1758532619827","./theme-monokai-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./organization-legacy.js?v=1758532619827"],(function(e,t){"use strict";var a,n,l,i,r,o,s,d,p,c,u,_,g,b,x,m,y,h,v,w,C,f,k,S,T,j,U,$,P,O,E,q,R,L,z,D,N,I,J,M,A,F,V,K,B,W,X,G;return{setters:[e=>{a=e.i,n=e.t,l=e.z,i=e.a7,r=e.c,o=e.x,s=e.w,d=e.a},e=>{p=e._},e=>{c=e._},e=>{u=e._},e=>{_=e._},e=>{g=e._,b=e.c,x=e.f,m=e.a,y=e.d,h=e.e,v=e.h},e=>{w=e._},e=>{C=e._},e=>{f=e._},e=>{k=e.V},null,e=>{S=e.k,T=e.a0,j=e.P,U=e.r,$=e.e,P=e.R,O=e.S,E=e.X,q=e.a3,R=e.V,L=e.a2,z=e.an,D=e.U,N=e.a4,I=e.N,J=e.aj,M=e.j,A=e._},e=>{F=e.au,V=e.dP,K=e.dV,B=e.d9,W=e.dS,X=e.aC},e=>{G=e.g}],execute:function(){const{t:H}=a.global,Q=e=>n.post("/crontab/script/create_script",{data:JSON.stringify(e)},{requestOptions:{loading:H("Security.Api.Index_4"),successMessage:!0}}),Y=e=>n.post("/crontab/script/modify_script",{data:JSON.stringify(e)},{requestOptions:{loading:H("Crontab.Api.index_5"),successMessage:!0}}),Z=(e("e",(e=>n.post("/crontab/script/test_script",{data:JSON.stringify(e)},{requestOptions:{loading:H("Crontab.Api.index_4"),errorMessage:!1}}))),e("g",(e=>n.post("/crontab/script/get_script_logs",{data:JSON.stringify(e)}))),(e,t=!0)=>n.post("/crontab/script/remove_script",e,{requestOptions:{loading:t?H("Security.Api.Index_3"):"",successMessage:t}})),ee={class:"p-20px"},te=S({__name:"index",props:{data:{}},setup(e,{expose:t}){const a=l(),{theme:n}=T(a),{t:i}=j(),r=e,{isEdit:o,row:s,id:d,getList:p}=r.data,c=U(null),u=[{value:"string",label:i("Crontab.Script.index_9")},{value:"int",label:i("Crontab.Script.index_10")},{value:"float",label:i("Crontab.Script.index_11")}],_=[{value:"1",label:i("Crontab.Script.index_12")},{value:"0",label:i("Crontab.Script.index_13")}],b={name:{required:!0,trigger:["blur","change"],message:i("Crontab.Planned.index_49")},custom:{required:!0,trigger:["blur","change"],message:i("Crontab.arrange.index_28")},argsTitle:{required:!0,trigger:["blur","change"],message:i("Security.Conf.Index_28")},argsExplain:{required:!0,trigger:["blur","change"],message:i("Security.Conf.Index_28")}},x=$({name:"",type:"string",argsType:"0",argsTitle:"",argsExplain:"",custom:"",remark:""}),m=()=>({name:x.name,return_type:x.type,is_args:x.argsType,ps:x.remark,script:x.custom,type_id:d,args_title:x.argsTitle,args_ps:x.argsExplain,...o?{script_id:s?.script_id}:null});return t({onConfirm:async()=>{await(c.value?.validate()),o?await Y(m()):await Q(m()),p?.()}}),o&&s&&(x.name=s.name,x.type=s.return_type,x.argsType=s.is_args.toString(),x.argsTitle=s.args_title,x.argsExplain=s.args_ps,x.custom=s.script,x.remark=s.ps),(e,t)=>{const a=F,l=V,i=K,r=B,o=f,s=g;return P(),O("div",ee,[E(o,{ref_key:"formRef",ref:c,model:R(x),rules:b},{default:q((()=>[E(l,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:q((()=>[E(a,{class:"w-360px!",value:R(x).name,"onUpdate:value":t[0]||(t[0]=e=>R(x).name=e),placeholder:e.$t("Crontab.Planned.index_49")},null,8,["value","placeholder"])])),_:1},8,["label"]),E(l,{label:e.$t("Crontab.Script.index_2")},{default:q((()=>[E(i,{class:"w-150px!",value:R(x).type,"onUpdate:value":t[1]||(t[1]=e=>R(x).type=e),options:u},null,8,["value"])])),_:1},8,["label"]),E(r,null,{default:q((()=>[E(l,{label:e.$t("Crontab.Script.index_5")},{default:q((()=>[E(i,{class:"w-80px!",value:R(x).argsType,"onUpdate:value":t[2]||(t[2]=e=>R(x).argsType=e),options:_},null,8,["value"])])),_:1},8,["label"]),"1"==R(x).argsType?(P(),L(l,{key:0,path:"argsTitle"},{default:q((()=>[E(a,{class:"w-110px!",value:R(x).argsTitle,"onUpdate:value":t[3]||(t[3]=e=>R(x).argsTitle=e),placeholder:e.$t("Crontab.Script.index_51")},null,8,["value","placeholder"])])),_:1})):z("",!0),"1"==R(x).argsType?(P(),L(l,{key:1,path:"argsExplain"},{default:q((()=>[E(a,{class:"w-145px!",value:R(x).argsExplain,"onUpdate:value":t[4]||(t[4]=e=>R(x).argsExplain=e),placeholder:e.$t("Crontab.Script.index_52")},null,8,["value","placeholder"])])),_:1})):z("",!0)])),_:1}),E(l,{label:" ",path:"custom"},{default:q((()=>[E(R(k),{theme:"dark"===R(n)?"monokai":"chrome",value:R(x).custom,"onUpdate:value":t[5]||(t[5]=e=>R(x).custom=e),class:"w-360px border-solid h-150px border-1px border-#ccc rounded-4px leading-[1.4]"},null,8,["theme","value"])])),_:1}),E(l,{label:e.$t("Docker.Template.add.index_3")},{default:q((()=>[E(a,{class:"w-360px!",value:R(x).remark,"onUpdate:value":t[6]||(t[6]=e=>R(x).remark=e),placeholder:e.$t("Crontab.arrange.index_27")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),E(s,null,{default:q((()=>[D("li",null,N(e.$t("Crontab.Script.index_6")),1),D("li",null,N(e.$t("Crontab.Script.index_7")),1),D("li",null,N(e.$t("Crontab.Script.index_8")),1)])),_:1})])}}}),ae=S({__name:"index",setup(e){const a=A((()=>d((()=>t.import("./index-legacy124.js?v=1758532619827")),void 0))),l=A((()=>d((()=>t.import("./index-legacy125.js?v=1758532619827")),void 0))),g=A((()=>d((()=>t.import("./custom-legacy.js?v=1758532619827")),void 0))),f=U("1"),k=U([]),{t:S}=j(),T=()=>{Y.data.isEdit=!1,Y.data.id=f.value,Y.show=!0},{keys:O,table:z,columns:D}=b([{type:"selection",width:40},{key:"name",title:S("Site.TableRow.index_2")},{key:"script_type",title:S("Ftp.Table.index_3")},{key:"return_type",title:S("Crontab.Script.index_2")},{key:"ps",title:S("Docker.Template.add.index_3")},{key:"name",title:S("Docker.Container.index_9"),render:e=>i(e.create_time)},{key:"name",title:S("Crontab.Planned.index_12"),render:e=>i(e.last_exec_time)},x({title:S("Public.Table.Operation"),width:240,options:e=>[{label:S("Docker.LocalImage.pull.index_12"),onClick:()=>{if(e.is_args)return ne.show=!0,void(ne.data.row=e);Q("",e)}},{label:S("Site.TableOP.index_7"),onClick:()=>{Y.title=S("Crontab.arrange.index_38"),Y.data.isEdit=!0,Y.data.row=e,Y.data.id=f.value,Y.show=!0}},{label:S("Ftp.Table.index_15"),onClick:()=>{ee.title=S("Crontab.Planned.index_6",[e.name]),ee.data.id=e.script_id,ee.show=!0}},{label:S("Public.Btn.Del"),onClick:()=>{m({title:`${S("Ftp.Table.index_10")} ${e.name} ${S("Crontab.Script.index_3")}`,content:S("Crontab.Script.index_4"),onConfirm:async()=>{await Z({script_id:e.script_id}),H()}})}}]})]),F=[{key:"delete",type:"confirm",label:S("Crontab.Script.index_42"),confirm:{title:S("Crontab.Planned.index_16",[S("Crontab.Script.index_42")]),desc:S("Crontab.Planned.index_17",[S("Crontab.Script.index_42")]),columns:[D.value[1]],api:e=>Z({script_id:e.script_id},!1),done:()=>{H()}}}],V=$({p:1,rows:10,search:""}),{loading:K,setLoading:B}=y(!0);(async()=>{const{message:e}=await G();s(e)&&(k.value=e.map((e=>({label:e.name,key:e.type_id.toString()}))))})();const H=async()=>{try{B(!0);const{message:t}=await(e=I({...V,type_id:f.value}),n.post("/crontab/script/get_script_list",{data:JSON.stringify(e)}));r(t)?(z.data=t.data.map((e=>({...e,id:e.script_id}))),z.total=o(t.page)):(z.data=[],z.total=0)}finally{O.value=[],B(!1)}var e};H();const Q=(e,t)=>{m({title:S("Crontab.Planned.index_13"),content:S("Crontab.arrange.index_1",[t.name]),onConfirm:()=>{ae.data.row=t,ae.data.args=e,ae.show=!0}})},Y=h(S("Crontab.Script.index_1"),{getList:H}),ee=h(),ae=h(S("Crontab.Planned.index_23"),{getList:H}),ne=h(S("Crontab.Script.index_44"),{callback:Q});return(e,t)=>{const n=C,i=X,r=w,o=v,s=_,d=u,b=c,x=p,m=W;return P(),L(m,{class:"p-16px"},{default:q((()=>[E(n,{value:R(f),"onUpdate:value":[t[0]||(t[0]=e=>J(f)?f.value=e:null),H],options:R(k)},null,8,["value","options"]),E(b,{feedback:!0},{toolsLeft:q((()=>[E(i,{type:"primary",onClick:T},{default:q((()=>[M(N(e.$t("Crontab.Script.index_1")),1)])),_:1})])),toolsRight:q((()=>[E(r,{value:R(V).search,"onUpdate:value":t[1]||(t[1]=e=>R(V).search=e),placeholder:e.$t("WP.Sets.index_15"),onSearch:H},null,8,["value","placeholder"])])),table:q((()=>[E(o,{"checked-row-keys":R(O),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>J(O)?O.value=e:null),loading:R(K),data:R(z).data,columns:R(D)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:q((()=>[E(s,{"checked-row-keys":R(O),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>J(O)?O.value=e:null),data:R(z).data,options:F},null,8,["checked-row-keys","data"])])),pageRight:q((()=>[E(d,{page:R(V).p,"onUpdate:page":t[4]||(t[4]=e=>R(V).p=e),"page-size":R(V).rows,"onUpdate:pageSize":t[5]||(t[5]=e=>R(V).rows=e),"item-count":R(z).total,onRefresh:H},null,8,["page","page-size","item-count"])])),_:1}),E(x,{show:R(Y).show,"onUpdate:show":t[6]||(t[6]=e=>R(Y).show=e),title:R(Y).title,data:R(Y).data,width:600,footer:!0,component:te},null,8,["show","title","data"]),E(x,{show:R(ae).show,"onUpdate:show":t[7]||(t[7]=e=>R(ae).show=e),title:R(ae).title,data:R(ae).data,width:400,"min-height":200,component:R(l)},null,8,["show","title","data","component"]),E(x,{show:R(ne).show,"onUpdate:show":t[8]||(t[8]=e=>R(ne).show=e),title:R(ne).title,data:R(ne).data,width:400,footer:!0,component:R(g)},null,8,["show","title","data","component"]),E(x,{show:R(ee).show,"onUpdate:show":t[9]||(t[9]=e=>R(ee).show=e),title:R(ee).title,data:R(ee).data,width:800,"min-height":550,footer:!1,component:R(a)},null,8,["show","title","data","component"])])),_:1})}}}),ne=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));e("i",ne)}}}));
