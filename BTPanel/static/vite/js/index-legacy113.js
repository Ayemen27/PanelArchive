System.register(["./page_layout-legacy.js?v=1758532619827","./index-legacy.js?v=1758532619827","./index-legacy105.js?v=1758532619827","./utils-legacy.js?v=1758532619827","./public-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827","./soft-legacy.js?v=1758532619827"],(function(e,t){"use strict";var a,s,n,o,i,c,l,r,p,u,_,g,f,d,k,m,h,y,b,w,x,v,j,C,B,I;return{setters:[e=>{a=e.a,s=e.c,n=e.n,o=e._},e=>{i=e._},e=>{c=e._},e=>{l=e.J,r=e.K},e=>{p=e.e,u=e.a},e=>{_=e.k,g=e.P,f=e.e,d=e.o,k=e.b,m=e.R,h=e.S,y=e.an,b=e.X,w=e.a3,x=e.V,v=e.a2,j=e.U,C=e._},e=>{B=e.bH,I=e.d9},null,null,null],execute:function(){const R={class:"p-16px"},z={class:"h-250px"};e("default",_({__name:"index",props:{onRefresh:{},type:{default:"backup"}},emits:["close"],setup(e,{emit:_}){const{t:U}=g(),H=C((()=>a((()=>t.import("./backup-success-legacy.js?v=1758532619827")),void 0))),S=C((()=>a((()=>t.import("./backup-error-legacy.js?v=1758532619827")),void 0))),D=_,J=e,K=p("backup"===J.type?U("Config.Backup.index_80"):U("Config.Backup.index_81")),N=p("backup"===J.type?U("Config.Backup.index_82"):U("Config.Backup.index_83")),P=f({}),V=()=>{const e="backup"===J.type?U("Config.Backup.index_78"):U("Config.Backup.index_79");u({title:U("Config.Backup.index_14"),content:e,onConfirm:async()=>{q&&clearInterval(q),await l({timestamp:void 0}),X()}})},X=()=>{q&&clearInterval(q),D("close"),J.onRefresh()};let q=null;const A=async()=>{const{message:e}=await r({type:J.type});if(s(e)){if(P.task_msg=e.task_msg,P.exec_log=e.exec_log,P.progress=e.progress,100!==e.progress&&2!==e.task_status&&3!==e.task_status||q&&clearInterval(q),2===e.task_status||3===e.task_status)return J.onRefresh(),K.data.type=J.type,K.data.backup_file_info={name:e.backup_file_info.backup_name,files_size:n(Number(e.backup_file_info.backup_file_size)),end_time:e.backup_file_info.done_time,time_count:"backup"===J.type?e.backup_file_info.total_time:e.backup_file_info.restore_total_time,backup_file_sha256:e.backup_file_info.backup_file_sha256},K.show=!0,void(q&&clearInterval(q));3===e.task_status&&(J.onRefresh(),N.data.errData=e.err_info,N.show=!0,q&&clearInterval(q))}};return d((()=>{A(),q=window.setInterval((()=>{A()}),2e3)})),k((()=>{q&&clearInterval(q)})),(e,t)=>{const a=B,s=o,n=I,l=c,r=i;return m(),h("div",R,[y("",!0),b(n,{class:"flex-nowrap! items-center my-10px",size:5},{default:w((()=>[b(a,{height:24,percentage:x(P).progress,"indicator-placement":"inside",processing:x(P).progress<100,status:"success"},null,8,["percentage","processing"]),x(P).progress<100?(m(),v(s,{key:0,name:"base-error",class:"text-error",size:20,onClick:V})):y("",!0)])),_:1}),j("div",z,[b(l,{log:x(P).exec_log},null,8,["log"])]),b(r,{show:x(K).show,"onUpdate:show":t[0]||(t[0]=e=>x(K).show=e),title:x(K).title,data:x(K).data,width:"600","min-height":350,component:x(H),onClose:X},null,8,["show","title","data","component"]),b(r,{show:x(N).show,"onUpdate:show":t[1]||(t[1]=e=>x(N).show=e),title:x(N).title,data:x(N).data,width:"600","min-height":350,component:x(S),onClose:X},null,8,["show","title","data","component"])])}}}))}}}));
