import{d as e,_ as t,u as s}from"./public.js?v=1758532619827";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang.js?v=1758532619827";import{w as a,c as r,m as n}from"./page_layout.js?v=1758532619827";import{au as o,aM as p}from"./site.js?v=1758532619827";import{u as _}from"./index84.js?v=1758532619827";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1758532619827";import{k as l,P as m,e as d,r as v,R as c,S as j,X as x,a3 as f,U as g,V as P,a4 as h}from"./vue.js?v=1758532619827";import{dV as y,dP as S}from"./naive.js?v=1758532619827";import"./common.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";import"./index133.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1758532619827";import"./index131.js?v=1758532619827";import"./php.js?v=1758532619827";import"./soft.js?v=1758532619827";import"./soft2.js?v=1758532619827";import"./useOperate.js?v=1758532619827";import"./useModal2.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1758532619827";import"./index.js?v=1758532619827";const w={class:"p-20px"},H={class:"w-200px"},b=l({__name:"php",props:{data:{}},setup(l,{expose:b}){const{t:E}=m(),M=l,{rows:$}=M.data,R=_(),k=d({version:null}),q={version:{trigger:"change",validator:()=>null!==k.version||new Error(E("Site.PHP.add_site_27"))}},O=v([]),{loading:U,setLoading:V}=e();(async()=>{try{V(!0);const{message:e}=await o();a(e)&&e.length>0?(O.value=e.map((e=>({label:e.name,value:e.version}))),k.version=e[0].version):(k.version=null,O.value=[])}finally{V(!1)}})();return b({onConfirm:async({hide:e})=>{const{message:t}=await p((()=>{const{version:e}=k;if(null===e)throw n.error(E("Site.PHP.index_67")),new Error(E("Site.PHP.index_67"));return{version:e,sites_id:$.map((e=>e.id)).join(",")}})());R.setRefresh(!0),r(t)&&(e=>{const{success:t,error:i}=e,a=[];t.forEach((e=>{const t=$.find((t=>t.name===e));t&&a.push({name:t.name,batchStatus:"success",reqMsg:E("Site.PHP.index_64")})})),Object.entries(i).forEach((([e,t])=>{const s=$.find((t=>t.name===e));s&&a.push({name:s.name,batchStatus:"error",reqMsg:t})})),s({title:E("Site.PHP.index_65"),width:440,footer:!0,component:u,data:{title:E("Site.PHP.index_66"),data:a,status:"done",columns:[{key:"name",title:E("Site.TableRow.index_1"),ellipsis:{tooltip:{width:"trigger"}}}]}})})(t),e()}}),(e,s)=>{const a=y,r=S,n=i,o=t;return c(),j("div",w,[x(n,{model:P(k),rules:q},{default:f((()=>[x(r,{label:e.$t("Site.PHP.add_site_21"),path:"version"},{default:f((()=>[g("div",H,[x(a,{value:P(k).version,"onUpdate:value":s[0]||(s[0]=e=>P(k).version=e),loading:P(U),options:P(O)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"]),x(o,{class:"mt-8px"},{default:f((()=>[g("li",null,h(e.$t("Site.PHP.index_61")),1),g("li",null,h(e.$t("Site.PHP.index_62")),1),g("li",null,h(e.$t("Site.PHP.index_63")),1)])),_:1})])}}});export{b as default};
