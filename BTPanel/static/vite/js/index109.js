import{q as a,_ as e}from"./public.js?v=1758532619827";import{n as s,a4 as t,_ as l,R as n}from"./page_layout.js?v=1758532619827";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang.js?v=1758532619827";import{u as i,B as p,C as r,D as u,E as m,F as c}from"./utils.js?v=1758532619827";import _ from"./backup-info.js?v=1758532619827";import{k as d,P as f,a0 as g,r as x,e as k,R as b,a2 as v,a3 as C,X as y,V as w,j as B,a4 as j,an as h,U as D}from"./vue.js?v=1758532619827";import{dk as R,au as U,dP as P,dV as $,_ as q}from"./naive.js?v=1758532619827";import"./common.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";import"./soft.js?v=1758532619827";const F=d({__name:"index",props:{onRefresh:{type:Function}},setup(d,{expose:q}){const{t:F}=f(),V=i(),{loading:z,backupData:E}=g(V),H=d,X=x(null),A=k({back_name:p(Date.now()),storage_type:"local",timestamp:null,auto_exit:!1}),G={back_name:{required:!0,trigger:"input",message:F("Config.Backup.index_49")}},I=()=>{V.getData()};return V.getData(),q({onConfirm:async()=>{var e;return await(null==(e=X.value)?void 0:e.validate()),new Promise((e=>{a({title:F("Config.Backup.index_57"),content:()=>y(R,{type:"warning"},{default:()=>[y("span",{class:"color-warning font-bold"},[B(" "),F("Config.Backup.index_58"),B(" ")])]}),onConfirm:async()=>{await c({backup_name:A.back_name,auto_exit:A.auto_exit?1:0,storage_type:A.storage_type,timestamp:A.timestamp?A.timestamp/1e3:0}),H.onRefresh(A.timestamp),e(!0)},onCancel:()=>{e(!1)}})}))}}),(a,i)=>{const p=U,c=P,d=$,f=t,g=o,x=l,k=e,B=n;return b(),v(B,{show:w(z),class:"p-16px",description:w(F)("Config.Backup.index_56")},{default:C((()=>[y(g,{ref_key:"formRef",ref:X,model:w(A),rules:G},{default:C((()=>[y(c,{label:a.$t("Config.Backup.index_3"),path:"back_name"},{default:C((()=>[y(p,{class:"w-600px!",value:w(A).back_name,"onUpdate:value":i[0]||(i[0]=a=>w(A).back_name=a),placeholder:w(F)("Config.Backup.index_49"),clearable:""},null,8,["value","placeholder"])])),_:1},8,["label"]),y(c,{label:a.$t("Config.Backup.index_50"),path:"type"},{default:C((()=>[y(d,{class:"w-600px",value:w(A).storage_type,"onUpdate:value":i[1]||(i[1]=a=>w(A).storage_type=a),options:w(r),"render-label":w(u)},null,8,["value","options","render-label"])])),_:1},8,["label"]),y(c,{label:a.$t("Config.Backup.index_51")},{default:C((()=>[y(f,{class:"w-600px",value:w(A).timestamp,"onUpdate:value":i[2]||(i[2]=a=>w(A).timestamp=a),type:"datetime",clearable:"","is-date-disabled":w(m),placeholder:w(F)("Config.Backup.index_52")},null,8,["value","is-date-disabled","placeholder"])])),_:1},8,["label"]),y(c,{label:"Backup Data"},{default:C((()=>[y(_,{class:"w-600px"})])),_:1}),h("",!0)])),_:1},8,["model"]),y(k,{class:"mt-16px"},{default:C((()=>[D("li",null,[y(x,{name:"base-warning",class:"text-warning mr-4px",size:"16"}),D("span",null,j(w(F)("Config.Backup.index_54"))+" "+j(w(s)(w(E).disk_use))+" "+j(w(F)("Config.Backup.index_55"))+" "+j(w(s)(w(E).disk_free)),1),y(x,{name:"base-refresh",class:"text-primary ml-4px",onClick:I})])])),_:1})])),_:1},8,["show","description"])}}});export{F as default};
