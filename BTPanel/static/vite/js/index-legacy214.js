System.register(["./index-legacy245.js?v=1758532619827","./public-legacy.js?v=1758532619827","./page_layout-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827"],(function(e,a){"use strict";var l,t,s,n,i,o,r,c,u,d,m,p,f,h,v,_,x,y,S,w,g,b,k,L,C,j,$,z,R,A,N,U,D,T,H,I,J,O;return{setters:[e=>{l=e._},e=>{t=e.ax,s=e.a,n=e.ad,i=e._,o=e.ay,r=e.az},e=>{c=e.c,u=e._,d=e.m,m=e.fc,p=e.R,f=e.p,h=e.q},e=>{v=e.r,_=e.k,x=e.P,y=e.af,S=e.e,w=e.c,g=e.o,b=e.a5,k=e.R,L=e.S,C=e.U,j=e.X,$=e.a3,z=e.a4,R=e.V,A=e.j,N=e.aj,U=e.an,D=e.a2},e=>{T=e.d9,H=e.ek,I=e.dR,J=e.aC,O=e.dk},null,null],execute:function(){var a=document.createElement("style");a.textContent="[data-v-1cd65fd9] .n-tabs-tab__label{height:24px}[data-v-1cd65fd9] .n-tabs-tab--active{color:#20a53a!important}.icon-box[data-v-5d5ba104]{rotate:-90deg;transform-origin:center;display:flex;justify-content:center;align-items:center;color:#666;background-color:#def7e8;border-radius:50%;width:50px;height:50px;margin:10px auto}:deep(.n-tabs-tab__label){height:24px}:deep(.n-tabs-tab--active){color:#20a53a!important}\n",document.head.appendChild(a);const P=v(!1),q=v({}),E=async e=>{try{P.value=!0;const{message:a}=await t({hash:e});c(a)&&(q.value=a)}finally{P.value=!1}},M={class:"text-#20a53a"},V={class:"mt-16px"},X=f(_({__name:"index",props:{row:{},onRefresh:{}},setup(e){const{t:a}=x(),l=e,{row:t}=y(l),o=v("all"),r=S({domains:t.value.user_for.sites||[]}),f=v([]),h=v([]),_=w((()=>"matched"===o.value?h.value:f.value)),U=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",l=e.match?"text-#20a53a":"text-error";return j(T,{size:5,class:"items-center flex-nowrap!"},{default:()=>[j(u,{name:a,class:l,size:18},null),j("div",{class:"truncate w-full"},[e.label])]})},D=()=>{s({title:"Deploy SSL Certificate",content:r.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment",onConfirm:async()=>{const{message:e}=await n({hash:t.value.hash,domains:JSON.stringify(r.domains)});c(e)&&(e.faild?d.error(`${a("SSL.index_31")}（${e.faildList.map((e=>e.siteName)).join(",")}）`):d.success(a("SSL.index_32")),l.onRefresh())}})},O=e=>e.map((e=>({label:e.name,value:e.name,match:e.match})));return g((()=>{(async()=>{await E(t.value.hash);const e=q.value.sites.filter((e=>e.match)),a=q.value.sites.filter((e=>!e.match));f.value=O([...e,...a]),h.value=O(e),r.domains=r.domains.filter((e=>f.value.some((a=>a.value===e))))})()})),(e,a)=>{const l=b("i18n-t"),s=H,n=I,c=m,d=p,f=J,h=u,v=i;return k(),L("div",null,[C("div",null,[j(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:$((()=>[C("span",M,z(R(t)?.verify_domains?.join(",")),1)])),_:1}),a[2]||(a[2]=C("span",null," site",-1))]),j(n,{type:"segment",animated:"",value:R(o),"onUpdate:value":a[0]||(a[0]=e=>N(o)?o.value=e:null),class:"my-10px"},{default:$((()=>[j(s,{name:"all"},{default:$((()=>[A(z(e.$t("SSL.index_28")),1)])),_:1}),j(s,{name:"matched"},{default:$((()=>[A(z(e.$t("SSL.index_27")),1)])),_:1})])),_:1},8,["value"]),j(d,{show:R(P)},{default:$((()=>[j(c,{"render-source-label":U,"render-target-label":U,value:R(r).domains,"onUpdate:value":a[1]||(a[1]=e=>R(r).domains=e),options:R(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])])),_:1},8,["show"]),C("div",V,[j(f,{type:"primary",onClick:D},{default:$((()=>[A(z(e.$t("SSL.index_29")),1)])),_:1})]),j(v,{class:"mt-20px"},{default:$((()=>[C("li",null,[j(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=C("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),C("li",null,[j(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=C("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])])),_:1})])}}}),[["__scopeId","data-v-1cd65fd9"]]),B={key:0,class:"text-#20a53a"},F={class:"icon-box"},G=f(_({__name:"index",props:{row:{}},setup(e){const a=e,{row:l}=y(a),t=S({domains:"",issuer:"",end_date:"",is_match:1}),n=e=>{s({title:"Deploy SSL Certificate",content:0===e?"Are you sure to deploy this SSL certificate to the panel?":"Are you sure you want to restore it?",onConfirm:async()=>{await o({hash:l.value.hash,recover:e}),window.location.href=window.location.href.split("?")[0]+"?_t="+Date.now()}})};return g((()=>{(async()=>{await E(l.value.hash),t.domains=q.value.panel[0].info.subject,t.issuer=q.value.panel[0].info.issuer,t.end_date=q.value.panel[0].info.notAfter,t.is_match=q.value.panel[0].match})()})),(e,a)=>{const s=b("i18n-t"),o=u,r=h,c=T,d=O,m=p,f=J,v=i;return k(),L("div",null,[C("div",null,[j(s,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:$((()=>[R(l)?(k(),L("span",B,z(R(l).verify_domains.join(",")),1)):U("",!0)])),_:1}),a[2]||(a[2]=C("span",null," panel",-1))]),j(m,{show:R(P),class:"my-16px"},{default:$((()=>[j(d,{type:"info","show-icon":!1},{default:$((()=>[j(c,{class:"py-2px text-12px items-center flex-nowrap!"},{default:$((()=>[a[3]||(a[3]=C("b",{class:"text-nowrap!"},"Current SSL",-1)),j(o,{name:"ssl-lock",class:"text-#20a53a",size:18}),j(r,{vertical:""}),C("div",null,[C("div",null,[A(z(e.$t("Config.Safe.index_37")),1),C("b",null,z(R(t).domains),1)]),C("div",null,[A(z(e.$t("Config.Safe.index_38")),1),C("b",null,z(R(t).issuer),1)]),C("div",null,[A(z(e.$t("Config.Safe.index_39")),1),C("b",null,z(R(t).end_date),1)])])])),_:1,__:[3]})])),_:1}),C("div",F,[j(o,{name:"file-back",size:40,color:"#0a8c46"})]),j(d,{type:R(t).is_match?"success":"error","show-icon":!1},{default:$((()=>[j(c,{class:"py-2px text-12px items-center flex-nowrap! text-primary"},{default:$((()=>[a[4]||(a[4]=C("b",{class:"text-nowrap!"},"New SSL",-1)),R(t).is_match?(k(),D(o,{key:0,name:"ssl-lock",class:"text-#20a53a",size:18})):(k(),D(o,{key:1,name:"ssl-unlock",class:"text-error",size:18})),j(r,{vertical:""}),C("div",null,[C("div",null,[A(z(e.$t("Config.Safe.index_37")),1),C("b",null,z(R(l).verify_domains.join(",")),1)]),C("div",null,[A(z(e.$t("Config.Safe.index_38")),1),C("b",null,z(R(l).provider+" "+R(l).issuer),1)]),C("div",null,[A(z(e.$t("Config.Safe.index_39")),1),C("b",null,z(R(l).end_date),1)])])])),_:1,__:[4]})])),_:1},8,["type"])])),_:1},8,["show"]),C("div",null,[j(f,{type:"primary",onClick:a[0]||(a[0]=e=>n(0))},{default:$((()=>[A(z(e.$t("SSL.index_29")),1)])),_:1})]),j(r,{class:"my-16px!"}),j(c,{class:"items-center"},{default:$((()=>[a[6]||(a[6]=C("span",{class:"text-desc"},"Restore to panel self-signed certificate?",-1)),j(f,{type:"primary",ghost:"",onClick:a[1]||(a[1]=e=>n(1))},{default:$((()=>a[5]||(a[5]=[A("Restore")]))),_:1,__:[5]})])),_:1,__:[6]}),j(v,{class:"mt-20px"},{default:$((()=>[C("li",null,[j(o,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[7]||(a[7]=C("span",{class:"ml-8px"},"This SSL is applicable to the this panel",-1))]),C("li",null,[j(o,{name:"ssl-unlock",class:"text-error",size:18}),a[8]||(a[8]=C("span",{class:"ml-8px"},'After using this SSL, accessing the panel will show a "Not Secure" warning',-1))])])),_:1})])}}}),[["__scopeId","data-v-5d5ba104"]]),K={class:"text-#20a53a"},Q={class:"mt-16px"},W=_({__name:"index",props:{row:{},onRefresh:{}},setup(e){const{t:a}=x(),l=e,{row:t}=y(l),n=v("all"),o=S({domains:t.value.user_for.mails}),f=v([]),h=v([]),_=w((()=>"matched"===n.value?h.value:f.value)),g=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",l=e.match?"text-#20a53a":"text-error";return j(T,{size:5,class:"items-center flex-nowrap!"},{default:()=>[j(u,{name:a,class:l,size:18},null),j("div",{class:"truncate w-full"},[e.label])]})},U=()=>{s({title:"Deploy SSL Certificate",content:o.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment",onConfirm:async()=>{try{const{message:e}=await r({hash:t.value.hash,domains:JSON.stringify(o.domains)});c(e)&&(e.faild?d.error(`${a("SSL.index_31")}（${e.faildList.map((e=>e.siteName)).join(",")}）`):d.success(a("SSL.index_32")))}finally{l.onRefresh()}}})},D=e=>e.map((e=>({label:e.domain,value:e.domain,match:e.match})));return(async()=>{await E(t.value.hash);const e=q.value.mails.filter((e=>e.match)),a=q.value.mails.filter((e=>!e.match));f.value=D([...e,...a]),h.value=D(e)})(),(e,a)=>{const l=b("i18n-t"),s=H,r=I,c=m,d=p,f=J,h=u,v=i;return k(),L("div",null,[C("div",null,[j(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:$((()=>[C("span",K,z(R(t)?.verify_domains?.join(",")),1)])),_:1}),a[2]||(a[2]=C("span",null," mail",-1))]),j(r,{type:"segment",animated:"",value:R(n),"onUpdate:value":a[0]||(a[0]=e=>N(n)?n.value=e:null),class:"my-10px"},{default:$((()=>[j(s,{name:"all"},{default:$((()=>[A(z(e.$t("SSL.index_28")),1)])),_:1}),j(s,{name:"matched"},{default:$((()=>[A(z(e.$t("SSL.index_27")),1)])),_:1})])),_:1},8,["value"]),j(d,{show:R(P)},{default:$((()=>[j(c,{"render-source-label":g,"render-target-label":g,value:R(o).domains,"onUpdate:value":a[1]||(a[1]=e=>R(o).domains=e),options:R(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])])),_:1},8,["show"]),C("div",Q,[j(f,{type:"primary",onClick:U},{default:$((()=>[A(z(e.$t("SSL.index_29")),1)])),_:1})]),j(v,{class:"mt-20px"},{default:$((()=>[C("li",null,[j(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=C("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),C("li",null,[j(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=C("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])])),_:1})])}}});e("default",_({__name:"index",props:{data:{}},setup(e){const{t:a}=x(),t=e,{row:s,onRefresh:n,menu:i}=t.data,o=v("site"),r=[{key:"site",label:a("Home.index_68"),component:X,data:{row:s,onRefresh:n}},{key:"mail",label:"Mail",component:W,data:{row:s,onRefresh:n}},{key:"panel",label:"Panel",component:G,data:{row:s}}];return o.value=i||"site",(e,a)=>{const t=l;return k(),D(t,{value:R(o),"onUpdate:value":a[0]||(a[0]=e=>N(o)?o.value=e:null),data:r},null,8,["value"])}}}))}}}));
