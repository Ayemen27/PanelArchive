const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index159.js?v=1758532619827","js/index.vue_vue_type_script_setup_true_lang.js?v=1758532619827","js/vue.js?v=1758532619827","js/__commonjsHelpers__.js?v=1758532619827","js/naive.js?v=1758532619827","js/common.js?v=1758532619827","js/page_layout.js?v=1758532619827","js/public.js?v=1758532619827","css/public.css?v=1758532619827","css/page_layout.css?v=1758532619827","js/index.vue_vue_type_script_setup_true_lang2.js?v=1758532619827","js/index98.js?v=1758532619827","css/index13.css?v=1758532619827","js/index132.js?v=1758532619827","js/index133.js?v=1758532619827","css/index23.css?v=1758532619827","js/soft.js?v=1758532619827"])))=>i.map(i=>d[i]);
import{i as a,o as e,bh as t,bk as s,bl as i,bo as n,c as o,w as l,x as d,bn as p,a as c,q as r}from"./page_layout.js?v=1758532619827";import{_}from"./index.js?v=1758532619827";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1758532619827";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1758532619827";import{_ as b}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1758532619827";import{t as h,e as y,c as k,w as x,f,a as g,d as w,x as v,h as D}from"./public.js?v=1758532619827";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1758532619827";import{a as C,b as R,c as U,u as $,d as B,_ as P,e as q,f as L,g as S,h as W}from"./index132.js?v=1758532619827";import{g as z}from"./hooks.js?v=1758532619827";import{X as I,j as O,u as A,k as E,P as K,e as V,w as H,R as N,a2 as T,a3 as X,V as F,N as G,U as J,a4 as M,an as Q,aj as Y,_ as Z}from"./vue.js?v=1758532619827";import{aC as aa,dS as ea}from"./naive.js?v=1758532619827";import"./common.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1758532619827";import"./index133.js?v=1758532619827";import"./soft.js?v=1758532619827";const{t:ta}=a.global;const sa={class:"p-16px"},ia=E({__name:"index",setup(a){const W=Z((()=>c((()=>import("./index159.js?v=1758532619827")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])))),{t:E}=K(),ia=t(),na=y(),oa=()=>{na.show=!0},la=()=>{L()},da=()=>{S()},pa=async()=>{await s(ia.type,{ids:[]}),ya()},ca=V({p:1,limit:10,sid:-1,search:""}),{keys:ra,table:_a,columns:ua}=k([{type:"selection",width:40},{key:"name",title:E("Database.index_12"),width:"12%",minWidth:120},{key:"username",title:E("Database.index_13"),width:"12%",minWidth:120},{key:"password",title:ta("Database.index_14"),minWidth:150,render:a=>I(h,{value:a.password},null)},{key:"backup_count",title:ta("Database.index_16"),width:"12%",render:a=>{let t;return I("div",{class:"flex items-center"},[I(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{C(a)}},{default:()=>[a.backup_count>0?"".concat(ta("Database.mongo.index_7"),"(").concat(a.backup_count,")"):ta("Database.index_18")]}),I("span",{class:"mx-4px"},[O("|")]),I(e,{onClick:()=>{R(a,"pgsql")}},(s=t=ta("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!A(s)?t:{default:()=>[t]}))]);var s}},{key:"sid",title:ta("Database.mongo.index_8"),width:"12%",minWidth:120,render:a=>z(a)},x({onBlur:async(a,e)=>{await p({id:e.id,ps:a})}}),f({width:220,options:a=>[{label:"Adminer",show:0===a.db_type&&!1,onClick:()=>{}},{label:"Password",onClick:()=>{$(a)}},{label:E("Public.Btn.Del"),onClick:()=>{U([a])}}]})]),ma=[{key:"sync",label:E("Database.index_24"),onBatch:a=>{g({title:E("Database.index_25"),content:E("Database.index_26"),onConfirm:async({hide:e})=>{await s(ia.type,{ids:a.map((a=>a.id))}),e()}})}},{key:"backup",type:"confirm",label:E("Database.index_27"),confirm:{title:E("Database.index_28"),desc:E("Database.index_29"),api:a=>i(ia.type,{id:a.id},!1),done:()=>{ya()},columns:[{key:"name",title:E("Database.index_12")}]}},{key:"delete",label:E("Database.index_30"),onBatch:a=>{U(a)}}],{loading:ba,setLoading:ha}=w(),ya=async()=>{try{ha(!0);const{message:a}=await n(ia.type,(()=>{const a={...G(ca)};return-1===a.sid&&delete a.sid,a})());o(a)?(_a.data=l(a.data)?a.data:[],_a.total=d(a.page)):(_a.data=[],_a.total=0)}finally{ra.value=[],ha(!1)}};H((()=>ia.isRefresh),(a=>{a&&(ia.setRefresh(!1),ia.delRemoteId===ca.sid&&(ca.sid=-1),ya())}));return(async()=>{await ia.getRemote(),ia.install?ya():v()})(),(a,e)=>{const t=aa,s=r,i=j,n=D,o=b,l=m,d=u,p=_,c=ea;return N(),T(F(q),null,{default:X((()=>[I(c,null,{default:X((()=>[J("div",sa,[I(d,{feedback:!0},{toolsLeft:X((()=>[I(t,{type:"primary",onClick:oa},{default:X((()=>[O(M(a.$t("Database.index_1")),1)])),_:1}),I(t,{onClick:la},{default:X((()=>[O(M(a.$t("Database.index_2")),1)])),_:1}),Q("",!0),I(t,{onClick:da},{default:X((()=>[O(M(a.$t("Database.index_4")),1)])),_:1}),I(s,{class:"mx-0!",vertical:""}),I(t,{onClick:pa},{default:X((()=>[O(M(a.$t("Database.index_5")),1)])),_:1}),I(t,{onClick:F(B)},{default:X((()=>[O(M(a.$t("Database.index_6")),1)])),_:1},8,["onClick"])])),toolsRight:X((()=>[I(F(P),{value:F(ca).sid,"onUpdate:value":e[0]||(e[0]=a=>F(ca).sid=a),"store-key":"database-pgsql-page",onChange:ya},null,8,["value"]),I(i,{value:F(ca).search,"onUpdate:value":e[1]||(e[1]=a=>F(ca).search=a),placeholder:"Database search",onSearch:ya},null,8,["value"])])),table:X((()=>[I(n,{"checked-row-keys":F(ra),"onUpdate:checkedRowKeys":e[2]||(e[2]=a=>Y(ra)?ra.value=a:null),loading:F(ba),data:F(_a).data,columns:F(ua)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:X((()=>[I(o,{"checked-row-keys":F(ra),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>Y(ra)?ra.value=a:null),data:F(_a).data,options:ma},null,8,["checked-row-keys","data"])])),pageRight:X((()=>[I(l,{page:F(ca).p,"onUpdate:page":e[4]||(e[4]=a=>F(ca).p=a),"page-size":F(ca).limit,"onUpdate:pageSize":e[5]||(e[5]=a=>F(ca).limit=a),"store-key":"database-pgsql-page","item-count":F(_a).total,onRefresh:ya},null,8,["page","page-size","item-count"])])),_:1}),I(p,{show:F(na).show,"onUpdate:show":e[6]||(e[6]=a=>F(na).show=a),title:a.$t("Database.mongo.index_4"),width:540,"min-height":280,footer:!0,component:F(W)},null,8,["show","title","component"])])])),_:1})])),_:1})}}});export{ia as default};
