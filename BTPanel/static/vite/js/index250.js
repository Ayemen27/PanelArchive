import{_ as e}from"./index108.js?v=1758532619827";import{_ as a}from"./index133.js?v=1758532619827";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang.js?v=1758532619827";import{w as t,g as i,f as r,c as n,o,_ as s,m as d}from"./page_layout.js?v=1758532619827";import{k as u,a0 as p,ae as _,r as m,R as c,a2 as v,V as b,n as f,w as h,c as x,P as g,e as w,a3 as k,U as y,a4 as S,j,an as P,S as $,X as L,l as E,aj as U,v as R}from"./vue.js?v=1758532619827";import{u as W,g as A,a as q,c as C,b as V,d as z}from"./index87.js?v=1758532619827";import{d as B,m as D,_ as H}from"./public.js?v=1758532619827";import{D as F}from"./domain-input.js?v=1758532619827";import{au as M}from"./site.js?v=1758532619827";import{dV as I,dU as N,dT as T,dP as J,au as O,d8 as Q,d9 as X,_ as Y,dj as Z,dZ as G,aC as K,dY as ee,az as ae}from"./naive.js?v=1758532619827";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang17.js?v=1758532619827";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1758532619827";import{o as ie}from"./upload.js?v=1758532619827";import{_ as re}from"./task-view.vue_vue_type_script_setup_true_lang.js?v=1758532619827";import"./common.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";import"./index.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1758532619827";import"./site4.js?v=1758532619827";import"./soft.js?v=1758532619827";import"./index245.js?v=1758532619827";import"./index99.js?v=1758532619827";import"./index100.js?v=1758532619827";import"./index101.js?v=1758532619827";import"./file.js?v=1758532619827";import"./theme-monokai.js?v=1758532619827";import"./refersh.js?v=1758532619827";import"./php.js?v=1758532619827";import"./index105.js?v=1758532619827";import"./ssl.js?v=1758532619827";import"./cert.js?v=1758532619827";import"./utils3.js?v=1758532619827";import"./index218.js?v=1758532619827";import"./paypal-js.js?v=1758532619827";import"./ssl-lets-progress.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1758532619827";import"./index98.js?v=1758532619827";const ne=u({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=W(),{phpVersion:l}=p(a),i=_(e,"value"),{loading:r,setLoading:n}=B(),o=m([]),s=e=>{l.value=e};return(async()=>{try{n(!0);const{message:e}=await M(),a=t(e)?e:[];o.value=a.reverse().filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),await f(),a.length>0&&(i.value="00"==a[0].version?"":a[0].version,l.value="00"==a[0].version?"":a[0].version)}finally{n(!1)}})(),(e,a)=>{const l=I;return c(),v(l,{value:i.value,"onUpdate:value":[a[0]||(a[0]=e=>i.value=e),s],loading:b(r),options:b(o)},null,8,["value","loading","options"])}}}),oe=u({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=W();h((()=>a.phpVersion),(e=>{s(e)}));const l=x((()=>a.phpVersion?"Not supported by current PHP":"Please select PHP version")),i=_(e,"value"),{loading:r,setLoading:n}=B(),o=m([]),s=async e=>{try{n(!0),i.value="";const{message:a}=await A({php_version_short:e});t(a)&&(o.value=a.map((e=>({label:e.version,value:e.version}))),await f(),a.length>0&&(i.value=a[0].version))}finally{n(!1)}};return a.phpVersion&&s(a.phpVersion),(e,a)=>{const t=I;return c(),v(t,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),loading:b(r),options:b(o),placeholder:b(l)},null,8,["value","loading","options","placeholder"])}}}),se={key:1},de={class:"w-400px"},ue={class:"w-400px"},pe={class:"w-230px"},_e={class:"w-230px"},me={class:"w-400px"},ce={class:"w-230px mr-16px"},ve={class:"w-400px"},be={class:"w-400px"},fe=u({__name:"index",props:{getList:{type:Function}},setup(e,{expose:t}){const u=e,{t:_}=g(),f=W(),{web:h,mysql:x,php:A}=p(f),C=m(null),V=m(null),z=m([]),B=w({type:0,domain_auto:[""],domain:"",weblog_title:"",language:"en",php_version:null,wp_version:null,user_name:i(6),admin_password:r(16,"wp"),pw_weak:!1,admin_email:"",Login_url:"wp-admin",redirection_url:"404",prefix:"wp_"+i(6)+"_",enable_cache:!1,wps:!1,is_create_default_file:!0}),H={domain:{required:!0,trigger:["blur","input"],validator:()=>0!==B.type||""!==B.domain.trim()||new Error(_("Site.RulesError.index_31"))},domain_auto:{trigger:["blur"],validator:(e,a)=>!(1===B.type&&!a[0])||new Error(_("Site.PHP.add_site_23"))},weblog_title:{required:!0,trigger:["blur","input"],validator:()=>""!==B.weblog_title.trim()||new Error(_("Site.RulesError.index_3"))},language:{trigger:"change",validator:()=>null!==B.language||new Error(_("Site.RulesError.index_4"))},php_version:{trigger:"change",validator:()=>null!==B.php_version||new Error(_("Site.RulesError.index_5"))},wp_version:{trigger:"change",validator:()=>null!==B.php_version||new Error(_("Site.RulesError.index_6"))},user_name:{required:!0,trigger:["blur","input"],validator:()=>""!==B.user_name.trim()||new Error(_("Site.RulesError.index_7"))},admin_password:{required:!0,trigger:["blur","input"],validator:()=>""!==B.admin_password.trim()||new Error(_("Site.RulesError.index_8"))},admin_email:{required:!0,trigger:["blur","input"],validator:()=>""!==B.admin_email.trim()||new Error(_("Site.RulesError.index_9"))},redirection_url:{required:!0,trigger:["blur","input"],validator:()=>""!==B.redirection_url.trim()||new Error(_("Site.RulesError.index_12"))},Login_url:{required:!0,trigger:["blur","input"],validator:()=>""!==B.Login_url.trim()||new Error(_("Site.RulesError.index_11"))},prefix:{required:!0,trigger:["blur","input"],validator:()=>""!==B.prefix.trim()||new Error(_("Site.RulesError.index_10"))}},M=e=>{var a;if(null==(a=C.value)||a.restoreValidation(),!e)return void(B.domain=B.domain_auto[0]);const l=B.domain.trim();l!==B.domain_auto[0]&&(B.domain_auto=l?[l]:[""],B.domain_auto.forEach(((e,a)=>{var l;return null==(l=V.value)?void 0:l.onDomainItemBlur(e,a)})))};return t({onConfirm:async()=>{var e;await new Promise(((e,a)=>{0===z.value.filter((e=>e.support.includes("auto"))).length&&1===B.type?(d.error("This domain does not support automatic resolution, please choose manual resolution"),a(!1)):e(!0)})),await(null==(e=C.value)?void 0:e.validate());const{message:a}=await q((()=>{const{domain:e,php_version:a}=B,l=e.replace(new RegExp(/([-.])/g),"_");if(null===a)throw d.error(_("Site.RulesError.index_5")),new Error(_("Site.RulesError.index_5"));const t=z.value.map((e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]})));return{webname:{domain:e,domainlist:[],count:0},type:"PHP",port:80,type_id:0,ftp:!1,sql:"MySQL",codeing:"utf8",set_ssl:0,force_ssl:0,project_type:"WP",path:f.sitePath+"/"+(0===B.type?e:B.domain_auto[0]),ps:l,version:a,datauser:"sql_"+l,datapassword:i(16),password:B.admin_password,pw_weak:B.pw_weak?"on":"off",email:B.admin_email,weblog_title:B.weblog_title,language:B.language,user_name:B.user_name,prefix:B.prefix,enable_cache:B.enable_cache?1:0,enable_whl:0,whl_page:B.Login_url?B.Login_url:null,whl_redirect_admin:B.redirection_url?B.redirection_url:null,package_version:B.wp_version,wp_parse_list:1===B.type&&t.length?JSON.stringify(t):null,is_create_default_file:B.is_create_default_file}})());n(a)&&u.getList()}}),(e,t)=>{const i=o,r=N,n=T,d=s,u=J,p=O,_=Q,m=X,f=Y,g=Z,w=l,W=a;return c(),v(W,{install:b(x).setup&&b(A).setup},{desc:k((()=>[y("span",null,S(e.$t("WP.index_6")),1),b(A).setup?P("",!0):(c(),v(i,{key:0,class:"ml-4px",onClick:t[0]||(t[0]=e=>b(D)("php-8.0"))},{default:k((()=>[j(S(e.$t("WP.index_7")),1)])),_:1})),b(x).setup?P("",!0):(c(),$("span",se,[t[17]||(t[17]=y("span",{class:"mx-4px"},"|",-1)),L(i,{onClick:t[1]||(t[1]=e=>b(D)("mysql"))},{default:k((()=>[j(S(e.$t("WP.index_8")),1)])),_:1})]))])),default:k((()=>[L(w,{ref_key:"formRef",ref:C,model:b(B),rules:H},{default:k((()=>[L(u,{label:e.$t("SSL.index_1")},{default:k((()=>[L(n,{value:b(B).type,"onUpdate:value":[t[2]||(t[2]=e=>b(B).type=e),M]},{default:k((()=>[L(r,{value:0},{default:k((()=>[j(S(e.$t("SSL.index_2")),1)])),_:1}),L(r,{value:1},{default:k((()=>[j(S(e.$t("SSL.index_3")),1)])),_:1})])),_:1},8,["value"]),L(d,{name:"ssl-stars",size:22})])),_:1},8,["label"]),E(L(u,{label:e.$t("Site.Lable.index_1"),path:"domain_auto"},{default:k((()=>[L(F,{ref_key:"domainInputRef",ref:V,value:b(B).domain_auto,"onUpdate:value":t[3]||(t[3]=e=>b(B).domain_auto=e),"parse-list":b(z),"onUpdate:parseList":t[4]||(t[4]=e=>U(z)?z.value=e:null),is_wp:""},null,8,["value","parse-list"])])),_:1},8,["label"]),[[R,1===b(B).type]]),E(L(u,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:k((()=>[y("div",de,[L(p,{value:b(B).domain,"onUpdate:value":t[5]||(t[5]=e=>b(B).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),[[R,0===b(B).type]]),L(u,{label:e.$t("Site.Lable.index_20"),path:"weblog_title"},{default:k((()=>[y("div",ue,[L(p,{value:b(B).weblog_title,"onUpdate:value":t[6]||(t[6]=e=>b(B).weblog_title=e),placeholder:e.$t("Site.Placeholder.index_13")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(u,{label:e.$t("Site.Lable.index_21"),path:"language"},{default:k((()=>[y("div",pe,[L(le,{value:b(B).language,"onUpdate:value":t[7]||(t[7]=e=>b(B).language=e)},null,8,["value"])])])),_:1},8,["label"]),L(u,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:k((()=>[y("div",_e,[L(ne,{value:b(B).php_version,"onUpdate:value":t[8]||(t[8]=e=>b(B).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),L(u,{label:e.$t("Site.Lable.index_23"),path:"wp_version"},{default:k((()=>[L(m,{class:"items-center",size:8},{default:k((()=>[L(oe,{value:b(B).wp_version,"onUpdate:value":t[9]||(t[9]=e=>b(B).wp_version=e),class:"w-230px"},null,8,["value"]),L(_,{trigger:"hover"},{trigger:k((()=>[L(d,{name:"common-ask",size:"18",color:"#999"})])),default:k((()=>[j(" "+S(e.$t("WP.Add.index_8")),1)])),_:1})])),_:1})])),_:1},8,["label"]),L(u,{label:e.$t("Site.Lable.index_24"),path:"user_name"},{default:k((()=>[y("div",me,[L(p,{value:b(B).user_name,"onUpdate:value":t[10]||(t[10]=e=>b(B).user_name=e),placeholder:e.$t("Site.Placeholder.index_14")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(u,{label:e.$t("Site.Lable.index_27"),path:"admin_password"},{default:k((()=>[y("div",ce,[L(p,{value:b(B).admin_password,"onUpdate:value":t[11]||(t[11]=e=>b(B).admin_password=e),placeholder:e.$t("Site.Placeholder.index_15")},null,8,["value","placeholder"])]),L(f,{checked:b(B).pw_weak,"onUpdate:checked":t[12]||(t[12]=e=>b(B).pw_weak=e)},{default:k((()=>[y("span",null,S(e.$t("WP.Add.index_9")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),L(u,{label:e.$t("Site.Lable.index_28"),path:"admin_email"},{default:k((()=>[y("div",ve,[L(p,{value:b(B).admin_email,"onUpdate:value":t[13]||(t[13]=e=>b(B).admin_email=e),placeholder:e.$t("Site.Placeholder.index_16")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(u,{label:e.$t("Site.Lable.index_29"),path:"prefix"},{default:k((()=>[y("div",be,[L(p,{value:b(B).prefix,"onUpdate:value":t[14]||(t[14]=e=>b(B).prefix=e),placeholder:e.$t("Site.Placeholder.index_17")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(u,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:k((()=>[L(f,{checked:b(B).enable_cache,"onUpdate:checked":t[15]||(t[15]=e=>b(B).enable_cache=e),disabled:"nginx"!==b(h).type},{default:k((()=>[y("span",null,S(e.$t("WP.Add.index_10")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"]),L(u,{label:e.$t("SSL.SiteSSL.index_18")},{default:k((()=>[L(g,{value:b(B).is_create_default_file,"onUpdate:value":t[16]||(t[16]=e=>b(B).is_create_default_file=e)},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["install"])}}}),he={key:1},xe={class:"w-302px ml-12px"},ge={class:"w-302px ml-12px"},we={class:"w-400px"},ke={class:"w-230px"},ye=u({__name:"index",props:{getList:{type:Function}},setup(e,{expose:t}){const{t:i}=g(),r=W(),{web:n,mysql:s,php:d}=p(r),u=e,_=m(null),f=m(null),h=m(null),E=w({method:1,bak_file:"",domain:"",sub_path:"",php_version:null,enable_cache:!1,db_bak_file:""}),R={bak_file:{trigger:["blur","input"],validator:()=>""!==E.bak_file.trim()||new Error(i("WP.Add.import_6"))},domain:{trigger:["blur","input"],validator:()=>""!==E.domain.trim()||new Error(i("Site.RulesError.index_31"))},php_version:{trigger:"change",validator:()=>null!==E.php_version||new Error(i("Site.RulesError.index_5"))},db_bak_file:{trigger:["blur","input"],validator:()=>""!==E.db_bak_file.trim()||new Error(i("WP.Add.import_6"))}},A=x((()=>E.domain?"/".concat(E.domain,"/"):"/")),q=e=>{const a="/www/server/panel/temp";ie({path:a,uploadData:{multiple:!1},onUploadSuccess:l=>{"wp"===e?(E.bak_file="".concat(a,"/").concat(l[0].name),B()):"db"===e&&(E.db_bak_file="".concat(a,"/").concat(l[0].name),F())}})},B=()=>{var e;null==(e=f.value)||e.restoreValidation()},F=()=>{var e;null==(e=h.value)||e.restoreValidation()};return t({onConfirm:async()=>{var e;await(null==(e=_.value)?void 0:e.validate());const a=3===E.method?{db_bak_file:E.db_bak_file,bak_file:E.bak_file,domain:E.domain,sub_path:E.sub_path,php_ver_short:E.php_version||"",enable_cache:E.enable_cache?1:0}:{bak_file:E.bak_file,domain:E.domain,sub_path:E.sub_path,php_ver_short:E.php_version||"",enable_cache:E.enable_cache?1:0};1===E.method?await C(a):2===E.method?await V(a):3===E.method&&await z(a),u.getList()}}),(e,t)=>{const i=o,u=G,p=T,m=J,x=K,g=te,w=O,W=ee,C=ae,V=Y,z=l,M=H,I=a;return c(),v(I,{install:b(s).setup&&b(d).setup},{desc:k((()=>[y("span",null,S(e.$t("WP.index_6")),1),b(d).setup?P("",!0):(c(),v(i,{key:0,class:"ml-4px",onClick:t[0]||(t[0]=e=>b(D)("php-8.0"))},{default:k((()=>[j(S(e.$t("WP.index_7")),1)])),_:1})),b(s).setup?P("",!0):(c(),$("span",he,[t[12]||(t[12]=y("span",{class:"mx-4px"},"|",-1)),L(i,{onClick:t[1]||(t[1]=e=>b(D)("mysql"))},{default:k((()=>[j(S(e.$t("WP.index_8")),1)])),_:1})]))])),default:k((()=>[L(z,{ref_key:"formRef",ref:_,modelValue:b(E),"onUpdate:modelValue":t[11]||(t[11]=e=>U(E)?E.value=e:null),rules:R},{default:k((()=>[L(m,{label:e.$t("WP.Add.import_1")},{default:k((()=>[L(p,{value:b(E).method,"onUpdate:value":t[2]||(t[2]=e=>b(E).method=e)},{default:k((()=>[L(u,{label:e.$t("WP.Add.import_2"),value:1},null,8,["label"]),L(u,{label:e.$t("WP.Add.import_3"),value:2},null,8,["label"]),L(u,{label:"Manual Backup",value:3})])),_:1},8,["value"])])),_:1},8,["label"]),L(m,{ref_key:"bakFileRef",ref:f,label:"WP backup file",path:"bak_file"},{default:k((()=>[L(x,{onClick:t[3]||(t[3]=e=>q("wp"))},{default:k((()=>[j(S(e.$t("Docker.App.Backup.index_3")),1)])),_:1}),y("div",xe,[L(g,{value:b(E).bak_file,"onUpdate:value":t[4]||(t[4]=e=>b(E).bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:B},null,8,["value"])])])),_:1},512),3===b(E).method?(c(),v(m,{key:0,ref_key:"dbBakFileRef",ref:h,label:"DB backup file",path:"db_bak_file"},{default:k((()=>[L(x,{onClick:t[5]||(t[5]=e=>q("db"))},{default:k((()=>[j(S(e.$t("Docker.App.Backup.index_3")),1)])),_:1}),y("div",ge,[L(g,{value:b(E).db_bak_file,"onUpdate:value":t[6]||(t[6]=e=>b(E).db_bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:F},null,8,["value"])])])),_:1},512)):P("",!0),L(m,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:k((()=>[y("div",we,[L(w,{value:b(E).domain,"onUpdate:value":t[7]||(t[7]=e=>b(E).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(m,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:k((()=>[L(C,{class:"w-400px"},{default:k((()=>[L(W,null,{default:k((()=>[j(S(b(r).sitePath)+S(b(A)),1)])),_:1}),L(w,{value:b(E).sub_path,"onUpdate:value":t[8]||(t[8]=e=>b(E).sub_path=e),placeholder:e.$t("WP.Add.import_5")},null,8,["value","placeholder"])])),_:1})])),_:1},8,["label"]),L(m,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:k((()=>[y("div",ke,[L(ne,{value:b(E).php_version,"onUpdate:value":t[9]||(t[9]=e=>b(E).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),L(m,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:k((()=>[L(V,{checked:b(E).enable_cache,"onUpdate:checked":t[10]||(t[10]=e=>b(E).enable_cache=e),disabled:"nginx"!==b(n).type},{default:k((()=>[j(S(e.$t("WP.Add.index_10")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"])])),_:1},8,["modelValue"]),3===b(E).method?(c(),v(M,{key:0},{default:k((()=>t[13]||(t[13]=[y("li",null," Manual backup deployment relies on the wp-config.php file, please ensure that it exists and is configured correctly. ",-1)]))),_:1,__:[13]})):P("",!0)])),_:1},8,["install"])}}}),Se={class:"p-20px h-full"},je=u({__name:"index",props:{done:{type:Function}},setup(a,{expose:l}){const{t:t}=g(),i=a,r=m("single"),n=m(),o=[{key:"single",label:t("WP.Add.index_1"),isLazy:!0,component:fe,data:{getList:i.done}},{key:"import",label:t("WP.Add.index_2"),isLazy:!0,component:ye,data:{getList:i.done}}];return l({onConfirm:async()=>{var e;await(null==(e=n.value)?void 0:e.onConfirm())}}),(a,l)=>{const t=e;return c(),v(re,{title:a.$t("WP.Add.index_7"),params:"backup_deploy"},{default:k((()=>[y("div",Se,[L(t,{ref_key:"tabsRef",ref:n,value:b(r),"onUpdate:value":l[0]||(l[0]=e=>U(r)?r.value=e:null),options:o},null,8,["value"])])])),_:1},8,["title"])}}});export{je as default};
