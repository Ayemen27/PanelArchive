System.register(["./page_layout-legacy.js?v=1758532619827","./index-legacy.js?v=1758532619827","./index-legacy108.js?v=1758532619827","./ssl-legacy.js?v=1758532619827","./cert-legacy.js?v=1758532619827","./index-legacy241.js?v=1758532619827","./public-legacy.js?v=1758532619827","./index-legacy99.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./index-legacy133.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1758532619827","./utils-legacy3.js?v=1758532619827","./index-legacy218.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1758532619827","./ssl-lets-progress-legacy.js?v=1758532619827","./site-legacy.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827","./index-legacy245.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1758532619827","./index-legacy100.js?v=1758532619827","./index-legacy101.js?v=1758532619827","./file-legacy.js?v=1758532619827","./theme-monokai-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1758532619827","./index-legacy98.js?v=1758532619827","./index-legacy261.js?v=1758532619827","./new-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1758532619827","./soft-legacy.js?v=1758532619827","./index-legacy105.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1758532619827","./paypal-js-legacy.js?v=1758532619827"],(function(e,t){"use strict";var a,n,l,s,i,d,o,u,r,c,_,p,S,h,m,y,v,x,f,g,w,b,C,L,k,$,j,P,B,E,R,D,N,U,O,A,z,I,T,M,F,H,J,q,G,X,V,W,K,Q,Y,Z,ee,te,ae,ne,le,se,ie,de,oe,ue,re,ce,_e,pe,Se,he,me,ye,ve,xe,fe,ge,we,be,Ce,Le,ke,$e,je,Pe,Be,Ee,Re,De,Ne,Ue,Oe,Ae,ze,Ie,Te,Me;return{setters:[e=>{a=e.dj,n=e.a,l=e.m,s=e.c,i=e.o,d=e.cr,o=e.R,u=e.p,r=e._,c=e.u,_=e.w,p=e.aT},e=>{S=e._},e=>{h=e._},e=>{m=e.c,y=e.s,v=e.a,x=e.g,f=e.b},e=>{g=e.C},e=>{w=e.u},e=>{b=e.e,C=e.a,L=e.ac,k=e.ad,$=e.a6,j=e._,P=e.c,B=e.f,E=e.a2,R=e.a3,D=e.a4,N=e.n,U=e.h,O=e.d,A=e.ae,z=e.af,I=e.u,T=e.ag,M=e.ah,F=e.ai,H=e.j,J=e.q,q=e.a5},e=>{G=e._},e=>{X=e.e2,V=e.dc,W=e.dj,K=e.dk,Q=e.d9,Y=e.aC,Z=e.d5,ee=e.dU,te=e.dT,ae=e.dP,ne=e._,le=e.eg,se=e.H},e=>{ie=e.k,de=e.P,oe=e.r,ue=e.c,re=e.y,ce=e.R,_e=e.a2,pe=e.a3,Se=e.V,he=e.X,me=e.U,ye=e.a4,ve=e.j,xe=e.S,fe=e.aj,ge=e.an,we=e._,be=e.F,Ce=e.O,Le=e.H,ke=e.a0,$e=e.e,je=e.am,Pe=e.w,Be=e.o,Ee=e.l,Re=e.v,De=e.m,Ne=e.x},e=>{Ue=e._},e=>{Oe=e._},e=>{Ae=e.u},e=>{ze=e.A},e=>{Ie=e._},e=>{Te=e.a},e=>{Me=e.a1},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var Fe=document.createElement("style");Fe.textContent=".n-alert[data-v-28bba990]{--n-font-size: 12px}.cert-info[data-v-28bba990]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-28bba990]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-28bba990]{flex:1;width:0;margin-left:4px}.business-top-tips[data-v-12873ea8]{background:var(--site-config-business-tips)}.n-alert[data-v-99cd0a05]{--n-font-size: 12px}.cert-info[data-v-99cd0a05]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-99cd0a05]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-99cd0a05]{flex:1;width:0;margin-left:4px}\n",document.head.appendChild(Fe);const He={class:"cert-info"},Je={class:"cert-label"},qe={class:"cert-value"},Ge={class:"cert-info"},Xe={class:"cert-label"},Ve={class:"cert-value"},We={class:"cert-info"},Ke={class:"cert-label"},Qe={class:"cert-value"},Ye={class:"cert-info"},Ze={class:"cert-label"},et={class:"cert-value"},tt={key:0,class:"text-primary"},at={key:1,class:"text-error"},nt={class:"cert-info"},lt={class:"cert-label"},st={class:"cert-value"},it={class:"w-48%"},dt={class:"mb-8px"},ot={class:"w-48%"},ut={class:"mb-8px"},rt=ie({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:u,emit:r}){const c=we((()=>n((()=>t.import("./ssl-log-legacy.js?v=1758532619827")),void 0))),_=e,p=r,{t:h}=de(),{data:x}=w(),f=b(h("SSL.index_43")),P=a(),B=oe(-1),E=oe(!1),R=oe(!1),D=oe(""),N=oe("");let U="";const O=oe("");let A="";const z=oe({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),I=ue((()=>B.value===g.LetsEncryptDeploy?h("Site.Cert.index_65"):B.value===g.BusinessDeploy?h("Site.Cert.index_64"):B.value===g.TestDeploy?h("Site.Cert.index_38"):h("Site.Cert.index_37"))),T=ue((()=>!!O.value)),M=ue((()=>_.isRenew||B.value===g.LetsEncryptDeploy)),F=ue((()=>!1)),H=ue((()=>E.value)),J=async e=>{e?(await y({siteName:x.name}),p("refresh")):C({title:h("Site.Cert.index_12"),content:h("Site.Cert.index_13"),onConfirm:async()=>{await m({siteName:x.name}),p("refresh")},onPublicClose:()=>{R.value=!0}})},q=()=>{""!==N.value.trim()&&""!==O.value.trim()?N.value!==U&&U||O.value!==A&&A?C({title:h("Site.Cert.index_10"),content:h("Site.Cert.index_11"),onConfirm:async()=>{await Z()}}):Z():l.error(h("Site.Cert.index_9"))},Z=async()=>{const{message:e}=await L({key:N.value,cert:O.value});s(e)&&e.hash&&(await k({hash:e.hash,domains:JSON.stringify([x.name]),append:1}),l.success(h("SSL.index_32"))),ae()},ee=async()=>{const{message:e}=await $({hash:_.info?.hash||""});s(e)&&(f.data.path=e.result,f.show=!0)},te=async()=>{await v({updateOf:1,siteName:x.name}),ae()},ae=()=>{p("refresh"),P.setRefresh(!0)};return re((()=>{const{info:e}=_;e&&(B.value=e.type,E.value=e.status,R.value=e.httpTohttps,N.value=e.key||"",U=e.key||"",O.value=e.csr||"",A=e.csr||"",z.value=e.cert_data,D.value=e.index)})),u({init:p("refresh")}),(e,t)=>{const a=i,n=X,l=V,s=W,u=d,r=K,_=G,p=Q,h=Y,m=j,y=S,v=o;return ce(),_e(v,{show:e.loading},{default:pe((()=>[Se(T)?(ce(),_e(r,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:pe((()=>[he(u,{"x-gap":12,cols:"15"},{default:pe((()=>[he(n,{span:"8"},{default:pe((()=>[me("div",He,[me("div",Je,ye(e.$t("Site.Cert.index_44"))+ye(e.$t("Public.Punctuation.Colon")),1),me("div",qe,[he(a,null,{default:pe((()=>[ve(ye(Se(I)),1)])),_:1})])])])),_:1}),he(n,{span:"7"},{default:pe((()=>[me("div",Ge,[me("div",Xe,ye(e.$t("Site.Cert.index_45"))+ye(e.$t("Public.Punctuation.Colon")),1),me("div",Ve,[he(l,null,{default:pe((()=>[ve(ye(Se(z).issuer||"other"),1)])),_:1})])])])),_:1}),he(n,{span:"8"},{default:pe((()=>[me("div",We,[me("div",Ke,ye(e.$t("Site.Cert.index_46"))+ye(e.$t("Public.Punctuation.Colon")),1),me("div",Qe,[he(l,null,{default:pe((()=>[ve(ye(Se(z).dns.join(e.$t("Public.Punctuation.Comma"))),1)])),_:1})])])])),_:1}),he(n,{span:"7"},{default:pe((()=>[me("div",Ye,[me("div",Ze,ye(e.$t("Site.Cert.index_47"))+ye(e.$t("Public.Punctuation.Colon")),1),me("div",et,[Se(z).endtime>0?(ce(),xe("span",tt,ye(e.$t("Site.Cert.index_48",{date:Se(z).notAfter,days:Se(z).endtime})),1)):(ce(),xe("span",at,ye(e.$t("Site.Cert.index_47")),1))])])])),_:1}),he(n,{span:"8"},{default:pe((()=>[me("div",nt,[me("div",lt,ye(e.$t("Site.Cert.index_49"))+ye(e.$t("Public.Punctuation.Colon")),1),me("div",st,[he(s,{value:Se(R),"onUpdate:value":[t[0]||(t[0]=e=>fe(R)?R.value=e:null),J],size:"small"},null,8,["value"])])])])),_:1})])),_:1})])),_:1})):ge("",!0),he(p,{class:"mb-16px",size:10,justify:"space-between"},{default:pe((()=>[me("div",it,[me("div",dt,ye(e.$t("Site.Cert.index_50")),1),he(_,{value:Se(N),"onUpdate:value":t[1]||(t[1]=e=>fe(N)?N.value=e:null),rows:10},null,8,["value"])]),me("div",ot,[me("div",ut,ye(e.$t("Site.Cert.index_51")),1),he(_,{value:Se(O),"onUpdate:value":t[2]||(t[2]=e=>fe(O)?O.value=e:null),rows:10},null,8,["value"])])])),_:1}),he(p,{class:"mb-12px"},{default:pe((()=>[he(h,{type:"primary",onClick:q},{default:pe((()=>[ve(ye(Se(E)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)])),_:1}),Se(M)?(ce(),_e(h,{key:0,type:"primary",onClick:ee},{default:pe((()=>[ve(ye(e.$t("Site.Cert.index_53")),1)])),_:1})):ge("",!0),Se(F)?(ce(),_e(h,{key:1},{default:pe((()=>[ve(ye(e.$t("Site.Cert.index_54")),1)])),_:1})):ge("",!0),Se(H)?(ce(),_e(h,{key:2,onClick:te},{default:pe((()=>[ve(ye(e.$t("Site.Cert.index_55")),1)])),_:1})):ge("",!0)])),_:1}),he(m,null,{default:pe((()=>[me("li",null,ye(e.$t("Site.Cert.index_33")),1),me("li",null,ye(e.$t("Site.Cert.index_34")),1),me("li",null,ye(e.$t("Site.Cert.index_35")),1),me("li",null,ye(e.$t("Site.Cert.index_36")),1)])),_:1}),he(y,{show:Se(f).show,"onUpdate:show":t[3]||(t[3]=e=>Se(f).show=e),title:Se(f).title,data:Se(f).data,width:650,"min-height":450,component:Se(c)},null,8,["show","title","data","component"])])),_:1},8,["show"])}}}),ct=u(rt,[["__scopeId","data-v-28bba990"]]),_t={class:"business-top-tips flex flex-wrap border-#d6e9c6 border-1px rounded-5px p-12px"},pt={class:"text-#3c763d w-100%"},St=u(ie({__name:"top-tips",setup(e){const{t:t}=de(),a=[t("SSL.SiteSSL.index_5"),t("SSL.SiteSSL.index_6"),t("SSL.SiteSSL.index_7"),t("SSL.SiteSSL.index_8"),t("SSL.SiteSSL.index_9"),t("SSL.SiteSSL.index_10"),t("SSL.SiteSSL.index_11")];return(e,t)=>{const n=r,l=Q;return ce(),xe("div",_t,[(ce(),xe(be,null,Ce(a,((e,t)=>he(l,{size:5,key:e,class:Le(["flex-nowrap! leading-20px",{"w-33%":t!==a.length-1}])},{default:pe((()=>[he(n,{name:"base-tick",size:16,color:"#ff8d00"}),me("span",pt,ye(e),1)])),_:2},1032,["class"]))),64))])}}}),[["__scopeId","data-v-12873ea8"]]),ht={class:"my-10px"},mt=ie({__name:"table",setup(e){const l=we((()=>n((()=>t.import("./index-legacy213.js?v=1758532619827")),void 0))),i=we((()=>n((()=>t.import("./index-legacy214.js?v=1758532619827")),void 0))),d=we((()=>n((()=>t.import("./domain-verification-legacy.js?v=1758532619827")),void 0))),o=c(),{userInfo:u}=ke(o),r=a(),{t:_}=de(),p=$e({p:1,limit:9999}),h=b(_("SSL.Business.index_41"),{onRefresh:(e,t)=>{v.data.request=!0,v.data.uc_id=t,v.data.verify=e,v.show=!0,w()}}),m=b(_("SSL.index_44")),y=b(_("SSL.index_49"),{onRefresh:()=>{w(),r.setRefresh(!0)}}),v=b(_("SSL.Business.index_42"),{onRefresh:()=>{w()}}),{table:x,columns:f}=P([{key:"verify_domains",title:_("Layout.Sider.mail_3"),render:e=>he("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:_("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},Ae({title:_("SSL.index_54")}),{key:"order_status",title:_("SSL.Business.index_43"),render:e=>{const t=e.order_info;return t.certId||t.domains.length?!t.certId&&t.domains.length?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_45"),ve(" ")]):"PENDING"===t.order_status&&1===t.status?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_46"),ve(" ")]):"COMPLETE"===t.order_status&&1===t.status?he("span",{class:"color-#20a53a"},[ve(" "),_("SSL.Business.index_47"),ve(" ")]):"CANCELLED"===t.order_status&&1===t.status||-1===t.status?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_48"),ve(" ")]):"FAILED"===t.order_status&&1===t.status?he("span",{class:"color-error"},[ve(" "),_("SSL.Business.index_49"),ve(" ")]):"EXPIRED"===t.order_status&&1===t.status?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_50"),ve(" ")]):1!==t.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(t.order_status)?0===t.status?he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_52"),ve(" ")]):void 0:he("span",{class:"color-warning"},[ve(" "),_("SSL.Business.index_51"),ve(" ")]):he("span",{class:"color-warning cursor-pointer",onClick:()=>g(e)},[" ",_("SSL.Business.index_44")," "])}},B({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:_("SSL.Business.index_53"),onClick:()=>{g(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:_("SSL.Business.index_54"),onClick:async()=>{const{message:t}=await E({uc_id:e.order_info.uc_id});s(t)&&(v.data.uc_id=e.order_info.uc_id,v.data.verify=t.data,v.data.paths=t.paths,v.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:_("SSL.index_58"),onClick:async()=>{y.data.row=e,y.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:_("Ftp.Label.index_11"),onClick:async()=>{const t=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(t)}},{show:!1,label:_("Public.Btn.Del"),onClick:()=>{C({title:_("SSL.index_59"),content:_("SSL.index_60"),onConfirm:async()=>{await R({hash:e.hash}),w()}})}}]})]),g=e=>{h.data.row=e,h.show=!0},w=async()=>{try{x.loading=!0;const{message:e}=await D(p);s(e)&&(x.data=e.data,x.total=e.total)}finally{x.loading=!1}};return u.value.status&&w(),(e,t)=>{const a=Y,n=U,s=Oe,o=S,r=Ue;return ce(),xe("div",ht,[he(r,{install:Se(u).status},{desc:pe((()=>[t[5]||(t[5]=me("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),he(a,{type:"primary",onClick:Se(N)},{default:pe((()=>[ve(ye(e.$t("Login.index_3")),1)])),_:1},8,["onClick"])])),default:pe((()=>[he(s,null,{toolsLeft:pe((()=>[he(a,{type:"primary",onClick:t[0]||(t[0]=e=>Se(m).show=!0)},{default:pe((()=>[ve(ye(Se(_)("SSL.index_44")),1)])),_:1})])),table:pe((()=>[he(n,{loading:Se(x).loading,data:Se(x).data,columns:Se(f),"max-height":220},null,8,["loading","data","columns"])])),_:1}),he(o,{show:Se(m).show,"onUpdate:show":t[1]||(t[1]=e=>Se(m).show=e),title:Se(m).title,data:Se(m).data,"min-height":250,component:ze},null,8,["show","title","data"]),he(o,{show:Se(h).show,"onUpdate:show":t[2]||(t[2]=e=>Se(h).show=e),title:Se(h).title,data:Se(h).data,width:650,"min-height":450,component:Se(l)},null,8,["show","title","data","component"]),he(o,{show:Se(y).show,"onUpdate:show":t[3]||(t[3]=e=>Se(y).show=e),title:Se(y).title,data:Se(y).data,width:720,height:530,component:Se(i)},null,8,["show","title","data","component"]),he(o,{show:Se(v).show,"onUpdate:show":t[4]||(t[4]=e=>Se(v).show=e),title:Se(v).title,data:Se(v).data,width:650,"min-height":450,component:Se(d)},null,8,["show","title","data","component"])])),_:1},8,["install"])])}}}),yt={class:"text-error"},vt=u({},[["render",function(e,t){const a=i,n=j;return ce(),_e(n,null,{default:pe((()=>[me("li",yt,ye(e.$t("SSL.SiteSSL.index_1")),1),me("li",null,ye(e.$t("SSL.SiteSSL.index_2")),1),me("li",null,ye(e.$t("SSL.SiteSSL.index_3")),1),me("li",null,[ve(ye(e.$t("SSL.SiteSSL.index_4"))+" ",1),he(a,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:pe((()=>[ve(ye(e.$t("SSL.Business.index_20")),1)])),_:1})])])),_:1})}]]),xt=ie({__name:"index",setup:e=>(e,t)=>(ce(),xe("div",null,[he(St),he(mt),he(vt)]))}),ft={class:"cert-info"},gt={class:"cert-label"},wt={class:"cert-value"},bt={class:"cert-info"},Ct={class:"cert-label"},Lt={class:"cert-value"},kt={class:"cert-info"},$t={class:"cert-label"},jt={class:"cert-value"},Pt={class:"cert-info"},Bt={class:"cert-label"},Et={class:"cert-value"},Rt={key:0,class:"text-primary"},Dt={key:1,class:"text-error"},Nt={class:"w-48%"},Ut={class:"mb-8px"},Ot={class:"w-48%"},At={class:"mb-8px"},zt=ie({__name:"cert",emits:["update"],setup(e,{emit:l}){const i=we((()=>n((()=>t.import("./ssl-log-legacy.js?v=1758532619827")),void 0))),u=l,{t:r}=de(),{data:c}=w(),_=b(r("SSL.index_43")),p=a(),h=oe(!1),m=oe(1),y=oe(""),f=oe(""),g=$e({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),C=async()=>{const{message:e}=await $({hash:g.hash});s(e)&&(_.data.path=e.result,_.show=!0)},L=async()=>{await v({updateOf:1,siteName:c.name}),u("update"),p.setRefresh(!0)},{loading:k,setLoading:P}=O();return(async()=>{try{P(!0);const{message:e}=await x({siteName:c.name});s(e)&&(h.value=e.status,g.hash=e.hash,g.issuer=e.cert_data.issuer,g.notAfter=e.cert_data.notAfter,g.notBefore=e.cert_data.notBefore,g.dns=e.cert_data.dns,g.subject=e.cert_data.subject,g.endtime=e.cert_data.endtime,y.value=e.key,f.value=e.csr,m.value=e.auto_renew)}finally{P(!1)}})(),(e,t)=>{const a=X,n=V,l=d,s=K,u=G,r=Q,c=Y,p=j,h=S,v=o;return ce(),_e(v,{show:Se(k)},{default:pe((()=>[he(s,{class:"mb-16px",type:"success","show-icon":!1},{default:pe((()=>[he(l,{"x-gap":12,cols:"15"},{default:pe((()=>[Se(m)?(ce(),_e(a,{key:0,span:"16"},{default:pe((()=>[me("div",ft,[me("div",gt,ye(e.$t("SSL.SiteSSL.index_22"))+"：",1),me("div",wt,ye(e.$t("SSL.SiteSSL.index_23")),1)])])),_:1})):ge("",!0),he(a,{span:"7"},{default:pe((()=>[me("div",bt,[me("div",Ct,ye(e.$t("Site.Cert.index_45"))+"：",1),me("div",Lt,[he(n,null,{default:pe((()=>[ve(ye(Se(g).issuer),1)])),_:1})])])])),_:1}),he(a,{span:"8"},{default:pe((()=>[me("div",kt,[me("div",$t,ye(e.$t("Site.Cert.index_46"))+"：",1),me("div",jt,[he(n,null,{default:pe((()=>[ve(ye(Se(g).dns.join(e.$t("Public.Punctuation.Comma"))),1)])),_:1})])])])),_:1}),he(a,{span:"7"},{default:pe((()=>[me("div",Pt,[me("div",Bt,ye(e.$t("Site.Cert.index_47"))+ye(e.$t("Public.Punctuation.Colon")),1),me("div",Et,[Se(g).endtime>0?(ce(),xe("span",Rt,ye(e.$t("Site.Cert.index_48",{date:Se(g).notAfter,days:Se(g).endtime})),1)):(ce(),xe("span",Dt,ye(e.$t("Site.Cert.index_47")),1))])])])),_:1})])),_:1})])),_:1}),he(r,{class:"mb-16px",size:10,justify:"space-between"},{default:pe((()=>[me("div",Nt,[me("div",Ut,ye(e.$t("Site.Cert.index_50")),1),he(u,{readonly:"",value:Se(y),"onUpdate:value":t[0]||(t[0]=e=>fe(y)?y.value=e:null),rows:14},null,8,["value"])]),me("div",Ot,[me("div",At,ye(e.$t("Site.Cert.index_51")),1),he(u,{readonly:"",value:Se(f),"onUpdate:value":t[1]||(t[1]=e=>fe(f)?f.value=e:null),rows:14},null,8,["value"])])])),_:1}),he(r,{class:"mb-12px"},{default:pe((()=>[he(c,{type:"primary",onClick:C},{default:pe((()=>[ve(ye(e.$t("Site.Cert.index_53")),1)])),_:1}),he(c,{onClick:L},{default:pe((()=>[ve(ye(e.$t("Site.Cert.index_55")),1)])),_:1})])),_:1}),he(p,null,{default:pe((()=>[me("li",null,ye(e.$t("SSL.SiteSSL.index_24")),1),me("li",null,ye(e.$t("SSL.SiteSSL.index_25")),1)])),_:1}),he(h,{show:Se(_).show,"onUpdate:show":t[2]||(t[2]=e=>Se(_).show=e),title:Se(_).title,data:Se(_).data,width:650,"min-height":450,component:Se(i)},null,8,["show","title","data","component"])])),_:1},8,["show"])}}}),It=u(zt,[["__scopeId","data-v-99cd0a05"]]),Tt={class:"flex items-center"},Mt={class:"leading-17px"},Ft={class:"w-full"},Ht={class:"w-full"},Jt={class:"text-error"},qt=ie({__name:"apply",emits:["update"],setup(e,{emit:t}){const n=je(),{t:i}=de(),{data:d}=w(),u=a(),c=t,S=$e({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),h={domains:{required:!0,trigger:"change",type:"array",message:i("SSL.SiteSSL.index_16")}},m=oe(null),y=oe([]),v=e=>y.value.find((t=>t.name===e))?.auto,x=()=>{n.push("/ssl_domain/domain")},f=ue((()=>S.domains.length>0&&S.domains.length<y.value.length));Pe((()=>S.domains),(e=>{e.length===y.value.length?S.all=!0:e.length||(S.all=!1)})),Pe((()=>S.all),(e=>{e?(S.domains=y.value.map((e=>e.name)),m.value?.validate()):S.domains=[]})),Pe((()=>S.auth_type),(e=>{"dns"===e?(S.domains=y.value.filter((e=>e.auto)).map((e=>e.name)),m.value?.validate()):S.domains=[]}));const g=ue((()=>S.domains.filter((e=>!v(e))))),b=async()=>{if(await(m.value?.validate()),"dns"===S.auth_type&&g.value.length&&!S.dns_manual)return void l.error({content:()=>De("span",{innerHTML:`${g.value.join("<br/>")}${i("SSL.SiteSSL.index_14")}`})});let e={auth_type:S.dns_manual?"dns_manual":S.auth_type,auto_wildcard:S.auto_wildcard,domains:JSON.stringify(S.domains),site_id:S.dns_manual?d.id:void 0,deploy:S.dns_manual?0:1};if(S.dns_manual&&"dns"===S.auth_type){const{message:t}=await A({site_id:d.id,domains:JSON.stringify(S.domains)});if(s(t)&&Object.keys(t).length)return void z(t.auths,d.id,S.domains,(()=>{c("update"),u.setRefresh(!0)}),!0);const n=I({width:500,height:300,hideClose:!0,component:T});try{const{message:t}=await M(e,!1);s(t)&&(t.deploy?(l.success(t.result||i("SSL.index_32")),c("update"),u.setRefresh(!0)):Array.isArray(t.auths)&&t.auths.length&&z(t.auths,d.id,S.domains,(()=>{c("update"),u.setRefresh(!0)})))}catch(a){F(Z(a,"message",""))}finally{n.hide()}return}const{message:t}=await M(e);s(t)&&I({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{c("update"),u.setRefresh(!0)}},component:Te})},{loading:C,setLoading:L}=O();return Be((()=>{(async()=>{try{L(!0);const{message:e}=await Me({id:d.id});if(_(e)){const t=e.map((async e=>{const{message:t}=await H({domain:e.name});s(t)&&y.value.push({name:e.name,auto:!!t.hash})}));await Promise.all(t)}}finally{L(!1)}})()})),(e,t)=>{const a=r,n=K,l=ee,s=p,i=te,d=ae,u=ne,c=Q,_=le,w=se,L=o,k=Y,$=Ie,P=j;return ce(),xe("div",null,[Ee(he(n,{"show-icon":!1,class:"mb-10px"},{default:pe((()=>[me("div",Tt,[he(a,{name:"base-info",size:"17",class:"mr-8px"}),me("span",Mt,ye(e.$t("SSL.SiteSSL.index_12")),1)])])),_:1},512),[[Re,"dns"===Se(S).auth_type]]),he($,{ref_key:"formRef",ref:m,model:Se(S),rules:h,"label-width":"140"},{default:pe((()=>[he(d,{label:e.$t("Config.Safe.Ssl.index_2")},{default:pe((()=>[he(i,{value:Se(S).auth_type,"onUpdate:value":t[0]||(t[0]=e=>Se(S).auth_type=e)},{default:pe((()=>[he(s,null,{default:pe((()=>[he(l,{value:"http"},{default:pe((()=>[ve(ye(e.$t("SSL.SiteSSL.index_17")),1)])),_:1}),he(l,{value:"dns"},{default:pe((()=>[ve(ye(e.$t("SSL.index_12"))+" (Wildcard support) ",1)])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},8,["label"]),Ee(he(d,{label:" ","show-feedback":!1},{default:pe((()=>[he(u,{checked:Se(S).dns_manual,"onUpdate:checked":t[1]||(t[1]=e=>Se(S).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:pe((()=>[ve(ye(e.$t("SSL.index_2")),1)])),_:1},8,["checked"])])),_:1},512),[[Re,"dns"===Se(S).auth_type]]),Ee(he(d,{label:" "},{default:pe((()=>[he(u,{checked:Se(S).auto_wildcard,"onUpdate:checked":t[2]||(t[2]=e=>Se(S).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:pe((()=>[ve(ye(e.$t("SSL.SiteSSL.index_20")),1)])),_:1},8,["checked"])])),_:1},512),[[Re,"dns"===Se(S).auth_type]]),he(d,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:pe((()=>[he(L,{show:Se(C),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:pe((()=>[he(u,{class:"mb-12px",checked:Se(S).all,"onUpdate:checked":t[3]||(t[3]=e=>Se(S).all=e),label:e.$t("Public.SelectAll"),indeterminate:Se(f)},null,8,["checked","label","indeterminate"]),Se(y).length?(ce(),_e(_,{key:0,value:Se(S).domains,"onUpdate:value":t[4]||(t[4]=e=>Se(S).domains=e)},{default:pe((()=>[he(c,{class:"flex-col!",size:12},{default:pe((()=>[(ce(!0),xe(be,null,Ce(Se(y),(e=>(ce(),_e(u,{key:e.name,value:e.name,label:e.name},null,8,["value","label"])))),128))])),_:1})])),_:1},8,["value"])):(ce(),_e(w,{key:1,description:"No domain name"}))])),_:1},8,["show"])])),_:1},8,["label"]),Ee(he(d,{label:" "},{default:pe((()=>[he(n,{"show-icon":!1,type:Se(g).length?"warning":"success"},{default:pe((()=>[(ce(!0),xe(be,null,Ce(Se(S).domains,(t=>(ce(),_e(c,{key:t},{default:pe((()=>[v(t)?(ce(),_e(c,{key:0,class:"flex-nowrap! py-3px"},{default:pe((()=>[he(a,{name:"base-success",size:"17",color:"#20a53a"}),me("span",Ft,"["+ye(t)+"] "+ye(e.$t("SSL.SiteSSL.index_13")),1)])),_:2},1024)):(ce(),_e(c,{key:1,class:"flex-nowrap! py-3px items-center!"},{default:pe((()=>[he(a,{name:"base-error",size:"17",color:"#E85445"}),me("span",Ht,"["+ye(t)+"] "+ye(e.$t("SSL.SiteSSL.index_14")),1),he(k,{type:"primary",size:"tiny",onClick:x},{default:pe((()=>[ve(ye(e.$t("SSL.SiteSSL.index_21")),1)])),_:1})])),_:2},1024))])),_:2},1024)))),128))])),_:1},8,["type"])])),_:1},512),[[Re,"dns"===Se(S).auth_type&&Se(S).domains.length&&!Se(S).dns_manual]]),he(d,{label:" "},{default:pe((()=>[he(k,{type:"primary",onClick:b},{default:pe((()=>[ve(ye(e.$t("Public.Btn.Apply")),1)])),_:1})])),_:1})])),_:1},8,["model"]),Ee(he(P,{class:"mt-16px"},{default:pe((()=>[me("li",Jt,ye(e.$t("SSL.SiteSSL.index_15")),1),me("li",null,ye(e.$t("Site.Cert.index_21")),1),me("li",null,ye(e.$t("Site.Cert.index_23")),1),me("li",null,ye(e.$t("Site.Cert.index_24")),1)])),_:1},512),[[Re,"http"===Se(S).auth_type]]),Ee(he(P,{class:"mt-24px"},{default:pe((()=>[t[5]||(t[5]=me("li",null,"Manually resolved certificates do not support auto-renewal",-1)),me("li",null,ye(e.$t("Site.Cert.index_25")),1),me("li",null,ye(e.$t("Site.Cert.index_26")),1),me("li",null,ye(e.$t("Site.Cert.index_27")),1),me("li",null,ye(e.$t("Site.Cert.index_28")),1)])),_:1,__:[5]},512),[[Re,"dns"===Se(S).auth_type]])])}}}),Gt=ie({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const t=e,a=()=>{t.onRefresh()};return(e,n)=>(ce(),xe("div",null,[t.isOpen&&"Let's Encrypt"===t.type?(ce(),_e(It,{key:0,onUpdate:a})):(ce(),_e(qt,{key:1,onUpdate:a}))]))}}),Xt=ie({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:t}){const{data:a}=w(),{t:n}=de(),i=$e({p:1,limit:99999}),{columns:d,table:o}=P([{key:"domain",title:n("Site.Cert.index_29"),render:e=>he("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},Ae({title:n("SSL.index_54"),width:140}),{key:"issuer",title:n("Site.Cert.index_30"),ellipsis:{tooltip:!0}},B({width:150,options:t=>[{label:n("Public.Btn.Deploy"),onClick:async()=>{try{await k({hash:t.hash,domains:JSON.stringify([a.name]),append:1}),l.success(n("SSL.index_32")),setTimeout((()=>{e.onMenuChange()}),500)}catch(s){console.log(s)}}},{show:"Let's Encrypt"===t.provider,label:n("Public.Btn.Del"),onClick:()=>{(e=>{J({title:n("Site.Cert.index_31"),content:n("Site.Cert.index_32"),onConfirm:async()=>{await R({hash:e.hash}),c()}})})(t)}}]})]),{loading:u,setLoading:r}=O(!0),c=async()=>{try{r(!0);const{message:e}=await q(i);s(e)&&(o.data=e.data)}finally{r(!1)}};return c(),t({init:c}),(e,t)=>{const a=U;return ce(),xe("div",null,[he(a,{loading:Se(u),columns:Se(d),data:Se(o).data,"max-height":510},null,8,["loading","columns","data"])])}}}),Vt={class:"mr-12px"},Wt={key:0,class:"mr-12px"},Kt={key:1,class:"mr-12px"};e("default",ie({__name:"index",setup(e,{expose:l}){const i=we((()=>n((()=>t.import("./ssl-log-legacy.js?v=1758532619827")),void 0))),d=a(),{data:o}=w(),{t:u}=de(),r=oe("current"),c=oe(""),_=b(u("SSL.index_43")),p=oe(g.NotDeploy),m=oe(""),y=oe(!1),v=oe(0),x=oe(!1),C=oe(""),L=async()=>{const{message:e}=await $({hash:c.value});s(e)&&(_.data.path=e.result,_.show=!0)},k=e=>{P.value[0].data&&(P.value[0].data.loading=e)},j=async()=>{try{k(!0);const{message:a}=await f({siteName:o.name});s(a)&&(p.value=a.type,y.value=a.status,v.value=Z(a,"cert_data.endtime",0),C.value=a.cert_data.issuer_O||"",x.value=(()=>{let e=!1;return v.value<=30&&(e=!0),p.value===g.TestDeploy&&v.value<0&&(e=!0),p.value!==g.SaveOrHolderDeploy&&p.value!==g.NotDeploy||(e=!1),e})(),m.value=a.cert_data.dns.join(","),c.value=a.hash,t=a,P.value[0].data&&(P.value[0].data.info=t),e=x.value,P.value[0].data&&(P.value[0].data.isRenew=e))}catch{y.value=!1,x.value=!1}finally{k(!1)}var e,t},P=oe([{key:"current",label:()=>he("div",null,[he("span",null,[ve("Current Certs - ")]),he("span",{class:y.value?"text-#1d9534":"text-red-500"},[ve("["),y.value?"Deployed":"Not Deployed",ve("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:j},component:Ne(ct)},{key:"business",label:u("Site.Cert.index_64"),component:Ne(xt)},{key:"let",label:u("Site.Cert.index_65"),data:{isOpen:ue((()=>y.value)),type:ue((()=>C.value)),onRefresh:j},component:Ne(Gt)},{key:"holder",label:u("Site.Cert.index_66"),component:Ne(Xt),data:{onMenuChange:()=>{r.value="current",j(),d.setRefresh(!0)}}}]);return l({init:()=>{j()}}),(e,t)=>{const a=Y,n=K,l=h,s=S;return ce(),xe("div",null,[Se(y)?ge("",!0):(ce(),_e(n,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe((()=>[me("span",Vt,ye(e.$t("Site.Cert.index_41")),1),he(a,{size:"tiny",type:"primary",onClick:t[0]||(t[0]=e=>r.value="business")},{default:pe((()=>[ve(ye(e.$t("Site.Cert.index_43")),1)])),_:1})])),_:1})),Se(y)&&Se(x)?(ce(),_e(n,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe((()=>[Se(v)>0?(ce(),xe("span",Wt,ye(e.$t("SSL.SiteSSL.index_26",[Se(m),Se(v)])),1)):(ce(),xe("span",Kt,ye(e.$t("SSL.SiteSSL.index_19",[Se(m)])),1)),he(a,{size:"tiny",type:"primary",onClick:L},{default:pe((()=>[ve(ye(e.$t("Site.Cert.index_53")),1)])),_:1})])),_:1})):ge("",!0),he(l,{value:Se(r),"onUpdate:value":t[1]||(t[1]=e=>fe(r)?r.value=e:null),options:Se(P)},null,8,["value","options"]),he(s,{show:Se(_).show,"onUpdate:show":t[2]||(t[2]=e=>Se(_).show=e),title:Se(_).title,data:Se(_).data,width:650,"min-height":450,component:Se(i)},null,8,["show","title","data","component"])])}}}))}}}));
