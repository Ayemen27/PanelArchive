System.register(["./index-legacy108.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1758532619827","./index-legacy99.js?v=1758532619827","./page_layout-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./site-legacy.js?v=1758532619827","./public-legacy.js?v=1758532619827","./index-legacy84.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./domain-input-legacy.js?v=1758532619827","./index-legacy98.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827","./index-legacy133.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1758532619827","./index-legacy131.js?v=1758532619827","./php-legacy.js?v=1758532619827","./soft-legacy.js?v=1758532619827","./soft-legacy2.js?v=1758532619827","./useOperate-legacy.js?v=1758532619827","./useModal-legacy2.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy15.js?v=1758532619827","./index-legacy.js?v=1758532619827"],(function(e,a){"use strict";var t,l,s,i,n,d,u,p,r,o,_,c,v,m,P,f,x,y,g,b,S,w,h,H,$,j,U,k,E,L,q,M,R,C,I,O,z,B,D,Q,T,V,F,J,N,X,A,G,K,W,Y,Z,ee;return{setters:[e=>{t=e._},e=>{l=e._},e=>{s=e._},e=>{i=e._},e=>{n=e.o,d=e.w,u=e._,p=e.q,r=e.g,o=e.c,_=e.m,c=e.bQ,v=e.b0,m=e.p},e=>{P=e.k,f=e.P,x=e.a0,y=e.ae,g=e.c,b=e.R,S=e.S,w=e.U,h=e.X,H=e.V,$=e.a3,j=e.j,U=e.a4,k=e.an,E=e.F,L=e.r,q=e.n,M=e.e,R=e.l,C=e.aj,I=e.v,O=e.a2},e=>{z=e.au,B=e.e,D=e.aO,Q=e.aP},e=>{T=e.m,V=e.d,F=e.u},e=>{J=e.u},e=>{N=e.dV,X=e.dU,A=e.dT,G=e.dP,K=e.au,W=e.d9,Y=e.dj,Z=e.dg},e=>{ee=e.D},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".bt-tabs[data-v-028bb820]>.n-tabs-nav{padding:0 20px}.bt-tabs[data-v-028bb820]>.n-tab-pane{padding:16px 10px 0}\n",document.head.appendChild(a);const ae={class:"w-150px"},te={key:0,class:"ml-8px"},le=P({__name:"select-ftp",props:{value:{default:"0"},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=f(),t=J(),{ftp:l}=x(t),s=y(e,"value"),i=[{label:a("Site.PHP.add_site_31"),value:"0"},{label:a("Site.PHP.add_site_34"),value:"1"}],d=g((()=>!l.value.setup)),u=()=>{T("pureftpd")};return(e,a)=>{const t=N,l=n;return b(),S(E,null,[w("div",ae,[h(t,{value:s.value,"onUpdate:value":a[0]||(a[0]=e=>s.value=e),class:"ftp-select",options:i,disabled:H(d)},null,8,["value","disabled"])]),H(d)?(b(),S("div",te,[h(l,{onClick:u},{default:$((()=>[j(U(e.$t("Site.PHP.add_site_33")),1)])),_:1})])):k("",!0)],64)}}}),se={class:"w-150px"},ie={key:0,class:"ml-8px"},ne=P({__name:"select-database",props:{value:{default:"0"},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=f(),t=J(),{mysql:l}=x(t),s=y(e,"value"),i=[{label:a("Site.PHP.add_site_31"),value:"0"},{label:a("Site.PHP.add_site_32"),value:"MySQL"}],d=g((()=>!l.value.setup)),u=()=>{T("mysql")};return(e,a)=>{const t=N,l=n;return b(),S(E,null,[w("div",se,[h(t,{value:s.value,"onUpdate:value":a[0]||(a[0]=e=>s.value=e),class:"db-select",options:i,disabled:H(d)},null,8,["value","disabled"])]),H(d)?(b(),S("div",ie,[h(l,{onClick:u},{default:$((()=>[j(U(e.$t("Site.PHP.add_site_30")),1)])),_:1})])):k("",!0)],64)}}}),de={class:"w-150px"},ue=P({__name:"select-php",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=y(e,"value"),{loading:t,setLoading:l}=V(),s=L([]);return(async()=>{try{l(!0);const{message:e}=await z(),t=d(e)?e:[];s.value=t.reverse().map((e=>({label:e.name,value:e.version}))),await q(),t.length>0&&(a.value=t[0].version)}finally{l(!1)}})(),(e,l)=>{const i=N;return b(),S("div",de,[h(i,{value:a.value,"onUpdate:value":l[0]||(l[0]=e=>a.value=e),class:"php-select",loading:H(t),options:H(s)},null,8,["value","loading","options"])])}}}),pe={class:"w-150px"},re=P({__name:"select-category",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=y(e,"value"),{loading:t,setLoading:l}=V(),s=L([]);return(async()=>{try{l(!0);const{message:e}=await B();d(e)?(s.value=e.map((e=>({label:e.name,value:e.id}))),e.length>0&&(a.value=e[0].id)):s.value=[]}finally{l(!1)}})(),(e,l)=>{const i=N;return b(),S("div",pe,[h(i,{value:a.value,"onUpdate:value":l[0]||(l[0]=e=>a.value=e),class:"type-select",loading:H(t),options:H(s)},null,8,["value","loading","options"])])}}}),oe={class:"flex items-center w-600px py-30px px-50px"},_e={class:"w-120px text-primary"},ce={class:"flex flex-col gap-16px flex-1 ml-60px"},ve={key:0,class:"leading-24px"},me={class:"flex items-center h-30px"},Pe={class:"mt-8px"},fe={class:"font-bold"},xe={class:"font-bold"},ye={key:1,class:"leading-24px"},ge={class:"flex items-center h-30px"},be={class:"mt-8px"},Se={class:"font-bold"},we={class:"font-bold"},he=P({__name:"site-result",props:{data:{}},setup(e){const a=e,{info:t}=a.data;return(e,a)=>{const l=u,s=p;return b(),S("div",oe,[w("div",_e,[h(l,{name:"base-success",size:"120"})]),w("div",ce,[H(t).ftpStatus?(b(),S("div",ve,[w("div",me,U(e.$t("Site.PHP.add_site_35")),1),h(s,{dashed:""}),w("div",Pe,[j(U(e.$t("Site.PHP.add_site_37")),1),w("span",fe,U(H(t).ftpUser||"--"),1)]),w("div",null,[j(U(e.$t("Site.PHP.add_site_38")),1),w("span",xe,U(H(t).ftpPass||"--"),1)])])):k("",!0),H(t).databaseStatus?(b(),S("div",ye,[w("div",ge,U(e.$t("Site.PHP.add_site_36")),1),h(s,{dashed:""}),w("div",be,[j(U(e.$t("Site.PHP.add_site_37"))+" ",1),w("span",Se,U(H(t).databaseUser||"--"),1)]),w("div",null,[j(U(e.$t("Site.PHP.add_site_38"))+" ",1),w("span",we,U(H(t).databasePass||"--"),1)])])):k("",!0)])])}}}),He={class:"w-440px"},$e={class:"w-400px"},je={class:"w-400px"},Ue={class:"flex-1"},ke={class:"w-174px"},Ee={class:"ml-8px"},Le={class:"w-174px"},qe={class:"mt-8px text-desc"},Me={class:"flex-1"},Re={class:"w-174px"},Ce={class:"ml-8px"},Ie={class:"w-174px"},Oe={class:"mt-8px text-desc"},ze={class:"w-150px"},Be=P({__name:"index",setup(e,{expose:a}){const{t:t}=f(),n=J(),d=L("0"),p=L("0"),c=L(null),v=L(null),m=L([]),P=M({type:0,domain:[""],webname:{domain:""},ps:"",path:n.sitePath,ftp:!1,ftp_username:"",ftp_password:"",sql:!1,codeing:"utf8",datauser:"",datapassword:"",version:null,type_id:null,set_ssl:!1,force_ssl:!1,is_create_default_file:!0}),x={"webname.domain":{required:!0,trigger:["blur","change"],validator:(e,a)=>""!==a.trim()||0!==P.type||new Error(t("Site.PHP.add_site_23"))},domain:{trigger:["blur"],validator:(e,a)=>!(!a[0]&&1===P.type)||new Error(t("Site.PHP.add_site_23"))},path:{trigger:["blur","change"],validator:(e,a)=>""!==a||new Error(t("Site.PHP.add_site_26"))},version:{trigger:"change",validator:(e,a)=>null!==a||new Error(t("Site.PHP.add_site_27"))},type_id:{trigger:"change",validator:(e,a)=>null!==a||new Error(t("Site.PHP.add_site_28"))}},y=e=>{if(!e)return void(P.webname.domain=P.domain.filter(Boolean).join("\n"));const a=P.webname.domain.trim();a!==P.domain.join("\n")&&(P.domain=a?a.split("\n").filter(Boolean):[""],P.domain.forEach(((e,a)=>c.value?.onDomainItemBlur(e,a))))},g=e=>{const a=e?.trim().split("\n")[0].split(":")[0];if(a){const e=a.replace(new RegExp(/([-.])/g),"_");P.ps=e,P.path=`${n.sitePath}/${a}`,P.ftp_username=`ftp_${e}`,P.ftp_password=r(16),P.datauser=`sql_${e}`,P.datapassword=r(16)}else P.ps="",P.path=n.sitePath,P.ftp_username="",P.ftp_password="",P.datauser="",P.datapassword=""},E=e=>{P.ftp="1"===e},q=e=>{P.sql="0"!==e&&e};return a({onConfirm:async()=>{await new Promise(((e,a)=>{0===m.value.filter((e=>e.support.includes("auto"))).length&&1===P.type?(_.error("This domain does not support automatic resolution, please choose manual resolution"),a(!1)):e(!0)})),await(v.value?.validate());const{message:e}=await D((()=>{const{version:e,type_id:a}=P;if(null===e)throw _.error(t("Site.PHP.add_site_27")),new Error(t("Site.PHP.add_site_27"));if(null===a)throw _.error(t("Site.PHP.add_site_28")),new Error(t("Site.PHP.add_site_28"));const l=P.webname.domain.trim().split("\n"),s=l[0]+"\r",i=l[0].split(":")[1]||"80",n=l.length>1?l.slice(1):[],d=m.value.map((e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]})));let u={webname:{domain:s,domainlist:n,count:n.length},parse_list:1===P.type&&d.length?JSON.stringify(d):null,port:i,type:"PHP",ps:P.ps,path:P.path,ftp:P.ftp,sql:P.sql,codeing:P.codeing,version:e,type_id:a,set_ssl:P.set_ssl?1:0,force_ssl:P.force_ssl?1:0,is_create_default_file:P.is_create_default_file};return P.ftp&&(u=Object.assign(u,{ftp_username:P.ftp_username,ftp_password:P.ftp_password})),P.sql&&(u=Object.assign(u,{datauser:P.datauser,datapassword:P.datapassword})),u})());var a;!o(e)||!1===e.ftpStatus&&!1===e.databaseStatus?_.success(t("Site.PHP.add_site_29")):(a=e,F({title:t("Site.PHP.add_site_29"),data:{info:a},component:he})),n.setRefresh(!0)}}),(e,a)=>{const t=X,n=A,r=u,o=G,_=i,f=K,L=s,M=W,z=Y,B=l;return b(),S("div",null,[h(B,{ref_key:"formRef",ref:v,model:H(P),rules:x},{default:$((()=>[h(o,{label:e.$t("SSL.index_1")},{default:$((()=>[h(n,{value:H(P).type,"onUpdate:value":[a[0]||(a[0]=e=>H(P).type=e),y]},{default:$((()=>[h(t,{value:0},{default:$((()=>[j(U(e.$t("SSL.index_2")),1)])),_:1}),h(t,{value:1},{default:$((()=>[j(U(e.$t("SSL.index_3")),1)])),_:1})])),_:1},8,["value"]),h(r,{name:"ssl-stars",size:22})])),_:1},8,["label"]),R(h(o,{label:e.$t("Site.PHP.add_site_4"),path:"domain"},{default:$((()=>[h(ee,{ref_key:"domainInputRef",ref:c,value:H(P).domain,"onUpdate:value":a[1]||(a[1]=e=>H(P).domain=e),"parse-list":H(m),"onUpdate:parseList":a[2]||(a[2]=e=>C(m)?m.value=e:null),"onUpdate:domain":g},null,8,["value","parse-list"])])),_:1},8,["label"]),[[I,1===H(P).type]]),R(h(o,{label:e.$t("Site.PHP.add_site_4"),path:"webname.domain"},{default:$((()=>[w("div",He,[h(_,{value:H(P).webname.domain,"onUpdate:value":[a[3]||(a[3]=e=>H(P).webname.domain=e),g],name:"domain"},{default:$((()=>[w("p",null,U(e.$t("Site.PHP.add_site_5")),1),w("p",null,U(e.$t("Site.PHP.add_site_6")),1),w("p",null,U(e.$t("Site.PHP.add_site_7")),1)])),_:1},8,["value"])])])),_:1},8,["label"]),[[I,0===H(P).type]]),h(o,{label:e.$t("Site.PHP.add_site_8"),path:"ps"},{default:$((()=>[w("div",$e,[h(f,{value:H(P).ps,"onUpdate:value":a[4]||(a[4]=e=>H(P).ps=e),"input-props":{name:"ps"},placeholder:""},null,8,["value"])])])),_:1},8,["label"]),h(o,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:$((()=>[w("div",je,[h(L,{value:H(P).path,"onUpdate:value":a[5]||(a[5]=e=>H(P).path=e),"input-props":{name:"path"}},null,8,["value"])])])),_:1},8,["label"]),h(o,{label:e.$t("Site.PHP.add_site_10")},{default:$((()=>[h(le,{value:H(d),"onUpdate:value":[a[6]||(a[6]=e=>C(d)?d.value=e:null),E]},null,8,["value"])])),_:1},8,["label"]),"1"===H(d)?(b(),O(o,{key:0,label:e.$t("Site.PHP.add_site_11")},{default:$((()=>[w("div",Ue,[h(M,{class:"items-center"},{default:$((()=>[w("div",ke,[h(f,{value:H(P).ftp_username,"onUpdate:value":a[7]||(a[7]=e=>H(P).ftp_username=e),"input-props":{name:"ftp_username"},placeholder:e.$t("Site.PHP.add_site_12")},null,8,["value","placeholder"])]),w("div",Ee,U(e.$t("Site.PHP.add_site_13")),1),w("div",Le,[h(f,{value:H(P).ftp_password,"onUpdate:value":a[8]||(a[8]=e=>H(P).ftp_password=e),"input-props":{name:"ftp_password"},placeholder:e.$t("Site.PHP.add_site_14")},null,8,["value","placeholder"])])])),_:1}),w("div",qe,U(e.$t("Site.PHP.add_site_15")),1)])])),_:1},8,["label"])):k("",!0),h(o,{label:e.$t("Site.PHP.add_site_16")},{default:$((()=>[h(ne,{value:H(p),"onUpdate:value":[a[9]||(a[9]=e=>C(p)?p.value=e:null),q]},null,8,["value"])])),_:1},8,["label"]),"MySQL"===H(p)?(b(),O(o,{key:1,label:e.$t("Site.PHP.add_site_17")},{default:$((()=>[w("div",Me,[h(M,{class:"items-center"},{default:$((()=>[w("div",Re,[h(f,{value:H(P).datauser,"onUpdate:value":a[10]||(a[10]=e=>H(P).datauser=e),"input-props":{name:"db_username"},placeholder:e.$t("Site.PHP.add_site_18")},null,8,["value","placeholder"])]),w("div",Ce,U(e.$t("Site.PHP.add_site_13")),1),w("div",Ie,[h(f,{value:H(P).datapassword,"onUpdate:value":a[11]||(a[11]=e=>H(P).datapassword=e),"input-props":{name:"db_password"},placeholder:e.$t("Site.PHP.add_site_19")},null,8,["value","placeholder"])])])),_:1}),w("div",Oe,U(e.$t("Site.PHP.add_site_20")),1)])])),_:1},8,["label"])):k("",!0),h(o,{label:e.$t("Site.PHP.add_site_21"),path:"version"},{default:$((()=>[w("div",ze,[h(ue,{value:H(P).version,"onUpdate:value":a[12]||(a[12]=e=>H(P).version=e)},null,8,["value"])])])),_:1},8,["label"]),h(o,{label:e.$t("Site.PHP.add_site_22"),path:"type_id"},{default:$((()=>[h(re,{value:H(P).type_id,"onUpdate:value":a[13]||(a[13]=e=>H(P).type_id=e)},null,8,["value"])])),_:1},8,["label"]),h(o,{label:e.$t("SSL.SiteSSL.index_18")},{default:$((()=>[h(z,{value:H(P).is_create_default_file,"onUpdate:value":a[14]||(a[14]=e=>H(P).is_create_default_file=e)},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),De={class:"px-10px"},Qe={class:"mt-8px leading-22px text-default"},Te={class:"mt-6px"},Ve=P({__name:"index",setup(e,{expose:a}){const{t:t}=f(),s=J(),n=M({domain:"domain|1|0|0|0\ndomain|1|0|0|0\ndomain|1|0|0|0"}),d=L([{key:"name",title:t("Site.TableRow.index_1")},{key:"ftp",title:t("Site.PHP.add_site_10"),render:e=>e.succesInfo?e.succesInfo.ftp_status?h("span",{class:"text-primary"},[t("Site.PHP.index_35")]):`${t("Site.PHP.index_37")}`:"--"},{key:"database",title:t("Site.PHP.add_site_16"),render:e=>e.succesInfo?e.succesInfo.db_status?h("span",{class:"text-primary"},[t("Site.PHP.index_35")]):`${t("Site.PHP.index_37")}`:"--"},{key:"result",title:t("Site.DelSite.index_10"),render:e=>"error"===e.status?h("span",{class:"text-error"},[e.errorMsg]):h("span",{class:"text-primary"},[t("Site.PHP.index_35")])}]);return a({onConfirm:async()=>{let e=[];const a=n.domain.trim().split("\n");for(let s=0;s<a.length;s++){const l=a[s].split("|");for(let a=0;a<l.length;a++){const i=s+1,n=l[a].trim();switch(a){case 0:e=n.split(",");for(let a=0;a<e.length;a++){const a=e[0],l=a.split(":");if(!c(l[0]))return void _.error(`${t("Site.PHP.index_39")} ${i}, ${t("Site.PHP.index_40")} [${a}]`);if(void 0!==l[1]&&v(l[1]))return void _.error(`${t("Site.PHP.index_39")} ${i}, ${t("Site.PHP.index_41")} [${l[1]}]`)}break;case 1:if("1"!==n&&n.indexOf("/")<-1)return void _.error(`${t("Site.PHP.index_39")} ${i}, ${t("Site.PHP.index_42")} [${n}]`)}}}const{message:l}=await Q({websites_content:a});o(l)&&(_.success(l.msg),(e=>{const a=[];Object.entries(e.error).forEach((([e,t])=>{a.push({name:e,status:"error",errorMsg:t.result})})),Object.entries(e.success).forEach((([e,t])=>{a.push({name:e,status:"success",succesInfo:t})})),F({title:t("Site.PHP.index_38"),content:()=>h("div",{class:"w-500px p-20px"},[h(Z,{data:a,columns:d.value},null)])})})(l)),s.setRefresh(!0)}}),(e,a)=>{const t=i,s=G,d=l;return b(),S("div",De,[h(d,{ref:"formRef"},{default:$((()=>[h(s,{label:""},{default:$((()=>[h(t,{value:H(n).domain,"onUpdate:value":a[0]||(a[0]=e=>H(n).domain=e),rows:10,name:"batch-domain"},null,8,["value"])])),_:1})])),_:1},512),w("div",Qe,[w("p",null,U(e.$t("Site.PHP.add_site_39")),1),w("p",Te,U(e.$t("Site.PHP.add_site_40")),1),w("p",null,U(e.$t("Site.PHP.add_site_41")),1),w("p",null,U(e.$t("Site.PHP.add_site_42")),1),w("p",null,U(e.$t("Site.PHP.add_site_43")),1),w("p",null,U(e.$t("Site.PHP.add_site_44")),1),a[1]||(a[1]=w("p",{class:"mt-6px"},"Eq, bt.cn,test.cn:8081|/www/wwwroot/bt.cn|1|1|56",-1))])])}}}),Fe={class:"p-20px h-full"};e("default",m(P({__name:"index",setup(e,{expose:a}){const{t:l}=f(),s=L("single"),i=L(),n=[{key:"single",label:l("Site.PHP.add_site_1"),isLazy:!0,component:Be},{key:"batch",label:l("Site.PHP.add_site_2"),isLazy:!0,component:Ve}];return a({onConfirm:async()=>{await(i.value?.onConfirm())}}),(e,a)=>{const l=t;return b(),S("div",Fe,[h(l,{ref_key:"tabsRef",ref:i,value:H(s),"onUpdate:value":a[0]||(a[0]=e=>C(s)?s.value=e:null),options:n},null,8,["value"])])}}}),[["__scopeId","data-v-028bb820"]]))}}}));
