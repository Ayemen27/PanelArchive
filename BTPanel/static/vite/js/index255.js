import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1758532619827";import{D as t,E as a,F as s}from"./index87.js?v=1758532619827";import{w as l,R as i,p as r}from"./page_layout.js?v=1758532619827";import{d as _}from"./public.js?v=1758532619827";import{_ as u}from"./task-view.vue_vue_type_script_setup_true_lang.js?v=1758532619827";import{k as o,r as p,e as d,c as n,w as c,R as m,a2 as b,a3 as v,X as g,V as f,U as y,S as j,F as h,O as x,an as w}from"./vue.js?v=1758532619827";import{dV as k,dP as S,_ as U,d9 as P,eg as C,dk as F}from"./naive.js?v=1758532619827";import"./index133.js?v=1758532619827";import"./index.js?v=1758532619827";import"./common.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1758532619827";import"./site4.js?v=1758532619827";import"./site.js?v=1758532619827";import"./soft.js?v=1758532619827";import"./index245.js?v=1758532619827";import"./index99.js?v=1758532619827";import"./index108.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1758532619827";import"./index98.js?v=1758532619827";import"./index100.js?v=1758532619827";import"./index101.js?v=1758532619827";import"./file.js?v=1758532619827";import"./theme-monokai.js?v=1758532619827";import"./refersh.js?v=1758532619827";import"./php.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang17.js?v=1758532619827";import"./index105.js?v=1758532619827";import"./ssl.js?v=1758532619827";import"./cert.js?v=1758532619827";import"./utils3.js?v=1758532619827";import"./index218.js?v=1758532619827";import"./paypal-js.js?v=1758532619827";import"./ssl-lets-progress.js?v=1758532619827";import"./upload.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1758532619827";const N={class:"data-box"},q=r(o({__name:"index",props:{done:{type:Function}},setup(r,{expose:o}){const q=r,D=p(null),R=p([]),T=p([]),O=d({site_id:null,target_id:null,all:!1,source_site:["file"],db_table:[],create_recovery_point:!1}),V=n((()=>O.db_table.length>0&&O.db_table.length<T.value.length)),A={site_id:{required:!0,type:"number",trigger:"change",message:"Source site cannot be empty"},target_id:{required:!0,type:"number",trigger:"change",message:"Target site cannot be empty"},source_site:{required:!0,type:"array",trigger:"change",message:"Please select type"},db_table:{required:!0,type:"array",trigger:"change",message:"Please select database table"}};c((()=>O.db_table),(e=>{e.length===T.value.length?O.all=!0:e.length||(O.all=!1)})),c((()=>O.all),(e=>{var t;e?(O.db_table=T.value,null==(t=D.value)||t.validate()):O.db_table=[]}));const B=async()=>{const{message:e}=await a({set_id:Number(O.site_id)});l(e)&&(T.value=e,O.db_table=[])},{loading:E,setLoading:H}=_();return(async()=>{try{H(!0);const{message:e}=await s();l(e)&&(R.value=e.map((e=>({label:e.name,value:e.id}))),R.value.length&&(O.site_id=R.value[0].value,B()))}finally{H(!1)}})(),o({onConfirm:async()=>{var e;await(null==(e=D.value)?void 0:e.validate()),await t({cp_files:!!O.source_site.includes("file"),cp_data_tables:!!O.source_site.includes("db"),is_backup:O.create_recovery_point,data_tables:JSON.stringify(O.source_site.includes("db")?O.db_table:[]),source_id:Number(O.site_id),target_id:Number(O.target_id)}),q.done()}}),(t,a)=>{const s=k,l=S,r=U,_=P,o=C,p=F,d=e,n=i;return m(),b(u,{title:"Copy Progress",params:"wp_copy"},{default:v((()=>[g(n,{show:f(E),class:"p-16px"},{default:v((()=>[g(d,{ref_key:"formRef",ref:D,model:f(O),rules:A},{default:v((()=>[g(l,{label:"Source Site",path:"site_id"},{default:v((()=>[g(s,{class:"w-300px",value:f(O).site_id,"onUpdate:value":[a[0]||(a[0]=e=>f(O).site_id=e),B],options:f(R),filterable:""},null,8,["value","options"])])),_:1}),g(l,{label:"Target site",path:"target_id"},{default:v((()=>[g(s,{class:"w-300px",value:f(O).target_id,"onUpdate:value":a[1]||(a[1]=e=>f(O).target_id=e),options:f(R),filterable:"",placeholder:"Please select target site"},null,8,["value","options"])])),_:1}),g(l,{label:"Copy Type",path:"source_site","show-feedback":!f(O).source_site.length},{default:v((()=>[g(o,{value:f(O).source_site,"onUpdate:value":a[2]||(a[2]=e=>f(O).source_site=e)},{default:v((()=>[g(_,null,{default:v((()=>[g(r,{value:"file",label:"File"}),g(r,{value:"db",label:"Database"})])),_:1})])),_:1},8,["value"])])),_:1},8,["show-feedback"]),g(l,{label:" "},{default:v((()=>[g(p,{"show-icon":!1},{default:v((()=>a[6]||(a[6]=[y("div",null,"Files: Copy the newly added theme and plug-in files from the source wp website to the target wp website. ",-1),y("div",null,"Database: Select the data table in the source wp website and copy it to the target wp website. Note: the existing table will be overwritten!",-1)]))),_:1,__:[6]})])),_:1}),f(O).source_site.includes("db")?(m(),b(l,{key:0,label:" ",path:"db_table"},{default:v((()=>[y("div",N,[g(r,{checked:f(O).all,"onUpdate:checked":a[3]||(a[3]=e=>f(O).all=e),label:t.$t("Public.SelectAll"),indeterminate:f(V)},null,8,["checked","label","indeterminate"]),g(o,{value:f(O).db_table,"onUpdate:value":a[4]||(a[4]=e=>f(O).db_table=e)},{default:v((()=>[g(_,{class:"flex-col!"},{default:v((()=>[(m(!0),j(h,null,x(f(T),(e=>(m(),b(r,{value:e,label:e,key:e},null,8,["value","label"])))),128))])),_:1})])),_:1},8,["value"])])])),_:1})):w("",!0),g(l,{label:"Backup"},{default:v((()=>[g(r,{checked:f(O).create_recovery_point,"onUpdate:checked":a[5]||(a[5]=e=>f(O).create_recovery_point=e),label:"Create a backup of your target website"},null,8,["checked"])])),_:1})])),_:1},8,["model"])])),_:1},8,["show"])])),_:1})}}}),[["__scopeId","data-v-8eccfa2c"]]);export{q as default};
