System.register(["./index-legacy245.js?v=1758532619827","./public-legacy.js?v=1758532619827","./index-legacy168.js?v=1758532619827","./page_layout-legacy.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./site-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827"],(function(e,a){"use strict";var n,t,l,s,i,o,r,d,u,p,c,m,v,_,x,y,b,h,g,f,w,P,A,D,k,C,$,j,S,U,q,z,F,I,B,H,M,E,O,X,L,N,R,T,V,W,G,K,J,Q,Y;return{setters:[e=>{n=e._},e=>{t=e.a,l=e.b,s=e._,i=e.d},e=>{o=e._},e=>{r=e.t,d=e.cW,u=e.u,p=e.c,c=e.q,m=e.p,v=e.w,_=e.m,x=e.eC,y=e.eD,b=e.eE,h=e.eF,g=e.eG,f=e.eH,w=e.b,P=e.eI},e=>{A=e.aC,D=e.dV,k=e.d9,C=e.d5,$=e.d1,j=e.df,S=e.dP,U=e.dj,q=e.au},e=>{z=e.k,F=e.r,I=e.R,B=e.S,H=e.U,M=e.X,E=e.V,O=e.a2,X=e.a3,L=e.j,N=e.a4,R=e.P,T=e.e,V=e.aj,W=e.F,G=e.an,K=e.p,J=e.t},e=>{Q=e.au},e=>{Y=e._},null,null],execute:function(){var a=document.createElement("style");a.textContent=".access-btn[data-v-74c7a222]{padding:0 24px;--n-height: 40px;--n-border-radius: 4px;--n-color: var(--button-gray-color);--n-text-color: var(--color-text-2);--n-border: none;--n-color-hover: var(--color-primary);--n-border-hover: 1px solid var(--color-primary);--n-text-color-hover: #fff;--n-color-focus: var(--color-primary);--n-text-color-focus: #fff;--n-border-focus: 1px solid var(--color-primary)}.bg-recommend[data-v-74c7a222]{position:absolute;width:32px;height:32px;top:-1px;left:-1px;background-image:url(/static/vite/images/recommend.svg);background-repeat:no-repeat;background-position:center;background-size:contain}\n",document.head.appendChild(a);const Z=()=>r.post("/adminer_manager?action=get_status"),ee=e=>r.post("/adminer_manager?action=switch_status",e,{requestOptions:{loading:"正在设置状态中，请稍候...",successMessage:!0}}),ae=e=>r.post("/adminer_manager?action=install",e,{requestOptions:{loading:"正在安装中，请稍候...",successMessage:!0}}),ne={class:"p-4px"},te={class:"flex items-center h-40px mb-10px text-14px whitespace-pre-wrap"},le={class:"flex gap-10px"},se={class:"mt-20px"},ie={class:"flex gap-24px mt-20px"},oe=z({__name:"index",setup(e,{expose:a}){const n=u(),i=F(!1),m=F(!1),v=()=>{t({title:"Stop",content:"Are you sure you want to stop?",onConfirm:async()=>{await ee({act:0}),g()}})},_=()=>{t({title:"Start",content:"Are you sure you want to start?",onConfirm:async()=>{await ee({act:1}),g()}})},x=()=>{t({title:"Fixed",content:"Are you sure you want to fixed?",onConfirm:async()=>{await ae({version:"5.4.0"}),g()}})},y=()=>{t({title:"Uninstall",content:"Are you sure you want to uninstall?",onConfirm:async()=>{await r.post("/adminer_manager?action=uninstall",{},{requestOptions:{loading:"正在卸载中，请稍候...",successMessage:!0}}),g()}})},b=()=>{t({title:"Install",content:"Are you sure you want to install?",onConfirm:async()=>{await ae({version:"5.4.0"}),g()}})},h=()=>{n.isFree?l({source:160}):async function(e,a){const n=document.createElement("form");n.action=`${d()}/adminer/index.php?driver=&username=root`,n.method="post",n.target="_blank",n.style.display="none";const t=`\n\t\t<input type="text" name="auth[driver]" id="driver" value="pgsql" size="24" />\n\t\t<input type="text" name="auth[username]" id="username" value="${e}" size="24" />\n\t\t<input type="password" name="auth[password]" id="password" value="${a}" size="24" />\n\t\t<input type="text" name="auth[db]" id="db" value="" size="24" />\n\t\t<input type="text" name="auth[server]" id="server" value="" size="24" />\n\t`;n.innerHTML=t,document.body.appendChild(n),n.submit(),document.body.removeChild(n)}("postgres","eNXimnKei2XweWHe")},g=async()=>{const{message:e}=await Z();p(e)&&(i.value=1===e.install,m.value=1===e.running)};return g(),a({init:g}),(e,a)=>{const n=o,t=A,l=c,r=s;return I(),B("div",ne,[H("div",te,[a[1]||(a[1]=H("span",null,"Current Status: ",-1)),M(n,{value:E(m)},null,8,["value"])]),H("div",le,[E(m)?(I(),O(t,{key:0,onClick:v},{default:X((()=>a[2]||(a[2]=[L("Stop")]))),_:1,__:[2]})):(I(),O(t,{key:1,onClick:_},{default:X((()=>a[3]||(a[3]=[L("Start")]))),_:1,__:[3]})),M(t,{onClick:x},{default:X((()=>a[4]||(a[4]=[L("Fixed")]))),_:1,__:[4]}),E(i)?(I(),O(t,{key:2,onClick:y},{default:X((()=>a[5]||(a[5]=[L("Uninstall")]))),_:1,__:[5]})):(I(),O(t,{key:3,onClick:b},{default:X((()=>a[6]||(a[6]=[L("Install")]))),_:1,__:[6]}))]),H("div",se,[M(l,{dashed:""})]),H("div",ie,[M(t,{class:"access-btn",onClick:h},{default:X((()=>[H("span",null,N(e.$t("Database.PhpAdmin.index_11")),1),a[7]||(a[7]=H("span",{class:"bg-recommend"},null,-1))])),_:1,__:[7]}),M(t,{class:"access-btn",onClick:a[0]||(a[0]=e=>(async()=>{window.open(`${d()}/adminer/index.php`)})())},{default:X((()=>[L(N(e.$t("Database.PhpAdmin.index_6")),1)])),_:1})]),M(r,{class:"mt-16px"},{default:X((()=>[H("li",null,N(e.$t("Database.PhpAdmin.index_7")),1)])),_:1})])}}}),re=m(oe,[["__scopeId","data-v-74c7a222"]]),de={class:"w-160px"},ue=z({__name:"index",setup(e,{expose:a}){const{t:n}=R(),t=T({php_version:null}),l=F([]),{loading:s,setLoading:o}=i(),r=async()=>{try{o(!0);const[e,a]=await Promise.all([Q(),Z()]),{message:n}=e;v(n)&&(l.value=n.map((e=>({label:e.name,value:e.version})))),console.log(a)}finally{o(!1)}},d=async()=>{const e=t.php_version;null!==e?(await x({phpversion:e}),r()):_.error(n("Database.PhpAdmin.index_32"))};return r(),a({init:r}),(e,a)=>{const n=D,i=A,o=k;return I(),B("div",null,[M(o,{class:"items-center"},{default:X((()=>[H("span",null,N(e.$t("Database.PhpAdmin.index_31")),1),H("div",de,[M(n,{value:E(t).php_version,"onUpdate:value":a[0]||(a[0]=e=>E(t).php_version=e),loading:E(s),options:E(l)},null,8,["value","loading","options"])]),M(i,{type:"primary",onClick:d},{default:X((()=>[L(N(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])}}}),pe={class:"p-4px"},ce={class:"w-142px mr-8px"},me={class:"w-142px mr-8px"},ve={class:"w-240px"},_e={class:"w-240px"},xe={class:"w-240px"},ye=z({__name:"index",setup(e,{expose:a}){const{t:n}=R(),l=F(null),i=F(!1),o=F(null),r=F(!1);let d=!1;const u=T({username:"",password:"",repass:""}),p=async()=>{const e=l.value;null!==e?(await y({port:e}),z()):_.error(n("Database.PhpAdmin.index_25"))},m=async e=>{await b({v:e?1:0}),K()},v=async()=>{const e=o.value;null!==e?(await h({port:e}),K()):_.error(n("Database.PhpAdmin.index_26"))},x=e=>{!e&&d?t({title:n("Public.Confirm.Title"),content:n("Database.PhpAdmin.index_27"),onConfirm:async()=>{await g(),z()}}):r.value=e},D=async()=>{""!==u.password.trim()&&""!==u.username.trim()?u.password.length<3||u.username.length<3?_.error(n("Database.PhpAdmin.index_29")):u.password===u.repass?(await f({username:u.username,password:u.password}),z()):_.error(n("Database.PhpAdmin.index_30")):_.error(n("Database.PhpAdmin.index_28"))},k=F(!1),z=async()=>{try{k.value=!0;const{message:e}=await w({sName:"phpmyadmin"}),a=C(e,"ext.port",null);l.value=a?$(a):null,r.value=C(e,"ext.auth",!1),d=r.value}finally{k.value=!1}},O=F(!1),K=async()=>{try{O.value=!0;const{message:e}=await P();i.value=C(e,"status",!1);const a=C(e,"port",null);o.value=a?$(a):null}finally{O.value=!1}},J=()=>{Promise.all([z(),K()])};return J(),a({init:J}),(e,a)=>{const n=j,t=A,d=S,_=c,y=U,b=q,h=s,g=Y;return I(),B("div",pe,[M(g,{"label-width":"160"},{default:X((()=>[M(d,{label:e.$t("Database.PhpAdmin.index_16")},{default:X((()=>[H("div",ce,[M(n,{value:E(l),"onUpdate:value":a[0]||(a[0]=e=>V(l)?l.value=e:null),min:0,max:66325,"show-button":!1,loading:E(k),placeholder:""},null,8,["value","loading"])]),M(t,{type:"primary",onClick:p},{default:X((()=>[L(N(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1},8,["label"]),M(_,{dashed:""}),M(d,{class:"mt-20px",label:e.$t("Database.PhpAdmin.index_17")},{default:X((()=>[M(y,{value:E(i),loading:E(O),"onUpdate:value":m},null,8,["value","loading"])])),_:1},8,["label"]),M(d,{label:e.$t("Database.PhpAdmin.index_18")},{default:X((()=>[H("div",me,[M(n,{value:E(o),"onUpdate:value":a[1]||(a[1]=e=>V(o)?o.value=e:null),min:0,max:66325,"show-button":!1,loading:E(O),placeholder:""},null,8,["value","loading"])]),M(t,{type:"primary",onClick:v},{default:X((()=>[L(N(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1},8,["label"]),M(_,{dashed:""}),M(d,{class:"mt-20px",label:e.$t("Database.PhpAdmin.index_19")},{default:X((()=>[M(y,{value:E(r),loading:E(k),"onUpdate:value":x},null,8,["value","loading"])])),_:1},8,["label"]),E(r)?(I(),B(W,{key:0},[M(d,{label:e.$t("Database.PhpAdmin.index_20")},{default:X((()=>[H("div",ve,[M(b,{value:E(u).username,"onUpdate:value":a[2]||(a[2]=e=>E(u).username=e),placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),M(d,{label:e.$t("Database.PhpAdmin.index_21")},{default:X((()=>[H("div",_e,[M(b,{value:E(u).password,"onUpdate:value":a[3]||(a[3]=e=>E(u).password=e),type:"password",placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),M(d,{label:e.$t("Database.PhpAdmin.index_22")},{default:X((()=>[H("div",xe,[M(b,{value:E(u).repass,"onUpdate:value":a[4]||(a[4]=e=>E(u).repass=e),type:"password",placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),M(d,{label:" "},{default:X((()=>[M(t,{type:"primary",onClick:D},{default:X((()=>[L(N(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})],64)):G("",!0),M(h,null,{default:X((()=>[H("li",null,N(e.$t("Database.PhpAdmin.index_24")),1)])),_:1})])),_:1})])}}}),be=Symbol("php-admin"),he={class:"h-580px"};e("default",z({__name:"index",props:{row:{default:void 0}},setup(e){const a=J(e,"row"),{t:t}=R(),l=F("service"),s=[{key:"service",label:t("Database.PhpAdmin.index_1"),component:re},{key:"php",label:t("Database.PhpAdmin.index_2"),component:ue},{key:"safe",label:t("Database.PhpAdmin.index_3"),component:ye}];return K(be,{mysqlInfo:a}),(e,a)=>{const t=n;return I(),B("div",he,[M(t,{value:E(l),"onUpdate:value":a[0]||(a[0]=e=>V(l)?l.value=e:null),ref:"tabsRef",data:s},null,8,["value"])])}}}))}}}));
