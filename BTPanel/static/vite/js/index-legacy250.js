System.register(["./index-legacy108.js?v=1758532619827","./index-legacy133.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1758532619827","./page_layout-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./index-legacy87.js?v=1758532619827","./public-legacy.js?v=1758532619827","./domain-input-legacy.js?v=1758532619827","./site-legacy.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy17.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1758532619827","./upload-legacy.js?v=1758532619827","./task-view.vue_vue_type_script_setup_true_lang-legacy.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827","./index-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1758532619827","./site-legacy4.js?v=1758532619827","./soft-legacy.js?v=1758532619827","./index-legacy245.js?v=1758532619827","./index-legacy99.js?v=1758532619827","./index-legacy100.js?v=1758532619827","./index-legacy101.js?v=1758532619827","./file-legacy.js?v=1758532619827","./theme-monokai-legacy.js?v=1758532619827","./refersh-legacy.js?v=1758532619827","./php-legacy.js?v=1758532619827","./index-legacy105.js?v=1758532619827","./ssl-legacy.js?v=1758532619827","./cert-legacy.js?v=1758532619827","./utils-legacy3.js?v=1758532619827","./index-legacy218.js?v=1758532619827","./paypal-js-legacy.js?v=1758532619827","./ssl-lets-progress-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy15.js?v=1758532619827","./index-legacy98.js?v=1758532619827"],(function(e,l){"use strict";var a,t,n,i,r,u,d,s,o,_,p,c,v,m,g,b,h,f,x,y,w,k,S,$,j,P,L,E,U,R,W,A,q,C,V,z,B,D,H,F,M,I,N,T,J,O,Q,X,Y,Z,G,K,ee,le,ae,te,ne,ie,re,ue;return{setters:[e=>{a=e._},e=>{t=e._},e=>{n=e._},e=>{i=e.w,r=e.g,u=e.f,d=e.c,s=e.o,o=e._,_=e.m},e=>{p=e.k,c=e.a0,v=e.ae,m=e.r,g=e.R,b=e.a2,h=e.V,f=e.n,x=e.w,y=e.c,w=e.P,k=e.e,S=e.a3,$=e.U,j=e.a4,P=e.j,L=e.an,E=e.S,U=e.X,R=e.l,W=e.aj,A=e.v},e=>{q=e.u,C=e.g,V=e.a,z=e.c,B=e.b,D=e.d},e=>{H=e.d,F=e.m,M=e._},e=>{I=e.D},e=>{N=e.au},e=>{T=e.dV,J=e.dU,O=e.dT,Q=e.dP,X=e.au,Y=e.d8,Z=e.d9,G=e._,K=e.dj,ee=e.dZ,le=e.aC,ae=e.dY,te=e.az},e=>{ne=e._},e=>{ie=e._},e=>{re=e.o},e=>{ue=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l=p({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const l=q(),{phpVersion:a}=c(l),t=v(e,"value"),{loading:n,setLoading:r}=H(),u=m([]),d=e=>{a.value=e};return(async()=>{try{r(!0);const{message:e}=await N(),l=i(e)?e:[];u.value=l.reverse().filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),await f(),l.length>0&&(t.value="00"==l[0].version?"":l[0].version,a.value="00"==l[0].version?"":l[0].version)}finally{r(!1)}})(),(e,l)=>{const a=T;return g(),b(a,{value:t.value,"onUpdate:value":[l[0]||(l[0]=e=>t.value=e),d],loading:h(n),options:h(u)},null,8,["value","loading","options"])}}}),de=p({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const l=q();x((()=>l.phpVersion),(e=>{d(e)}));const a=y((()=>l.phpVersion?"Not supported by current PHP":"Please select PHP version")),t=v(e,"value"),{loading:n,setLoading:r}=H(),u=m([]),d=async e=>{try{r(!0),t.value="";const{message:l}=await C({php_version_short:e});i(l)&&(u.value=l.map((e=>({label:e.version,value:e.version}))),await f(),l.length>0&&(t.value=l[0].version))}finally{r(!1)}};return l.phpVersion&&d(l.phpVersion),(e,l)=>{const i=T;return g(),b(i,{value:t.value,"onUpdate:value":l[0]||(l[0]=e=>t.value=e),loading:h(n),options:h(u),placeholder:h(a)},null,8,["value","loading","options","placeholder"])}}}),se={key:1},oe={class:"w-400px"},_e={class:"w-400px"},pe={class:"w-230px"},ce={class:"w-230px"},ve={class:"w-400px"},me={class:"w-230px mr-16px"},ge={class:"w-400px"},be={class:"w-400px"},he=p({__name:"index",props:{getList:{type:Function}},setup(e,{expose:a}){const i=e,{t:p}=w(),v=q(),{web:f,mysql:x,php:y}=c(v),C=m(null),z=m(null),B=m([]),D=k({type:0,domain_auto:[""],domain:"",weblog_title:"",language:"en",php_version:null,wp_version:null,user_name:r(6),admin_password:u(16,"wp"),pw_weak:!1,admin_email:"",Login_url:"wp-admin",redirection_url:"404",prefix:"wp_"+r(6)+"_",enable_cache:!1,wps:!1,is_create_default_file:!0}),H={domain:{required:!0,trigger:["blur","input"],validator:()=>0!==D.type||""!==D.domain.trim()||new Error(p("Site.RulesError.index_31"))},domain_auto:{trigger:["blur"],validator:(e,l)=>!(1===D.type&&!l[0])||new Error(p("Site.PHP.add_site_23"))},weblog_title:{required:!0,trigger:["blur","input"],validator:()=>""!==D.weblog_title.trim()||new Error(p("Site.RulesError.index_3"))},language:{trigger:"change",validator:()=>null!==D.language||new Error(p("Site.RulesError.index_4"))},php_version:{trigger:"change",validator:()=>null!==D.php_version||new Error(p("Site.RulesError.index_5"))},wp_version:{trigger:"change",validator:()=>null!==D.php_version||new Error(p("Site.RulesError.index_6"))},user_name:{required:!0,trigger:["blur","input"],validator:()=>""!==D.user_name.trim()||new Error(p("Site.RulesError.index_7"))},admin_password:{required:!0,trigger:["blur","input"],validator:()=>""!==D.admin_password.trim()||new Error(p("Site.RulesError.index_8"))},admin_email:{required:!0,trigger:["blur","input"],validator:()=>""!==D.admin_email.trim()||new Error(p("Site.RulesError.index_9"))},redirection_url:{required:!0,trigger:["blur","input"],validator:()=>""!==D.redirection_url.trim()||new Error(p("Site.RulesError.index_12"))},Login_url:{required:!0,trigger:["blur","input"],validator:()=>""!==D.Login_url.trim()||new Error(p("Site.RulesError.index_11"))},prefix:{required:!0,trigger:["blur","input"],validator:()=>""!==D.prefix.trim()||new Error(p("Site.RulesError.index_10"))}},M=e=>{if(C.value?.restoreValidation(),!e)return void(D.domain=D.domain_auto[0]);const l=D.domain.trim();l!==D.domain_auto[0]&&(D.domain_auto=l?[l]:[""],D.domain_auto.forEach(((e,l)=>z.value?.onDomainItemBlur(e,l))))},N=()=>{const{domain:e,php_version:l}=D,a=e.replace(new RegExp(/([-.])/g),"_");if(null===l)throw _.error(p("Site.RulesError.index_5")),new Error(p("Site.RulesError.index_5"));const t=B.value.map((e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]})));return{webname:{domain:e,domainlist:[],count:0},type:"PHP",port:80,type_id:0,ftp:!1,sql:"MySQL",codeing:"utf8",set_ssl:0,force_ssl:0,project_type:"WP",path:v.sitePath+"/"+(0===D.type?e:D.domain_auto[0]),ps:a,version:l,datauser:"sql_"+a,datapassword:r(16),password:D.admin_password,pw_weak:D.pw_weak?"on":"off",email:D.admin_email,weblog_title:D.weblog_title,language:D.language,user_name:D.user_name,prefix:D.prefix,enable_cache:D.enable_cache?1:0,enable_whl:0,whl_page:D.Login_url?D.Login_url:null,whl_redirect_admin:D.redirection_url?D.redirection_url:null,package_version:D.wp_version,wp_parse_list:1===D.type&&t.length?JSON.stringify(t):null,is_create_default_file:D.is_create_default_file}},T=()=>new Promise(((e,l)=>{0===B.value.filter((e=>e.support.includes("auto"))).length&&1===D.type?(_.error("This domain does not support automatic resolution, please choose manual resolution"),l(!1)):e(!0)}));return a({onConfirm:async()=>{await T(),await(C.value?.validate());const{message:e}=await V(N());d(e)&&i.getList()}}),(e,a)=>{const i=s,r=J,u=O,d=o,_=Q,p=X,c=Y,v=Z,m=G,w=K,k=n,q=t;return g(),b(q,{install:h(x).setup&&h(y).setup},{desc:S((()=>[$("span",null,j(e.$t("WP.index_6")),1),h(y).setup?L("",!0):(g(),b(i,{key:0,class:"ml-4px",onClick:a[0]||(a[0]=e=>h(F)("php-8.0"))},{default:S((()=>[P(j(e.$t("WP.index_7")),1)])),_:1})),h(x).setup?L("",!0):(g(),E("span",se,[a[17]||(a[17]=$("span",{class:"mx-4px"},"|",-1)),U(i,{onClick:a[1]||(a[1]=e=>h(F)("mysql"))},{default:S((()=>[P(j(e.$t("WP.index_8")),1)])),_:1})]))])),default:S((()=>[U(k,{ref_key:"formRef",ref:C,model:h(D),rules:H},{default:S((()=>[U(_,{label:e.$t("SSL.index_1")},{default:S((()=>[U(u,{value:h(D).type,"onUpdate:value":[a[2]||(a[2]=e=>h(D).type=e),M]},{default:S((()=>[U(r,{value:0},{default:S((()=>[P(j(e.$t("SSL.index_2")),1)])),_:1}),U(r,{value:1},{default:S((()=>[P(j(e.$t("SSL.index_3")),1)])),_:1})])),_:1},8,["value"]),U(d,{name:"ssl-stars",size:22})])),_:1},8,["label"]),R(U(_,{label:e.$t("Site.Lable.index_1"),path:"domain_auto"},{default:S((()=>[U(I,{ref_key:"domainInputRef",ref:z,value:h(D).domain_auto,"onUpdate:value":a[3]||(a[3]=e=>h(D).domain_auto=e),"parse-list":h(B),"onUpdate:parseList":a[4]||(a[4]=e=>W(B)?B.value=e:null),is_wp:""},null,8,["value","parse-list"])])),_:1},8,["label"]),[[A,1===h(D).type]]),R(U(_,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:S((()=>[$("div",oe,[U(p,{value:h(D).domain,"onUpdate:value":a[5]||(a[5]=e=>h(D).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),[[A,0===h(D).type]]),U(_,{label:e.$t("Site.Lable.index_20"),path:"weblog_title"},{default:S((()=>[$("div",_e,[U(p,{value:h(D).weblog_title,"onUpdate:value":a[6]||(a[6]=e=>h(D).weblog_title=e),placeholder:e.$t("Site.Placeholder.index_13")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(_,{label:e.$t("Site.Lable.index_21"),path:"language"},{default:S((()=>[$("div",pe,[U(ne,{value:h(D).language,"onUpdate:value":a[7]||(a[7]=e=>h(D).language=e)},null,8,["value"])])])),_:1},8,["label"]),U(_,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:S((()=>[$("div",ce,[U(l,{value:h(D).php_version,"onUpdate:value":a[8]||(a[8]=e=>h(D).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),U(_,{label:e.$t("Site.Lable.index_23"),path:"wp_version"},{default:S((()=>[U(v,{class:"items-center",size:8},{default:S((()=>[U(de,{value:h(D).wp_version,"onUpdate:value":a[9]||(a[9]=e=>h(D).wp_version=e),class:"w-230px"},null,8,["value"]),U(c,{trigger:"hover"},{trigger:S((()=>[U(d,{name:"common-ask",size:"18",color:"#999"})])),default:S((()=>[P(" "+j(e.$t("WP.Add.index_8")),1)])),_:1})])),_:1})])),_:1},8,["label"]),U(_,{label:e.$t("Site.Lable.index_24"),path:"user_name"},{default:S((()=>[$("div",ve,[U(p,{value:h(D).user_name,"onUpdate:value":a[10]||(a[10]=e=>h(D).user_name=e),placeholder:e.$t("Site.Placeholder.index_14")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(_,{label:e.$t("Site.Lable.index_27"),path:"admin_password"},{default:S((()=>[$("div",me,[U(p,{value:h(D).admin_password,"onUpdate:value":a[11]||(a[11]=e=>h(D).admin_password=e),placeholder:e.$t("Site.Placeholder.index_15")},null,8,["value","placeholder"])]),U(m,{checked:h(D).pw_weak,"onUpdate:checked":a[12]||(a[12]=e=>h(D).pw_weak=e)},{default:S((()=>[$("span",null,j(e.$t("WP.Add.index_9")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),U(_,{label:e.$t("Site.Lable.index_28"),path:"admin_email"},{default:S((()=>[$("div",ge,[U(p,{value:h(D).admin_email,"onUpdate:value":a[13]||(a[13]=e=>h(D).admin_email=e),placeholder:e.$t("Site.Placeholder.index_16")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(_,{label:e.$t("Site.Lable.index_29"),path:"prefix"},{default:S((()=>[$("div",be,[U(p,{value:h(D).prefix,"onUpdate:value":a[14]||(a[14]=e=>h(D).prefix=e),placeholder:e.$t("Site.Placeholder.index_17")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(_,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:S((()=>[U(m,{checked:h(D).enable_cache,"onUpdate:checked":a[15]||(a[15]=e=>h(D).enable_cache=e),disabled:"nginx"!==h(f).type},{default:S((()=>[$("span",null,j(e.$t("WP.Add.index_10")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"]),U(_,{label:e.$t("SSL.SiteSSL.index_18")},{default:S((()=>[U(w,{value:h(D).is_create_default_file,"onUpdate:value":a[16]||(a[16]=e=>h(D).is_create_default_file=e)},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["install"])}}}),fe={key:1},xe={class:"w-302px ml-12px"},ye={class:"w-302px ml-12px"},we={class:"w-400px"},ke={class:"w-230px"},Se=p({__name:"index",props:{getList:{type:Function}},setup(e,{expose:a}){const{t:i}=w(),r=q(),{web:u,mysql:d,php:o}=c(r),_=e,p=m(null),v=m(null),f=m(null),x=k({method:1,bak_file:"",domain:"",sub_path:"",php_version:null,enable_cache:!1,db_bak_file:""}),R={bak_file:{trigger:["blur","input"],validator:()=>""!==x.bak_file.trim()||new Error(i("WP.Add.import_6"))},domain:{trigger:["blur","input"],validator:()=>""!==x.domain.trim()||new Error(i("Site.RulesError.index_31"))},php_version:{trigger:"change",validator:()=>null!==x.php_version||new Error(i("Site.RulesError.index_5"))},db_bak_file:{trigger:["blur","input"],validator:()=>""!==x.db_bak_file.trim()||new Error(i("WP.Add.import_6"))}},A=y((()=>x.domain?`/${x.domain}/`:"/")),C=e=>{const l="/www/server/panel/temp";re({path:l,uploadData:{multiple:!1},onUploadSuccess:a=>{"wp"===e?(x.bak_file=`${l}/${a[0].name}`,V()):"db"===e&&(x.db_bak_file=`${l}/${a[0].name}`,H())}})},V=()=>{v.value?.restoreValidation()},H=()=>{f.value?.restoreValidation()};return a({onConfirm:async()=>{await(p.value?.validate());const e=3===x.method?{db_bak_file:x.db_bak_file,bak_file:x.bak_file,domain:x.domain,sub_path:x.sub_path,php_ver_short:x.php_version||"",enable_cache:x.enable_cache?1:0}:{bak_file:x.bak_file,domain:x.domain,sub_path:x.sub_path,php_ver_short:x.php_version||"",enable_cache:x.enable_cache?1:0};1===x.method?await z(e):2===x.method?await B(e):3===x.method&&await D(e),_.getList()}}),(e,a)=>{const i=s,_=ee,c=O,m=Q,y=le,w=ie,k=X,q=ae,z=te,B=G,D=n,I=M,N=t;return g(),b(N,{install:h(d).setup&&h(o).setup},{desc:S((()=>[$("span",null,j(e.$t("WP.index_6")),1),h(o).setup?L("",!0):(g(),b(i,{key:0,class:"ml-4px",onClick:a[0]||(a[0]=e=>h(F)("php-8.0"))},{default:S((()=>[P(j(e.$t("WP.index_7")),1)])),_:1})),h(d).setup?L("",!0):(g(),E("span",fe,[a[12]||(a[12]=$("span",{class:"mx-4px"},"|",-1)),U(i,{onClick:a[1]||(a[1]=e=>h(F)("mysql"))},{default:S((()=>[P(j(e.$t("WP.index_8")),1)])),_:1})]))])),default:S((()=>[U(D,{ref_key:"formRef",ref:p,modelValue:h(x),"onUpdate:modelValue":a[11]||(a[11]=e=>W(x)?x.value=e:null),rules:R},{default:S((()=>[U(m,{label:e.$t("WP.Add.import_1")},{default:S((()=>[U(c,{value:h(x).method,"onUpdate:value":a[2]||(a[2]=e=>h(x).method=e)},{default:S((()=>[U(_,{label:e.$t("WP.Add.import_2"),value:1},null,8,["label"]),U(_,{label:e.$t("WP.Add.import_3"),value:2},null,8,["label"]),U(_,{label:"Manual Backup",value:3})])),_:1},8,["value"])])),_:1},8,["label"]),U(m,{ref_key:"bakFileRef",ref:v,label:"WP backup file",path:"bak_file"},{default:S((()=>[U(y,{onClick:a[3]||(a[3]=e=>C("wp"))},{default:S((()=>[P(j(e.$t("Docker.App.Backup.index_3")),1)])),_:1}),$("div",xe,[U(w,{value:h(x).bak_file,"onUpdate:value":a[4]||(a[4]=e=>h(x).bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:V},null,8,["value"])])])),_:1},512),3===h(x).method?(g(),b(m,{key:0,ref_key:"dbBakFileRef",ref:f,label:"DB backup file",path:"db_bak_file"},{default:S((()=>[U(y,{onClick:a[5]||(a[5]=e=>C("db"))},{default:S((()=>[P(j(e.$t("Docker.App.Backup.index_3")),1)])),_:1}),$("div",ye,[U(w,{value:h(x).db_bak_file,"onUpdate:value":a[6]||(a[6]=e=>h(x).db_bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:H},null,8,["value"])])])),_:1},512)):L("",!0),U(m,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:S((()=>[$("div",we,[U(k,{value:h(x).domain,"onUpdate:value":a[7]||(a[7]=e=>h(x).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(m,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:S((()=>[U(z,{class:"w-400px"},{default:S((()=>[U(q,null,{default:S((()=>[P(j(h(r).sitePath)+j(h(A)),1)])),_:1}),U(k,{value:h(x).sub_path,"onUpdate:value":a[8]||(a[8]=e=>h(x).sub_path=e),placeholder:e.$t("WP.Add.import_5")},null,8,["value","placeholder"])])),_:1})])),_:1},8,["label"]),U(m,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:S((()=>[$("div",ke,[U(l,{value:h(x).php_version,"onUpdate:value":a[9]||(a[9]=e=>h(x).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),U(m,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:S((()=>[U(B,{checked:h(x).enable_cache,"onUpdate:checked":a[10]||(a[10]=e=>h(x).enable_cache=e),disabled:"nginx"!==h(u).type},{default:S((()=>[P(j(e.$t("WP.Add.index_10")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"])])),_:1},8,["modelValue"]),3===h(x).method?(g(),b(I,{key:0},{default:S((()=>a[13]||(a[13]=[$("li",null," Manual backup deployment relies on the wp-config.php file, please ensure that it exists and is configured correctly. ",-1)]))),_:1,__:[13]})):L("",!0)])),_:1},8,["install"])}}}),$e={class:"p-20px h-full"};e("default",p({__name:"index",props:{done:{type:Function}},setup(e,{expose:l}){const{t:t}=w(),n=e,i=m("single"),r=m(),u=[{key:"single",label:t("WP.Add.index_1"),isLazy:!0,component:he,data:{getList:n.done}},{key:"import",label:t("WP.Add.index_2"),isLazy:!0,component:Se,data:{getList:n.done}}];return l({onConfirm:async()=>{await(r.value?.onConfirm())}}),(e,l)=>{const t=a;return g(),b(ue,{title:e.$t("WP.Add.index_7"),params:"backup_deploy"},{default:S((()=>[$("div",$e,[U(t,{ref_key:"tabsRef",ref:r,value:h(i),"onUpdate:value":l[0]||(l[0]=e=>W(i)?i.value=e:null),options:u},null,8,["value"])])])),_:1},8,["title"])}}}))}}}));
