import{_ as a}from"./index245.js?v=1758532619827";import{a as e,b as t,_ as n,d as s}from"./public.js?v=1758532619827";import{_ as l}from"./index168.js?v=1758532619827";import{t as i,cW as o,u as d,c as u,q as p,p as r,w as c,m,eC as _,eD as v,eE as x,eF as b,eG as y,eH as h,b as f,eI as w}from"./page_layout.js?v=1758532619827";import{aC as g,dV as P,d9 as A,d5 as D,d1 as C,df as k,dP as $,dj as j,au as U}from"./naive.js?v=1758532619827";import{k as S,r as q,R as z,S as F,U as I,X as B,V as H,a2 as M,a3 as O,j as X,a4 as E,P as L,e as N,aj as R,F as T,an as V,p as W,t as G}from"./vue.js?v=1758532619827";import{au as K}from"./site.js?v=1758532619827";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang.js?v=1758532619827";import"./common.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";const Q=()=>i.post("/adminer_manager?action=get_status"),Y=a=>i.post("/adminer_manager?action=switch_status",a,{requestOptions:{loading:"正在设置状态中，请稍候...",successMessage:!0}}),Z=a=>i.post("/adminer_manager?action=install",a,{requestOptions:{loading:"正在安装中，请稍候...",successMessage:!0}});const aa={class:"p-4px"},ea={class:"flex items-center h-40px mb-10px text-14px whitespace-pre-wrap"},ta={class:"flex gap-10px"},na={class:"mt-20px"},sa={class:"flex gap-24px mt-20px"},la=r(S({__name:"index",setup(a,{expose:s}){const r=d(),c=q(!1),m=q(!1),_=()=>{e({title:"Stop",content:"Are you sure you want to stop?",onConfirm:async()=>{await Y({act:0}),f()}})},v=()=>{e({title:"Start",content:"Are you sure you want to start?",onConfirm:async()=>{await Y({act:1}),f()}})},x=()=>{e({title:"Fixed",content:"Are you sure you want to fixed?",onConfirm:async()=>{await Z({version:"5.4.0"}),f()}})},b=()=>{e({title:"Uninstall",content:"Are you sure you want to uninstall?",onConfirm:async()=>{await i.post("/adminer_manager?action=uninstall",{},{requestOptions:{loading:"正在卸载中，请稍候...",successMessage:!0}}),f()}})},y=()=>{e({title:"Install",content:"Are you sure you want to install?",onConfirm:async()=>{await Z({version:"5.4.0"}),f()}})},h=()=>{r.isFree?t({source:160}):async function(a,e){const t=document.createElement("form");t.action="".concat(o(),"/adminer/index.php?driver=&username=root"),t.method="post",t.target="_blank",t.style.display="none";const n='\n\t\t<input type="text" name="auth[driver]" id="driver" value="pgsql" size="24" />\n\t\t<input type="text" name="auth[username]" id="username" value="'.concat(a,'" size="24" />\n\t\t<input type="password" name="auth[password]" id="password" value="').concat(e,'" size="24" />\n\t\t<input type="text" name="auth[db]" id="db" value="" size="24" />\n\t\t<input type="text" name="auth[server]" id="server" value="" size="24" />\n\t');t.innerHTML=n,document.body.appendChild(t),t.submit(),document.body.removeChild(t)}("postgres","eNXimnKei2XweWHe")},f=async()=>{const{message:a}=await Q();u(a)&&(c.value=1===a.install,m.value=1===a.running)};return f(),s({init:f}),(a,e)=>{const t=l,s=g,i=p,d=n;return z(),F("div",aa,[I("div",ea,[e[1]||(e[1]=I("span",null,"Current Status: ",-1)),B(t,{value:H(m)},null,8,["value"])]),I("div",ta,[H(m)?(z(),M(s,{key:0,onClick:_},{default:O((()=>e[2]||(e[2]=[X("Stop")]))),_:1,__:[2]})):(z(),M(s,{key:1,onClick:v},{default:O((()=>e[3]||(e[3]=[X("Start")]))),_:1,__:[3]})),B(s,{onClick:x},{default:O((()=>e[4]||(e[4]=[X("Fixed")]))),_:1,__:[4]}),H(c)?(z(),M(s,{key:2,onClick:b},{default:O((()=>e[5]||(e[5]=[X("Uninstall")]))),_:1,__:[5]})):(z(),M(s,{key:3,onClick:y},{default:O((()=>e[6]||(e[6]=[X("Install")]))),_:1,__:[6]}))]),I("div",na,[B(i,{dashed:""})]),I("div",sa,[B(s,{class:"access-btn",onClick:h},{default:O((()=>[I("span",null,E(a.$t("Database.PhpAdmin.index_11")),1),e[7]||(e[7]=I("span",{class:"bg-recommend"},null,-1))])),_:1,__:[7]}),B(s,{class:"access-btn",onClick:e[0]||(e[0]=a=>(async()=>{window.open("".concat(o(),"/adminer/index.php"))})())},{default:O((()=>[X(E(a.$t("Database.PhpAdmin.index_6")),1)])),_:1})]),B(d,{class:"mt-16px"},{default:O((()=>[I("li",null,E(a.$t("Database.PhpAdmin.index_7")),1)])),_:1})])}}}),[["__scopeId","data-v-74c7a222"]]),ia={class:"w-160px"},oa=S({__name:"index",setup(a,{expose:e}){const{t:t}=L(),n=N({php_version:null}),l=q([]),{loading:i,setLoading:o}=s(),d=async()=>{try{o(!0);const[a,e]=await Promise.all([K(),Q()]),{message:t}=a;c(t)&&(l.value=t.map((a=>({label:a.name,value:a.version})))),console.log(e)}finally{o(!1)}},u=async()=>{const a=n.php_version;null!==a?(await _({phpversion:a}),d()):m.error(t("Database.PhpAdmin.index_32"))};return d(),e({init:d}),(a,e)=>{const t=P,s=g,o=A;return z(),F("div",null,[B(o,{class:"items-center"},{default:O((()=>[I("span",null,E(a.$t("Database.PhpAdmin.index_31")),1),I("div",ia,[B(t,{value:H(n).php_version,"onUpdate:value":e[0]||(e[0]=a=>H(n).php_version=a),loading:H(i),options:H(l)},null,8,["value","loading","options"])]),B(s,{type:"primary",onClick:u},{default:O((()=>[X(E(a.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])}}}),da={class:"p-4px"},ua={class:"w-142px mr-8px"},pa={class:"w-142px mr-8px"},ra={class:"w-240px"},ca={class:"w-240px"},ma={class:"w-240px"},_a=S({__name:"index",setup(a,{expose:t}){const{t:s}=L(),l=q(null),i=q(!1),o=q(null),d=q(!1);let u=!1;const r=N({username:"",password:"",repass:""}),c=async()=>{const a=l.value;null!==a?(await v({port:a}),W()):m.error(s("Database.PhpAdmin.index_25"))},_=async a=>{await x({v:a?1:0}),K()},P=async()=>{const a=o.value;null!==a?(await b({port:a}),K()):m.error(s("Database.PhpAdmin.index_26"))},A=a=>{!a&&u?e({title:s("Public.Confirm.Title"),content:s("Database.PhpAdmin.index_27"),onConfirm:async()=>{await y(),W()}}):d.value=a},S=async()=>{""!==r.password.trim()&&""!==r.username.trim()?r.password.length<3||r.username.length<3?m.error(s("Database.PhpAdmin.index_29")):r.password===r.repass?(await h({username:r.username,password:r.password}),W()):m.error(s("Database.PhpAdmin.index_30")):m.error(s("Database.PhpAdmin.index_28"))},M=q(!1),W=async()=>{try{M.value=!0;const{message:a}=await f({sName:"phpmyadmin"}),e=D(a,"ext.port",null);l.value=e?C(e):null,d.value=D(a,"ext.auth",!1),u=d.value}finally{M.value=!1}},G=q(!1),K=async()=>{try{G.value=!0;const{message:a}=await w();i.value=D(a,"status",!1);const e=D(a,"port",null);o.value=e?C(e):null}finally{G.value=!1}},Q=()=>{Promise.all([W(),K()])};return Q(),t({init:Q}),(a,e)=>{const t=k,s=g,u=$,m=p,v=j,x=U,b=n,y=J;return z(),F("div",da,[B(y,{"label-width":"160"},{default:O((()=>[B(u,{label:a.$t("Database.PhpAdmin.index_16")},{default:O((()=>[I("div",ua,[B(t,{value:H(l),"onUpdate:value":e[0]||(e[0]=a=>R(l)?l.value=a:null),min:0,max:66325,"show-button":!1,loading:H(M),placeholder:""},null,8,["value","loading"])]),B(s,{type:"primary",onClick:c},{default:O((()=>[X(E(a.$t("Public.Btn.Save")),1)])),_:1})])),_:1},8,["label"]),B(m,{dashed:""}),B(u,{class:"mt-20px",label:a.$t("Database.PhpAdmin.index_17")},{default:O((()=>[B(v,{value:H(i),loading:H(G),"onUpdate:value":_},null,8,["value","loading"])])),_:1},8,["label"]),B(u,{label:a.$t("Database.PhpAdmin.index_18")},{default:O((()=>[I("div",pa,[B(t,{value:H(o),"onUpdate:value":e[1]||(e[1]=a=>R(o)?o.value=a:null),min:0,max:66325,"show-button":!1,loading:H(G),placeholder:""},null,8,["value","loading"])]),B(s,{type:"primary",onClick:P},{default:O((()=>[X(E(a.$t("Public.Btn.Save")),1)])),_:1})])),_:1},8,["label"]),B(m,{dashed:""}),B(u,{class:"mt-20px",label:a.$t("Database.PhpAdmin.index_19")},{default:O((()=>[B(v,{value:H(d),loading:H(M),"onUpdate:value":A},null,8,["value","loading"])])),_:1},8,["label"]),H(d)?(z(),F(T,{key:0},[B(u,{label:a.$t("Database.PhpAdmin.index_20")},{default:O((()=>[I("div",ra,[B(x,{value:H(r).username,"onUpdate:value":e[2]||(e[2]=a=>H(r).username=a),placeholder:a.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),B(u,{label:a.$t("Database.PhpAdmin.index_21")},{default:O((()=>[I("div",ca,[B(x,{value:H(r).password,"onUpdate:value":e[3]||(e[3]=a=>H(r).password=a),type:"password",placeholder:a.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),B(u,{label:a.$t("Database.PhpAdmin.index_22")},{default:O((()=>[I("div",ma,[B(x,{value:H(r).repass,"onUpdate:value":e[4]||(e[4]=a=>H(r).repass=a),type:"password",placeholder:a.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),B(u,{label:" "},{default:O((()=>[B(s,{type:"primary",onClick:S},{default:O((()=>[X(E(a.$t("Public.Btn.Save")),1)])),_:1})])),_:1})],64)):V("",!0),B(b,null,{default:O((()=>[I("li",null,E(a.$t("Database.PhpAdmin.index_24")),1)])),_:1})])),_:1})])}}}),va=Symbol("php-admin");const xa={class:"h-580px"},ba=S({__name:"index",props:{row:{default:void 0}},setup(e){const t=G(e,"row"),{t:n}=L(),s=q("service"),l=[{key:"service",label:n("Database.PhpAdmin.index_1"),component:la},{key:"php",label:n("Database.PhpAdmin.index_2"),component:oa},{key:"safe",label:n("Database.PhpAdmin.index_3"),component:_a}];return W(va,{mysqlInfo:t}),(e,t)=>{const n=a;return z(),F("div",xa,[B(n,{value:H(s),"onUpdate:value":t[0]||(t[0]=a=>R(s)?s.value=a:null),ref:"tabsRef",data:l},null,8,["value"])])}}});export{ba as default};
