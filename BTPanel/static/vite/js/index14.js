import{_ as a,a as e}from"./index107.js?v=1758532619827";import{P as n,a0 as o,N as i,k as t,ad as s,ae as l,c as g,r as c,R as _,S as u,U as m,a2 as p,V as r,a4 as f,q as d,X as v,a3 as b,aj as C,j as U,F as I,an as y}from"./vue.js?v=1758532619827";import{i as h,z as w,t as k,c as x,m as S,ba as B,bb as D,p as O,bc as j,q as R}from"./page_layout.js?v=1758532619827";import{a as $}from"./public.js?v=1758532619827";import{u as z}from"./file.js?v=1758532619827";import{bJ as q,aC as M,df as A,dj as F,dS as P}from"./naive.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";import"./common.js?v=1758532619827";const{t:L}=h.global,T={favicon:"/static/favicon.ico",show_login_logo:!0,show_login_bg_images:!1,login_logo:"/static/icons/logo-green.svg",login_bg_images:"",login_bg_images_opacity:100,show_main_bg_images:!0,main_bg_images:"/static/icons/main_bg.png",main_bg_images_dark:"/static/icons/main_bg_dark.png",main_bg_images_opacity:100,main_content_opacity:100,main_shadow_color:"#000000",main_shadow_opacity:5,menu_logo:"/static/icons/menu_logo.png",menu_bg_opacity:100,theme_color:"#3c444d",theme_name:"default",home_state_font_size:24},E=new Map([["menu_logo",L("Config.UI.logo")],["favicon",L("Config.UI.websiteIcon")],["login_bg_images",L("Config.UI.loginBackgroundImage")],["login_logo",L("Config.UI.loginLogoImage")],["main_bg_images",L("Config.UI.mainBackgroundImage")],["theme_color",L("Config.UI.sidebarColor")],["theme_name",L("Config.UI.colorTheme")],["menu_bg_opacity",L("Config.UI.sidebarBackgroundOpacity")],["main_content_opacity",L("Config.UI.contentOpacity")],["main_bg_images_opacity",L("Config.UI.mainBackgroundImageOpacity")],["login_bg_images_opacity",L("Config.UI.loginBackgroundOpacity")],["main_shadow_color",L("Config.UI.mainShadowColor")],["main_shadow_opacity",L("Config.UI.mainShadowOpacity")]]),H=()=>{const{t:a}=n(),e=w(),{pageConfig:t}=o(e),s=async()=>{const{message:a}=await k.post("/config?action=get_panel_asset");x(a)&&(t.value=a)},l=async(e={})=>{await k.post("/config?action=set_panel_asset",i({...t.value,...e}),{requestOptions:{loading:a("Config.UI.savingInterfaceSettings"),successMessage:!0}}),s()},g=a=>E.get(a)||a;return{pageConfig:t,fetchConfig:s,saveConfig:l,resetConfig:e=>{$({title:a("Config.UI.restoreDefaultSettings"),content:a("Config.UI.confirmRestore",{name:g(e)}),onConfirm:async()=>{await l({[e]:T[e]})}})},uploadImage:async(e,n)=>{if(n.file){const o=S.loading(a("Config.UI.uploadingImage"));try{const a=((a,e)=>{const n=(a=>{const e=a.lastIndexOf(".");return-1!==e?a.substring(e+1):"png"})(e);return"".concat(a,"_").concat(Date.now(),".").concat(n)})(e,n.name),o=new FormData;o.append("f_path","/www/server/panel/BTPanel/static/temp"),o.append("f_name",a),o.append("f_start","0"),o.append("blob",n.file),o.append("f_size",n.file.size.toString()),await z(o),await k.post("/config?action=set_panel_asset",i({...t.value,[e]:"/static/temp/".concat(a)}),{requestOptions:{successMessage:!0}}),"favicon"===e&&(a=>{const e=document.querySelector("link[rel*='icon']");e&&(e.href=B(a))})("/static/temp/".concat(a)),s()}finally{o.close()}}},resetAllConfig:()=>{$({title:a("Config.UI.restoreDefaultSettings"),content:a("Config.UI.confirmRestoreAll"),onConfirm:async()=>{await l(T)}})}}},J={class:"logo-preview"},N={key:1,class:"text-font3"},V={class:"logo-tips"},X={class:"upload-action"},G=O(t({__name:"upload",props:s({onUpload:Function},{value:{default:""},valueModifiers:{}}),emits:s(["reset"],["update:value"]),setup(a,{emit:e}){const{t:o}=n(),i=e,t=l(a,"value"),s=g((()=>B(t.value))),I=c([]),y=({file:a})=>{if(a.file){if(!a.file.type.includes("image"))return S.error(o("Config.UI.imageFileOnlyError")),!1;if(a.file.size>5242880)return S.error(o("Config.UI.imageSizeError")),!1}return!0},h=async({file:e})=>{var n;await(null==(n=a.onUpload)?void 0:n.call(a,e)),I.value=[]},w=()=>{i("reset")};return(a,e)=>{const n=q,o=M,i=D;return _(),u("div",null,[m("div",J,[t.value?(_(),p(n,{key:0,width:"100%",height:"100%",src:r(s),"preview-disabled":!0},null,8,["src"])):(_(),u("span",N,f(a.$t("Config.UI.uploadImagePlaceholder")),1))]),m("div",V,[d(a.$slots,"desc",{},void 0,!0)]),m("div",X,[v(i,{"file-list":r(I),"onUpdate:fileList":e[0]||(e[0]=a=>C(I)?I.value=a:null),class:"w-auto",action:"",multiple:!1,"show-file-list":!1,"custom-request":h,onBeforeUpload:y},{default:b((()=>[v(o,{size:"small"},{default:b((()=>[d(a.$slots,"upload",{},void 0,!0)])),_:3})])),_:3},8,["file-list"]),v(o,{onClick:w},{default:b((()=>[U(f(a.$t("Config.UI.resetDefault")),1)])),_:1})])])}}}),[["__scopeId","data-v-e25a8112"]]),K=t({__name:"index",setup(e){const{t:o}=n(),{pageConfig:i,uploadImage:t,resetConfig:s}=H();return(e,n)=>{const l=a;return _(),u(I,null,[v(l,{label:r(o)("Config.UI.logo")},{content:b((()=>[v(G,{value:r(i).menu_logo,"onUpdate:value":n[0]||(n[0]=a=>r(i).menu_logo=a),onUpload:n[1]||(n[1]=a=>r(t)("menu_logo",a)),onReset:n[2]||(n[2]=()=>r(s)("menu_logo"))},{desc:b((()=>[U(f(r(o)("Config.UI.logoDescription")),1)])),upload:b((()=>[U(f(r(o)("Config.UI.uploadLogo")),1)])),_:1},8,["value"])])),_:1},8,["label"]),v(l,{label:r(o)("Config.UI.websiteIcon")},{content:b((()=>[v(G,{value:r(i).favicon,"onUpdate:value":n[3]||(n[3]=a=>r(i).favicon=a),onUpload:n[4]||(n[4]=a=>r(t)("favicon",a)),onReset:n[5]||(n[5]=()=>r(s)("favicon"))},{desc:b((()=>[U(f(r(o)("Config.UI.iconDescription")),1)])),upload:b((()=>[U(f(r(o)("Config.UI.uploadIcon")),1)])),_:1},8,["value"])])),_:1},8,["label"])],64)}}}),Q={class:"flex items-center"},W={class:"w-120px mr-24px"},Y={class:"text-font3"},Z={class:"flex items-center gap-10px mt-10px"},aa=t({__name:"slider",props:{value:{default:0},valueModifiers:{}},emits:s(["save","reset"],["update:value"]),setup(a,{emit:e}){const{t:o}=n(),i=l(a,"value"),t=e,s=()=>{t("save")},g=()=>{t("reset")};return(a,e)=>{const n=j,t=A,l=M;return _(),u("div",null,[m("div",Q,[m("div",W,[v(n,{value:i.value,"onUpdate:value":e[0]||(e[0]=a=>i.value=a),step:10},null,8,["value"])]),v(t,{value:i.value,"onUpdate:value":e[1]||(e[1]=a=>i.value=a),class:"w-150px",min:0,max:100,size:"small"},null,8,["value"])]),m("div",Y,f(r(o)("Config.UI.transparencyTip")),1),m("div",Z,[v(l,{size:"small",onClick:s},{default:b((()=>[U(f(a.$t("Public.Btn.Save")),1)])),_:1}),v(l,{size:"small",onClick:g},{default:b((()=>[U(f(r(o)("Config.UI.resetDefault")),1)])),_:1})])])}}}),ea=t({__name:"index",setup(e){const{t:o}=n(),{pageConfig:i,saveConfig:t,resetConfig:s}=H();return(e,n)=>{const l=a;return _(),p(l,{label:r(o)("Config.UI.sidebarBackgroundOpacity")},{content:b((()=>[v(aa,{value:r(i).menu_bg_opacity,"onUpdate:value":n[0]||(n[0]=a=>r(i).menu_bg_opacity=a),onSave:n[1]||(n[1]=()=>r(t)()),onReset:n[2]||(n[2]=()=>r(s)("menu_bg_opacity"))},null,8,["value"])])),_:1},8,["label"])}}}),na={class:"flex-1"},oa={class:"flex items-center h-32px"},ia=t({__name:"index",setup(e){const{t:i}=n();o(w());const{pageConfig:t,saveConfig:s,resetConfig:l,uploadImage:g}=H();return(e,n)=>{const o=F,c=a;return _(),u(I,null,[v(c,{label:r(i)("Config.UI.mainBackgroundImage")},{content:b((()=>[m("div",na,[m("div",oa,[v(o,{value:r(t).show_main_bg_images,"onUpdate:value":[n[0]||(n[0]=a=>r(t).show_main_bg_images=a),r(s)]},{checked:b((()=>[U(f(r(i)("Config.UI.show")),1)])),unchecked:b((()=>[U(f(r(i)("Config.UI.hide")),1)])),_:1},8,["value","onUpdate:value"])]),r(t).show_main_bg_images?(_(),p(G,{key:0,value:r(t).main_bg_images,"onUpdate:value":n[1]||(n[1]=a=>r(t).main_bg_images=a),class:"mt-10px",onUpload:n[2]||(n[2]=a=>r(g)("main_bg_images",a)),onReset:n[3]||(n[3]=()=>r(l)("main_bg_images"))},{desc:b((()=>[U(f(r(i)("Config.UI.mainBackgroundDescription")),1)])),upload:b((()=>[U(f(r(i)("Config.UI.uploadImage")),1)])),_:1},8,["value"])):y("",!0)])])),_:1},8,["label"]),r(t).show_main_bg_images?(_(),p(c,{key:0,label:r(i)("Config.UI.mainBackgroundImageDark")},{content:b((()=>[v(G,{value:r(t).main_bg_images_dark,"onUpdate:value":n[4]||(n[4]=a=>r(t).main_bg_images_dark=a),class:"mt-10px",onUpload:n[5]||(n[5]=a=>r(g)("main_bg_images_dark",a)),onReset:n[6]||(n[6]=()=>r(l)("main_bg_images_dark"))},{desc:b((()=>[U(f(r(i)("Config.UI.mainBackgroundDescription")),1)])),upload:b((()=>[U(f(r(i)("Config.UI.uploadImage")),1)])),_:1},8,["value"])])),_:1},8,["label"])):y("",!0),v(c,{label:r(i)("Config.UI.backgroundOpacity")},{content:b((()=>[v(aa,{value:r(t).main_bg_images_opacity,"onUpdate:value":n[7]||(n[7]=a=>r(t).main_bg_images_opacity=a),onSave:n[8]||(n[8]=()=>r(s)()),onReset:n[9]||(n[9]=()=>r(l)("main_bg_images_opacity"))},null,8,["value"])])),_:1},8,["label"]),v(c,{label:r(i)("Config.UI.contentOpacity")},{content:b((()=>[v(aa,{value:r(t).main_content_opacity,"onUpdate:value":n[10]||(n[10]=a=>r(t).main_content_opacity=a),onSave:n[11]||(n[11]=()=>r(s)()),onReset:n[12]||(n[12]=()=>r(l)("main_content_opacity"))},null,8,["value"])])),_:1},8,["label"])],64)}}}),ta={class:"flex-1"},sa={class:"flex items-center h-32px"},la=t({__name:"index",setup(e){const{pageConfig:n,saveConfig:o,resetConfig:i,uploadImage:t}=H();return(e,s)=>{const l=F,g=a;return _(),u(I,null,[v(g,{label:e.$t("Config.UI.loginBackgroundImage")},{content:b((()=>[m("div",ta,[m("div",sa,[v(l,{value:r(n).show_login_bg_images,"onUpdate:value":[s[0]||(s[0]=a=>r(n).show_login_bg_images=a),r(o)]},{checked:b((()=>[U(f(e.$t("Config.UI.show")),1)])),unchecked:b((()=>[U(f(e.$t("Config.UI.hide")),1)])),_:1},8,["value","onUpdate:value"])]),r(n).show_login_bg_images?(_(),p(G,{key:0,value:r(n).login_bg_images,"onUpdate:value":s[1]||(s[1]=a=>r(n).login_bg_images=a),class:"mt-10px",onUpload:s[2]||(s[2]=a=>r(t)("login_bg_images",a)),onReset:s[3]||(s[3]=()=>r(i)("login_bg_images"))},{desc:b((()=>[U(f(e.$t("Config.UI.backgroundDescription")),1)])),upload:b((()=>[U(f(e.$t("Config.UI.uploadImage")),1)])),_:1},8,["value"])):y("",!0)])])),_:1},8,["label"]),r(n).show_login_bg_images?(_(),p(g,{key:0,label:e.$t("Config.UI.loginBackgroundOpacity")},{content:b((()=>[v(aa,{value:r(n).login_bg_images_opacity,"onUpdate:value":s[4]||(s[4]=a=>r(n).login_bg_images_opacity=a),onSave:s[5]||(s[5]=()=>r(o)()),onReset:s[6]||(s[6]=()=>r(i)("login_bg_images_opacity"))},null,8,["value"])])),_:1},8,["label"])):y("",!0)],64)}}}),ga={class:"py-16px"},ca={class:"my-16px"},_a=t({__name:"index",setup(a){const{t:o}=n(),{fetchConfig:i,resetAllConfig:t}=H();return i(),(a,n)=>{const i=e,s=R,l=M,g=P;return _(),p(g,{class:"p-16px"},{default:b((()=>[v(i,null,{default:b((()=>[U(f(r(o)("Config.UI.logoSettings")),1)])),_:1}),v(K),v(i,{class:"mt-12px"},{default:b((()=>[U(f(r(o)("Config.UI.sidebarSettings")),1)])),_:1}),v(ea),v(i,{class:"mt-12px"},{default:b((()=>[U(f(r(o)("Config.UI.mainBackgroundSettings")),1)])),_:1}),v(ia),v(i,{class:"mt-12px"},{default:b((()=>[U(f(r(o)("Config.UI.loginInterfaceSettings")),1)])),_:1}),v(la),m("div",ga,[m("div",ca,[v(s)]),v(l,{onClick:n[0]||(n[0]=()=>r(t)())},{default:b((()=>[U(f(r(o)("Config.UI.resetAllDefaults")),1)])),_:1})])])),_:1})}}});export{_a as default};
