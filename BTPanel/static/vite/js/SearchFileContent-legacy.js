System.register(["./index-legacy.js?v=1758532619827","./page_layout-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./index-legacy39.js?v=1758532619827","./ResourceManagerWindow-legacy.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827","./public-legacy.js?v=1758532619827","./soft-legacy2.js?v=1758532619827","./soft-legacy.js?v=1758532619827","./file-legacy2.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1758532619827"],(function(e,l){"use strict";var t,a,n,s,c,i,o,d,r,u,f,h,p,v,m,g,y,x,_,b,C,k,j,w,F,$,M,U,O,R,S,P,T,W,D,H;return{setters:[e=>{t=e._},e=>{a=e.m,n=e.t,s=e._,c=e.q,i=e.bI,o=e.bJ,d=e.p},e=>{r=e.k,u=e.P,f=e.i,h=e.r,p=e.R,v=e.S,m=e.X,g=e.a3,y=e.U,x=e.V,_=e.j,b=e.a4,C=e.a2,k=e.an,j=e.F,w=e.O,F=e.av,$=e.aj},e=>{M=e.o},e=>{U=e.R},e=>{O=e.au,R=e.aC,S=e.az,P=e.dP,T=e._,W=e.dU,D=e.dT,H=e.dW},null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent='@charset "UTF-8";.modal-footer-btns[data-v-85d18df6]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-85d18df6]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-wrapper[data-v-85d18df6]{padding:20px}.search-wrapper .search-res .top-desc[data-v-85d18df6]{display:flex;justify-content:start;align-content:center;margin-bottom:5px}.search-wrapper .search-res .match-list .match-list-item[data-v-85d18df6]{display:flex;align-items:center;flex-direction:row;justify-content:start;gap:5px;padding:0 10px 10px}[data-v-85d18df6] .n-collapse{border:1px solid var(--color-border)}[data-v-85d18df6] .n-collapse .n-collapse-item:first-child>.n-collapse-item__header{padding:10px 15px 10px 5px;background:var(--color-bg-2)}\n',document.head.appendChild(l);const I={class:"search-wrapper"},q={class:"w-100% flex justify-start gap-6 items-center"},z={class:"w-100% flex justify-between"},E={class:"search-res"},L={class:"top-desc"},J={class:"mr-5px"},K={class:"match-list"},V={class:"text-font1 fw-bold"},X=["innerHTML"];e("default",d(r({__name:"SearchFileContent",props:{currentPath:{type:String,default:"/"}},setup(e,{expose:l}){const d=e,{t:r}=u(),A=f("fileStore"),{currentPath:B,resetSearchFileContentFormData:G,choosedKeys:N}=A;function Q(){G()}l({open:function(){ae.value=!0,ee.value.path=B.value},close:Q});const{searchStatistics:Y,searchRes:Z,searchFileContentFormData:ee}=A,le=h(),te=h(d.currentPath),ae=h(!1);function ne(){!async function(){const e=a.loading(r("file.searchFileContentModal.searching"));try{const e=await n.post("/files?action=files_search",ee.value,{requestOptions:{isOriginalResult:!0}});Z.value=e.message,Object.keys(Z.value).length&&(Y.value.files=Object.keys(Z.value).length,Y.value.times=Object.values(Z.value).flat().reduce(((e,l)=>e+Object.values(l).length),0))}catch(l){console.warn(l)}finally{e.close()}}()}function se(e,l){const t=new RegExp(l,"g");return e.replace(t,`<span style="color:#ff3300">${l}</span>`)}function ce(){le.value.open()}function ie(e){ee.value.path=e}return(e,l)=>{const a=O,n=R,d=S,r=P,u=T,f=s,h=W,A=D,G=H,N=c,oe=i,de=o,re=t;return p(),v(j,null,[m(re,{show:x(ae),"onUpdate:show":l[7]||(l[7]=e=>$(ae)?ae.value=e:null),title:e.$t("file.searchFileContentModal.title"),width:720,onPublicClose:Q},{default:g((()=>[y("div",I,[m(G,{"label-placement":"left","label-width":60,"label-align":"left"},{default:g((()=>[m(r,{label:e.$t("file.searchFileContentModal.search")},{default:g((()=>[m(d,null,{default:g((()=>[m(a,{value:x(ee).text,"onUpdate:value":l[0]||(l[0]=e=>x(ee).text=e)},null,8,["value"]),m(n,{type:"primary",onClick:ne},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.search")),1)])),_:1})])),_:1})])),_:1},8,["label"]),m(r,{label:e.$t("file.searchFileContentModal.suffix")},{default:g((()=>[m(a,{value:x(ee).exts,"onUpdate:value":l[1]||(l[1]=e=>x(ee).exts=e)},null,8,["value"])])),_:1},8,["label"]),m(r,{label:e.$t("file.searchFileContentModal.folder")},{default:g((()=>[y("div",q,[m(a,{value:x(ee).path,"onUpdate:value":l[3]||(l[3]=e=>x(ee).path=e)},{suffix:g((()=>[m(u,{checked:x(ee).is_subdir,"onUpdate:checked":l[2]||(l[2]=e=>x(ee).is_subdir=e),"checked-value":1,"unchecked-value":0},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.subdir")),1)])),_:1},8,["checked"])])),_:1},8,["value"]),m(f,{name:"file-dir",color:"#000",size:"24",style:{cursor:"pointer"},onClick:ce})])])),_:1},8,["label"]),m(r,{label:e.$t("file.searchFileContentModal.mode")},{default:g((()=>[y("div",z,[m(A,{value:x(ee).mode,"onUpdate:value":l[4]||(l[4]=e=>x(ee).mode=e)},{default:g((()=>[m(h,{value:0},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.words")),1)])),_:1}),m(h,{value:1},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.regex")),1)])),_:1})])),_:1},8,["value"]),y("div",null,[0==x(ee).mode?(p(),C(u,{key:0,checked:x(ee).isword,"onUpdate:checked":l[5]||(l[5]=e=>x(ee).isword=e),label:e.$t("file.searchFileContentModal.matchWholeWord"),class:"mr-5","checked-value":1,"unchecked-value":0},null,8,["checked","label"])):k("",!0),m(u,{checked:x(ee).iscase,"onUpdate:checked":l[6]||(l[6]=e=>x(ee).iscase=e),label:e.$t("file.searchFileContentModal.matchCase"),"checked-value":1,"unchecked-value":0},null,8,["checked","label"])])])])),_:1},8,["label"])])),_:1}),y("div",E,[y("div",L,[y("span",J,b(e.$t("file.searchFileContentModal.searchResult")),1),y("span",null,b(x(Y).times)+" "+b(e.$t("file.searchFileContentModal.matchesIn"))+" "+b(x(Y).files)+" "+b(e.$t("file.searchFileContentModal.files")),1)]),m(N,{style:{"margin-bottom":"20px"}}),(p(!0),v(j,null,w(x(Z),((l,t)=>(p(),C(de,{key:t,class:"mb-10px"},{default:g((()=>[m(oe,{title:`${t} (${e.$t("file.searchFileContentModal.match")} ${Object.values(l).length} ${e.$t("file.searchFileContentModal.times")})`,name:"1"},{"header-extra":g((()=>[m(n,{text:"",type:"primary",onClick:F((e=>async function(e){M(0,e,B.value)}(t)),["stop"])},{default:g((()=>[_(b(e.$t("file.searchFileContentModal.edit")),1)])),_:2},1032,["onClick"])])),default:g((()=>[y("div",K,[(p(!0),v(j,null,w(l,((l,t)=>(p(),v("div",{class:"match-list-item",key:t},[y("div",V,b(e.$t("file.searchFileContentModal.line"))+" "+b(t)+": ",1),y("div",{innerHTML:se(l,x(ee).text)},null,8,X)])))),128))])])),_:2},1032,["title"])])),_:2},1024)))),128))])])])),_:1},8,["show","title"]),m(U,{"current-path":x(te),ref_key:"resourceRef",ref:le,onChooseDir:ie},null,8,["current-path"])],64)}}}),[["__scopeId","data-v-85d18df6"]]))}}}));
