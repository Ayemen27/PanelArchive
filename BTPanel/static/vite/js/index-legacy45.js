System.register(["./page_layout-legacy.js?v=1758532619827","./public-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1758532619827","./logs-legacy.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./index-legacy108.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./index-legacy105.js?v=1758532619827","./index-legacy.js?v=1758532619827","./site-legacy.js?v=1758532619827","./logs.vue_vue_type_script_setup_true_lang-legacy.js?v=1758532619827","./common-legacy.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1758532619827"],(function(e,t){"use strict";var a,l,n,s,i,o,c,r,d,u,p,g,_,y,m,x,v,b,f,h,k,w,C,S,N,j,L,$,P,R,U,T,W,q,I,B,F,H,z,A,K,D,E,O,V,X,G,J,M,Q,Y,Z,ee;return{setters:[e=>{a=e.ct,l=e.c,n=e.j,s=e.p,i=e.x,o=e.bg,c=e.o,r=e.m},e=>{d=e.d,u=e.c,p=e.h,g=e.u,_=e.a,y=e._},e=>{m=e._},e=>{x=e.c,v=e.e,b=e.f,f=e.h,h=e.s,k=e.i},e=>{w=e.k,C=e.r,S=e.e,N=e.R,j=e.S,L=e.X,$=e.V,P=e.U,R=e.a2,U=e.an,T=e.F,W=e.O,q=e.H,I=e.a4,B=e.N,F=e.P,H=e.w,z=e.a3,A=e.j,K=e.aj,D=e.c},e=>{E=e._},e=>{O=e._},e=>{V=e._},e=>{X=e.aC,G=e.d9,J=e.bH,M=e.dS},e=>{Q=e._},e=>{Y=e._},e=>{Z=e.g},e=>{ee=e._},null,null,null],execute:function(){var t=document.createElement("style");t.textContent='@charset "UTF-8";.item[data-v-4dea4633]{height:calc(100vh - 230px);overflow:auto;border:1px solid #e9e9e9}.item[data-v-4dea4633]::-webkit-scrollbar{display:none}.item .list[data-v-4dea4633]{padding:10px;cursor:pointer}.item .list[data-v-4dea4633]:not(:last-child){border-bottom:1px solid #e9e9e9}.item .list[data-v-4dea4633]:hover{background:var(--log-type-list-hover-bg)}.item .list-active[data-v-4dea4633]{background:var(--log-type-list-active-bg);--un-text-opacity:1;color:rgb(32 165 58 / var(--un-text-opacity))}[data-v-5bc24312] .button-color{color:var(--color-error)}.box[data-v-7029a0a8]{height:calc(100vh - 190px)}\n',document.head.appendChild(t);const te={class:"w-240px"},ae={class:"item mt-10px"},le=["onClick"],ne=w({__name:"index",setup(e){const t=a(),s=C(),i=S({p:1,limit:999,search:"",type:-1}),o=C([]),{loading:c,setLoading:r}=d(),u=async()=>{try{r(!0);const{message:e}=await x(B(i));l(e)&&(t.setWebsite(e.data[0].name),s.value=e.data[0].name,o.value=e.data)}finally{r(!1)}};return u(),(e,a)=>{const l=m,r=n;return N(),j("div",te,[L(l,{value:$(i).search,"onUpdate:value":a[0]||(a[0]=e=>$(i).search=e),placeholder:e.$t("Logs.Panel.index_4"),onSearch:u},null,8,["value","placeholder"]),P("div",ae,[$(c)?(N(),R(r,{key:0,height:"36px",text:"",repeat:6})):U("",!0),(N(!0),j(T,null,W($(o),(e=>(N(),j("div",{class:q(["list",{"list-active":$(s)==e.name}]),key:e.id,onClick:a=>{return l=e.name,t.setWebsite(l),void(s.value=l);var l}},I(e.name),11,le)))),128))])])}}}),se=s(ne,[["__scopeId","data-v-4dea4633"]]),ie=w({__name:"index",setup(e,{expose:t}){const n=a(),{t:s}=F(),{keys:o,table:c,columns:r}=u([{key:"username",title:s("Ftp.Analysis.Index_27")},{key:"type",title:s("Logs.Panel.index_6")},{key:"log",title:s("Public.Btn.Details")},{key:"addtime",align:"right",title:s("Logs.Panel.index_7")}]),g=S({search:n.websiteName,p:1,limit:10,stype:"Site manager"}),{loading:_,setLoading:y}=d(),m=async()=>{try{y(!0);const{message:e}=await v(g);l(e)&&(c.data=e.data,c.total=i(e.page))}finally{o.value=[],y(!1)}};H((()=>n.websiteName),(e=>{e&&(g.p=1,g.search=e,m())}));const x=()=>{n.websiteName&&m()};return x(),t({getList:x}),(e,t)=>{const a=X,l=p,n=V,s=O;return N(),R(s,{feedback:!1},{toolsLeft:z((()=>[L(a,{type:"primary",onClick:x},{default:z((()=>[A(I(e.$t("Public.Btn.Refresh")),1)])),_:1})])),table:z((()=>[L(l,{"checked-row-keys":$(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>K(o)?o.value=e:null),"row-key":"name",loading:$(_),data:$(c).data,columns:$(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:z((()=>[L(n,{page:$(g).p,"onUpdate:page":t[1]||(t[1]=e=>$(g).p=e),"page-size":$(g).limit,"onUpdate:pageSize":t[2]||(t[2]=e=>$(g).limit=e),"item-count":$(c).total,onRefresh:x},null,8,["page","page-size","item-count"])])),_:1})}}}),oe=w({__name:"index",setup(e,{expose:t}){const n=a(),{loading:s,setLoading:i}=d(),o=C("None"),c=async()=>{i(!0);try{const{message:e}=await b({siteName:n.websiteName});l(e)&&(o.value=e.result?e.result:"None")}finally{i(!1)}};H((()=>n.websiteName),(e=>{e&&c()}));const r=()=>{n.websiteName&&c()};return r(),t({getList:r}),(e,t)=>{const a=X,l=Q,n=G;return N(),R(n,{vertical:"",class:"h-full"},{default:z((()=>[L(a,{class:"self-start",type:"primary",onClick:r},{default:z((()=>[A(I(e.$t("Public.Btn.Refresh")),1)])),_:1}),L(l,{loading:$(s),log:$(o)},null,8,["loading","log"])])),_:1})}}}),ce=w({__name:"index",setup(e,{expose:t}){const n=a(),{loading:s,setLoading:i}=d(),o=C("None"),c=async()=>{i(!0);try{const{message:e}=await f({siteName:n.websiteName});l(e)&&(o.value=e.result?e.result:"None")}finally{i(!1)}};H((()=>n.websiteName),(e=>{e&&c()}));const r=()=>{n.websiteName&&c()};return r(),t({getList:r}),(e,t)=>{const a=X,l=Q,n=G;return N(),R(n,{vertical:"",class:"h-full"},{default:z((()=>[L(a,{class:"self-start",type:"primary",onClick:r},{default:z((()=>[A(I(e.$t("Public.Btn.Refresh")),1)])),_:1}),L(l,{loading:$(s),log:$(o)},null,8,["loading","log"])])),_:1})}}}),re={class:"text-error"},de={class:"w-400px p-20px"},ue={class:"mb-16px"},pe=s(w({__name:"index",setup(e,{expose:t}){const n=a(),s=o(),{t:i}=F(),m=C(!1),x=C(0),{keys:v,table:b,columns:f}=u([{key:"start_time",title:i("Logs.Panel.index_13")},{key:"time",title:i("Public.Unit.Time"),render:e=>Number(e.time).toFixed(2)+" Sec"},{key:"xss",title:i("Site.TableRow.index_4"),render:e=>e.xss>0?L(c,{onClick:()=>{R("xss")}},{default:()=>[e.xss]}):e.xss},{key:"sql",title:i("Site.TableRow.index_5"),render:e=>e.sql>0?L(c,{onClick:()=>{R("sql")}},{default:()=>[e.sql]}):e.sql},{key:"san",title:i("Site.TableRow.index_6"),render:e=>e.san>0?L(c,{class:"button-color",onClick:()=>{R("san")}},{default:()=>[e.san]}):e.san},{key:"php",title:i("Logs.Panel.index_14"),render:e=>e.php>0?L(c,{onClick:()=>{R("php")}},{default:()=>[e.php]}):e.php},{key:"ip",title:i("Logs.Website.index_5"),render:e=>e.ip>0?L(c,{onClick:()=>{R("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:i("Logs.Website.index_1"),render:e=>e.url>0?L(c,{onClick:()=>{R("url")}},{default:()=>[e.url]}):e.url},{key:"log",title:i("Security.Anti.Index_7"),render:e=>e.xss+e.sql+e.san+e.php+e.ip+e.url}]),w=()=>{_({title:i("Site.Config.index_104"),content:i("Logs.Website.index_3",[n.websiteName]),onConfirm:async({hide:e})=>{try{await h({siteName:U.value}),m.value=!0,S()}finally{e()}}})},S=(e=0)=>{let t=setTimeout((async()=>{const{message:e}=await Z({path:U.value});l(e)&&(x.value=e.result,x.value>=100?(r.success(i("Site.Config.index_107")),m.value=!1,x.value=0,B(),clearTimeout(t)):S(1e3))}),e)},R=e=>{g({title:`[${e}] ${i("Site.Config.index_103")}`,data:{type:e,path:U.value},component:ee})},U=D((()=>{let e="";switch(s.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${n.websiteName}${e}`})),{loading:W,setLoading:q}=d(),B=async()=>{try{q(!0);const{message:e}=await k({siteName:U.value});l(e)&&(b.data=e.is_status?[e]:[])}finally{v.value=[],q(!1)}};return H((()=>n.websiteName),(e=>{e&&B()})),B(),t({init:B}),(e,t)=>{const a=X,l=p,n=O,s=y,i=J,o=Y;return N(),j(T,null,[L(n,{feedback:!1},{toolsLeft:z((()=>[L(a,{type:"primary",onClick:w},{default:z((()=>[A(I(e.$t("Site.Config.index_104")),1)])),_:1})])),table:z((()=>[L(l,{"checked-row-keys":$(v),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>K(v)?v.value=e:null),"row-key":"name","max-height":1e3,loading:$(W),data:$(b).data,columns:$(f)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),L(s,{class:"mt-16px"},{default:z((()=>[P("li",null,[A(I(e.$t("Site.Config.index_108"))+" ",1),P("span",re,I(e.$t("Site.Config.index_109")),1)]),P("li",null,I(e.$t("Site.Config.index_110")),1),P("li",null,I(e.$t("Site.Config.index_111")),1),P("li",null,I(e.$t("Site.Config.index_112")),1),P("li",null,[L(c,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:z((()=>[A(I(e.$t("Site.Config.index_113")),1)])),_:1}),A(" "+I(e.$t("Site.Config.index_114")),1)])])),_:1}),L(o,{show:$(m),"onUpdate:show":t[1]||(t[1]=e=>K(m)?m.value=e:null)},{default:z((()=>[P("div",de,[P("div",ue,I(e.$t("Site.Config.index_115")),1),L(i,{type:"line",status:"success",height:24,percentage:$(x),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-5bc24312"]]),ge=s(w({__name:"index",setup(e){const{t:t}=F(),a=C("operation"),l=[{key:"operation",label:t("Security.Tabs.Index_7"),component:ie},{key:"access",label:t("Logs.Website.index_2"),component:oe},{key:"error",label:t("Logs.Website.index_4"),component:ce},{key:"security",label:t("Site.Config.index_102"),component:pe}];return(e,t)=>{const n=E;return N(),R(n,{class:"box",value:$(a),"onUpdate:value":t[0]||(t[0]=e=>K(a)?a.value=e:null),options:l},null,8,["value"])}}}),[["__scopeId","data-v-7029a0a8"]]);e("default",w({__name:"index",setup(e){const t=o();return(async()=>{await t.getPHPConfig()})(),(e,t)=>{const a=G,l=M;return N(),R(l,{class:"p-16px"},{default:z((()=>[L(a,{class:"flex-nowrap!"},{default:z((()=>[L(se),L(ge)])),_:1})])),_:1})}}}))}}}));
