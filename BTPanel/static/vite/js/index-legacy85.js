System.register(["./page_layout-legacy.js?v=1758532619827","./index-legacy133.js?v=1758532619827","./index-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1758532619827","./public-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1758532619827","./vue-legacy.js?v=1758532619827","./site-legacy4.js?v=1758532619827","./site-legacy.js?v=1758532619827","./index-legacy245.js?v=1758532619827","./index-legacy99.js?v=1758532619827","./naive-legacy.js?v=1758532619827","./index-legacy108.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1758532619827","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1758532619827","./index-legacy100.js?v=1758532619827","./__commonjsHelpers__-legacy.js?v=1758532619827","./index-legacy98.js?v=1758532619827","./index-legacy105.js?v=1758532619827","./soft-legacy.js?v=1758532619827","./useOperate-legacy.js?v=1758532619827"],(function(e,t){"use strict";var l,a,i,n,o,r,u,s,d,p,c,_,x,y,h,m,v,f,b,g,w,S,k,P,$,C,L,U,T,V,R,j,E,z,N,B,O,q,I,A,D,H,M,K,W,F,J,X,Y,G,Q,Z,ee,te,le,ae,ie,ne,oe,re,ue,se,de,pe,ce,_e,xe,ye,he,me,ve,fe,be,ge,we,Se,ke,Pe,$e,Ce,Le,Ue,Te,Ve,Re,je,Ee,ze,Ne,Be,Oe,qe,Ie,Ae,De,He,Me,Ke,We,Fe,Je,Xe,Ye,Ge,Qe,Ze,et,tt,lt,at,it,nt,ot,rt,ut,st,dt,pt,ct,_t,xt,yt,ht,mt,vt,ft;return{setters:[e=>{l=e.c,a=e.i,i=e.o,n=e.w,o=e.m,r=e.dq,u=e.bs,s=e.q,d=e.dr,p=e.aT,c=e.R,_=e.a,x=e.bg,y=e.u,h=e.x},e=>{m=e._},e=>{v=e._},e=>{f=e._},e=>{b=e._},e=>{g=e._},e=>{w=e.a,S=e.$,k=e.c,P=e.d,$=e.h,C=e._,L=e.f,U=e.e,T=e.s,V=e.w,R=e.G,j=e.r,E=e.u,z=e.m},e=>{N=e._},e=>{B=e.p,O=e.i,q=e.X,I=e.k,A=e.P,D=e.r,H=e.R,M=e.S,K=e.U,W=e.a3,F=e.a4,J=e.V,X=e.aj,Y=e.j,G=e.a0,Q=e.e,Z=e.N,ee=e.an,te=e.F,le=e.a2,ae=e.o,ie=e.s,ne=e.n,oe=e._,re=e.u,ue=e.w},e=>{se=e.l},e=>{de=e.l,pe=e.m,ce=e.n,_e=e.o,xe=e.p,ye=e.q,he=e.r,me=e.t,ve=e.u,fe=e.v,be=e.w,ge=e.x,we=e.y,Se=e.z,ke=e.A,Pe=e.B,$e=e.C,Ce=e.D,Le=e.E,Ue=e.F,Te=e.G,Ve=e.H,Re=e.I,je=e.J,Ee=e.K,ze=e.L,Ne=e.M,Be=e.N,Oe=e.O,qe=e.P,Ie=e.Q,Ae=e.R,De=e.S,He=e.T,Me=e.U,Ke=e.V,We=e.W,Fe=e.X,Je=e.Y,Xe=e.Z,Ye=e._},e=>{Ge=e._},e=>{Qe=e._},e=>{Ze=e.aC,et=e.au,tt=e.dP,lt=e.dj,at=e.df,it=e.dV,nt=e.d9,ot=e.dW,rt=e.d8,ut=e._,st=e.eg,dt=e.dS},e=>{pt=e._},e=>{ct=e._},e=>{_t=e._},e=>{xt=e.default},e=>{e.c,yt=e.g},e=>{ht=e._},e=>{mt=e._},e=>{vt=e.a},e=>{ft=e.u}],execute:function(){e("u",St);const bt=Symbol("server-list");async function gt(e){const{message:t}=await de({site_name:e});if(l(t))return t}async function wt(e,t){const{message:a}=await pe({site_name:e,proxy_path:t});if(l(a))return a}function St(){return O(bt)}const{t:kt}=a.global;function Pt({delDomain:e}){return{key:"action",title:kt("Public.Table.Action"),width:80,align:"right",render:t=>q(S,{options:[{label:kt("Public.Btn.Del"),onClick:()=>{w({title:`${kt("Site.Batch.index_12")} [${t.name}]`,content:kt("Site.Batch.index_13"),onConfirm:async({hide:l})=>{await e(t),l()}})}}]},null)}}const $t={class:"flex justify-between items-center mb-24px"},Ct={class:"w-400px"},Lt={class:"pr-40px"},Ut=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{data:r}=St(),u=D(""),s=async()=>{""!==u.value.trim()?(await xe({id:r.id,site_name:r.name,domains:u.value.trim().split("\n").join(",")}),u.value="",v()):o.error(a("Site.Proxy.index_59"))},d=async e=>{await ce({id:r.id,site_name:r.name,domain:e.name,port:e.port}),v()},{keys:p,table:c,columns:_}=k([{type:"selection",width:40},{key:"name",title:kt("Site.TableRow.index_19"),render:e=>q(i,{href:`http://${e.name}:${e.port}`,target:"_blank"},{default:()=>[e.name]})},{key:"port",title:kt("Site.TableRow.index_16"),width:100},Pt({delDomain:d})]),x=()=>{c.data.length>1?_.value[_.value.length-1]=Pt({delDomain:d}):_.value[_.value.length-1]={key:"action",title:kt("Public.Table.Action"),width:80,align:"right",render:()=>q("span",{class:"text-default"},[kt("Site.TableOP.index_9")])}},y=[{key:"del",type:"confirm",label:a("Site.Batch.index_20"),confirm:{title:a("Site.Batch.index_21"),desc:a("Site.Batch.index_11"),api:e=>ce({id:r.id,site_name:r.name,domain:e.name,port:e.port},!1),done:()=>{v()},columns:[{key:"name",title:a("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:h,setLoading:m}=P(),v=async()=>{try{m(!0);const e={id:r.id,site_name:r.name},{message:t}=await _e(e);l(t)&&(c.data=n(t.domain_list)?t.domain_list:[],x())}catch(e){o.error(a("Site.Proxy.index_60")),console.error(e)}finally{p.value=[],m(!1)}};return v(),t({init:v}),(e,t)=>{const l=Qe,a=Ze,i=$,n=g,o=f;return H(),M("div",null,[K("div",$t,[K("div",Ct,[q(l,{value:J(u),"onUpdate:value":t[0]||(t[0]=e=>X(u)?u.value=e:null)},{default:W((()=>[K("p",null,F(e.$t("Site.PHP.add_site_5")),1),K("p",null,F(e.$t("Site.PHP.add_site_6")),1),K("p",null,F(e.$t("Site.PHP.add_site_7")),1)])),_:1},8,["value"])]),K("div",Lt,[q(a,{type:"primary",onClick:s},{default:W((()=>[Y(F(e.$t("Site.Cert.index_62")),1)])),_:1})])]),q(o,null,{table:W((()=>[q(i,{"checked-row-keys":J(p),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>X(p)?p.value=e:null),loading:J(h),"max-height":400,data:J(c).data,columns:J(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:W((()=>[q(n,{"checked-row-keys":J(p),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>X(p)?p.value=e:null),data:J(c).data,options:y},null,8,["checked-row-keys","data"])])),_:1})])}}}),Tt={class:"p-20px"},Vt={class:"w-280px"},Rt=I({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=A(),a=r(),{siteName:i}=G(a),n=e,{getList:o}=n.data,u=D(null),s=Q({name:""}),d={name:{required:!0,message:l("Site.Proxy.index_20"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(u.value?.validate()),await ye({site_name:i.value,ip_type:"white",ips:s.name}),o?.(),e()}}),(e,t)=>{const l=et,a=tt,i=ct,n=C;return H(),M("div",Tt,[q(i,{ref_key:"formRef",ref:u,model:J(s),rules:d},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_18"),path:"name"},{default:W((()=>[K("div",Vt,[q(l,{type:"textarea",value:J(s).name,"onUpdate:value":t[0]||(t[0]=e=>J(s).name=e),placeholder:e.$t("Site.Proxy.index_20")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),q(n,{class:"mt-4px"},{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_19")),1)])),_:1})])}}}),jt=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{loading:i,setLoading:n}=P(),o=r(),{siteName:u}=G(o),s=async()=>{try{n(!0);const e=await gt(u.value);l(e)&&(p.data=e.ip_limit.ip_white.map((e=>({ip:e}))))}finally{d.value=[],n(!1)}};s(),t({init:s});const{keys:d,table:p,columns:c}=k([{type:"selection",width:40},{key:"ip",title:a("Site.Proxy.index_18"),ellipsis:{tooltip:{width:"trigger"}}},L({width:130,options:e=>[{label:a("Public.Btn.Del"),onClick:()=>{w({title:`${a("Site.TableOP.index_6")} [${e.ip}]`,content:a("Site.Proxy.index_23"),onConfirm:async({hide:t})=>{await he({site_name:u.value,ip_type:"white",ip:e.ip}),s(),t()}})}}]})]),_=[{key:"del",label:a("Site.Batch.index_20"),onBatch:e=>{w({title:a("Site.Batch.index_21"),content:a("Site.Batch.index_11"),onConfirm:async()=>{await me({site_name:u.value,ip_type:"white",ips:e.map((e=>e.ip)).join("\n")}),s()}})}}],x=()=>{y.title=a("Site.Proxy.index_22"),y.show=!0},y=U(a("Site.Proxy.index_22"),{getList:s});return(e,t)=>{const l=Ze,a=$,n=g,o=f,r=v;return H(),M("div",null,[q(o,null,{toolsLeft:W((()=>[q(l,{type:"primary",onClick:x},{default:W((()=>[Y(F(e.$t("Site.Proxy.index_22")),1)])),_:1})])),table:W((()=>[q(a,{"checked-row-keys":J(d),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>X(d)?d.value=e:null),"row-key":"ip",loading:J(i),"max-height":440,data:J(p).data,columns:J(c)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:W((()=>[q(n,{"checked-row-keys":J(d),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>X(d)?d.value=e:null),"row-key":"ip",data:J(p).data,options:_},null,8,["checked-row-keys","data"])])),_:1}),q(r,{show:J(y).show,"onUpdate:show":t[2]||(t[2]=e=>J(y).show=e),title:J(y).title,data:J(y).data,width:480,footer:!0,component:Rt},null,8,["show","title","data"])])}}}),Et={class:"p-20px"},zt={class:"w-280px"},Nt=I({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=A(),a=r(),{siteName:i}=G(a),n=e,{getList:o}=n.data,u=D(null),s=Q({name:""}),d={name:{required:!0,message:l("Site.Proxy.index_20"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(u.value?.validate()),await ye({site_name:i.value,ip_type:"black",ips:s.name}),o?.(),e()}}),(e,t)=>{const l=et,a=tt,i=ct,n=C;return H(),M("div",Et,[q(i,{ref_key:"formRef",ref:u,model:J(s),rules:d},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_18"),path:"name"},{default:W((()=>[K("div",zt,[q(l,{type:"textarea",value:J(s).name,"onUpdate:value":t[0]||(t[0]=e=>J(s).name=e),placeholder:e.$t("Site.Proxy.index_20")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),q(n,{class:"mt-4px"},{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_19")),1)])),_:1})])}}}),Bt=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{loading:i,setLoading:n}=P(),o=r(),{siteName:u}=G(o),s=async()=>{try{n(!0);const e=await gt(u.value);l(e)&&(p.data=e.ip_limit.ip_black.map((e=>({ip:e}))))}finally{d.value=[],n(!1)}};s(),t({init:s});const{keys:d,table:p,columns:c}=k([{type:"selection",width:40},{key:"ip",title:a("Site.Proxy.index_18"),ellipsis:{tooltip:{width:"trigger"}}},L({width:130,options:e=>[{label:a("Public.Btn.Del"),onClick:()=>{w({title:`${a("Site.TableOP.index_6")} [${e.ip}]`,content:a("Site.Proxy.index_23"),onConfirm:async({hide:t})=>{await he({site_name:u.value,ip_type:"black",ip:e.ip}),s(),t()}})}}]})]),_=[{key:"del",label:a("Site.Batch.index_20"),onBatch:e=>{w({title:a("Site.Batch.index_21"),content:a("Site.Batch.index_11"),onConfirm:async()=>{await me({site_name:u.value,ip_type:"black",ips:e.map((e=>e.ip)).join("\n")}),s()}})}}],x=()=>{y.title=a("Site.Proxy.index_21"),y.show=!0},y=U(a("Site.Proxy.index_21"),{getList:s});return(e,t)=>{const l=Ze,a=$,n=g,o=f,r=v;return H(),M("div",null,[q(o,null,{toolsLeft:W((()=>[q(l,{type:"primary",onClick:x},{default:W((()=>[Y(F(e.$t("Site.Proxy.index_21")),1)])),_:1})])),table:W((()=>[q(a,{"checked-row-keys":J(d),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>X(d)?d.value=e:null),"row-key":"ip",loading:J(i),"max-height":440,data:J(p).data,columns:J(c)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:W((()=>[q(n,{"checked-row-keys":J(d),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>X(d)?d.value=e:null),"row-key":"ip",data:J(p).data,options:_},null,8,["checked-row-keys","data"])])),_:1}),q(r,{show:J(y).show,"onUpdate:show":t[2]||(t[2]=e=>J(y).show=e),title:J(y).title,data:J(y).data,width:480,footer:!0,component:Nt},null,8,["show","title","data"])])}}}),Ot={class:"p-20px"},qt={class:"w-280px"},It={class:"w-280px"},At={class:"w-280px"},Dt={class:"w-280px"},Ht=I({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=A(),a=r(),{siteName:i}=G(a),n=e,{isEdit:o,row:s,getList:d}=n.data,p=D(null),c=Q({name:u(5),auth_path:"",username:"",password:""}),_={name:{required:!0,message:l("Site.Placeholder.Index_4"),trigger:["blur","input"]},auth_path:{required:!0,message:l("Site.Placeholder.Index_5"),trigger:["blur","input"]},username:{required:!0,message:l("Site.Placeholder.Index_6"),trigger:["blur","input"]},password:{required:!0,message:l("Site.Placeholder.Index_8"),trigger:["blur","input"]}};return o&&s&&(c.name=s.auth_name,c.auth_path=s.auth_path),t({onConfirm:async({hide:e})=>{await(p.value?.validate()),o?await ve({...Z(c),site_name:i.value}):await fe({...Z(c),site_name:i.value}),d?.(),e()}}),(e,t)=>{const l=et,a=tt,i=ct,n=C;return H(),M("div",Ot,[q(i,{ref_key:"formRef",ref:p,model:J(c),rules:_},{default:W((()=>[q(a,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:W((()=>[K("div",qt,[q(l,{value:J(c).name,"onUpdate:value":t[0]||(t[0]=e=>J(c).name=e),disabled:J(o),placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),q(a,{label:e.$t("Site.TableRow.index_15"),path:"auth_path"},{default:W((()=>[K("div",It,[q(l,{value:J(c).auth_path,"onUpdate:value":t[1]||(t[1]=e=>J(c).auth_path=e),disabled:J(o),placeholder:e.$t("Site.Proxy.index_42")},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),q(a,{label:e.$t("Public.Table.Username"),path:"username"},{default:W((()=>[K("div",At,[q(l,{value:J(c).username,"onUpdate:value":t[2]||(t[2]=e=>J(c).username=e)},null,8,["value"])])])),_:1},8,["label"]),q(a,{label:e.$t("Public.Table.Password"),path:"password"},{default:W((()=>[K("div",Dt,[q(l,{value:J(c).password,"onUpdate:value":t[3]||(t[3]=e=>J(c).password=e)},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),q(n,{class:"mt-4px"},{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_43")),1),K("li",null,F(e.$t("Site.Proxy.index_44")),1)])),_:1})])}}}),Mt=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{loading:i,setLoading:n}=P(),o=r(),{siteName:u}=G(o),s=async()=>{try{n(!0);const e=await gt(u.value);l(e)&&(p.data=e.basic_auth)}finally{n(!1)}};s(),t({init:s});const{keys:d,table:p,columns:c}=k([{key:"auth_name",title:a("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"auth_path",title:a("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},L({width:130,options:e=>[{label:a("Site.TableOP.index_7"),onClick:()=>{y(e)}},{label:a("Public.Btn.Del"),onClick:()=>{w({title:`${a("Site.Proxy.index_48")} [${e.auth_name}]`,content:a("Site.Proxy.index_49"),onConfirm:async({hide:t})=>{await be({site_name:u.value,auth_path:e.auth_path,name:e.auth_name}),s(),t()}})}}]})]),_=U(a("Site.Proxy.index_45"),{isEdit:!1,getList:s}),x=()=>{_.data.isEdit=!1,_.title=a("Site.Proxy.index_45"),_.show=!0},y=e=>{_.data.row=e,_.data.isEdit=!0,_.title=a("Site.Proxy.index_50"),_.show=!0};return(e,t)=>{const l=Ze,a=$,n=f,o=C,r=v;return H(),M("div",null,[q(n,null,{toolsLeft:W((()=>[q(l,{type:"primary",onClick:x},{default:W((()=>[Y(F(e.$t("Site.Proxy.index_45")),1)])),_:1})])),table:W((()=>[q(a,{"checked-row-keys":J(d),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>X(d)?d.value=e:null),"row-key":"name",loading:J(i),"max-height":440,data:J(p).data,columns:J(c)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),q(o,{class:"mt-16px"},{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_46")),1),K("li",null,F(e.$t("Site.Proxy.index_47")),1)])),_:1}),q(r,{show:J(_).show,"onUpdate:show":t[1]||(t[1]=e=>J(_).show=e),title:J(_).title,data:J(_).data,width:480,footer:!0,component:Ht},null,8,["show","title","data"])])}}}),Kt={class:"p-20px"},Wt={key:0},Ft=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),i=r(),{siteName:n}=G(i),o=D(null),u=Q({switchValue:!1,inputValue:1,selectValue:"m"}),d=async()=>{const e=await gt(n.value);l(e)&&(u.switchValue=e.proxy_cache.cache_status,e.proxy_cache.expires.length>1&&(u.inputValue=Number(e.proxy_cache.expires.slice(0,-1)),u.selectValue=e.proxy_cache.expires.slice(-1)))};d(),t({init:d});const p={inputValue:{required:!0,validator(e,t){if(!t)return new Error(a("Site.Proxy.index_26"))},trigger:["input","blur"]}},c=[{label:a("Public.Unit.Minute"),value:"m"},{label:a("Public.Unit.Hour"),value:"h"},{label:a("Public.Unit.Day"),value:"d"}],_=async()=>{await(o.value?.validate());let e={site_name:n.value,cache_status:u.switchValue?1:0,expires:`${u.inputValue}${u.selectValue}`};await ge(e),d()},x=()=>{const e=`${a("Site.Proxy.index_27")} [${n.value}]`;w({title:e,content:a("Site.Proxy.index_28"),onConfirm:async()=>{await we({site_name:n.value})}})};return(e,t)=>{const l=lt,a=tt,i=at,n=it,r=nt,d=Ze,y=ot,h=s,m=C;return H(),M(te,null,[K("div",Kt,[q(y,{ref_key:"formRef",ref:o,"label-width":100,model:J(u),rules:p,"label-placement":"left"},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_24")},{default:W((()=>[q(l,{value:J(u).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>J(u).switchValue=e),_]},null,8,["value"])])),_:1},8,["label"]),J(u).switchValue?(H(),M("div",Wt,[q(r,null,{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_25"),path:"inputValue"},{default:W((()=>[q(i,{"show-button":!1,value:J(u).inputValue,"onUpdate:value":t[1]||(t[1]=e=>J(u).inputValue=e)},null,8,["value"])])),_:1},8,["label"]),q(a,null,{default:W((()=>[q(n,{class:"w-90px",value:J(u).selectValue,"onUpdate:value":t[2]||(t[2]=e=>J(u).selectValue=e),placeholder:e.$t("Site.Proxy.index_26"),options:c},null,8,["value","placeholder"])])),_:1})])),_:1}),q(a,{label:" "},{default:W((()=>[q(d,{type:"primary",onClick:_},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])):ee("",!0)])),_:1},8,["model"]),q(h),q(d,{class:"mt-20px",onClick:x},{default:W((()=>[Y(F(e.$t("Site.Proxy.index_27")),1)])),_:1})]),q(m,null,{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_28")),1),K("li",null,F(e.$t("Site.Proxy.index_29")),1),K("li",null,F(e.$t("Site.Proxy.index_30")),1),K("li",null,F(e.$t("Site.Proxy.index_31")),1),K("li",null,F(e.$t("Site.Proxy.index_32"))+" css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map ",1)])),_:1})],64)}}}),Jt={class:"p-20px"},Xt={key:0},Yt=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),i=r(),{siteName:n}=G(i),o=async()=>{const e=await gt(n.value);if(l(e)){s.switchValue=e.gzip.gzip_status,s.inputType=e.gzip.gzip_types,s.selectLevel=Number(e.gzip.gzip_comp_level);let t="",l="m";e.gzip.gzip_min_length&&e.gzip.gzip_min_length.length>1&&(t=e.gzip.gzip_min_length.slice(0,-1),l=e.gzip.gzip_min_length.slice(-1)),s.inputValue=Number(t),s.selectLength=l}};o(),t({init:o});const u=D(null),s=Q({switchValue:!0,inputType:"",selectLevel:1,selectLength:"m",inputValue:1}),d={inputType:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"},inputValue:{required:!0,trigger:"blur",validator:(e,t)=>{if(!t)return new Error(a("Site.Proxy.index_41"))}}},p=[{label:"k",value:"k"},{label:"m",value:"m"}],c=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9}],_=async()=>{await(u.value?.validate());let e={site_name:n.value,gzip_status:s.switchValue?1:0,gzip_min_length:`${s.inputValue}${s.selectLength}`,gzip_comp_level:s.selectLevel,gzip_types:s.inputType};await Se(e),o()};return(e,t)=>{const l=lt,a=tt,i=et,n=it,o=at,r=nt,x=Ze,y=ot,h=C;return H(),M("div",Jt,[q(y,{ref_key:"formRef",ref:u,"label-width":150,model:J(s),rules:d,"label-placement":"left"},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_34")},{default:W((()=>[q(l,{value:J(s).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>J(s).switchValue=e),_]},null,8,["value"])])),_:1},8,["label"]),J(s).switchValue?(H(),M("div",Xt,[q(a,{label:e.$t("Site.Proxy.index_35"),path:"inputType"},{default:W((()=>[q(i,{value:J(s).inputType,"onUpdate:value":t[1]||(t[1]=e=>J(s).inputType=e),type:"textarea",placeholder:"Please input"},null,8,["value"])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Proxy.index_36")},{default:W((()=>[q(n,{value:J(s).selectLevel,"onUpdate:value":t[2]||(t[2]=e=>J(s).selectLevel=e),options:c},null,8,["value"])])),_:1},8,["label"]),q(r,null,{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_37"),path:"inputValue"},{default:W((()=>[q(o,{"show-button":!1,value:J(s).inputValue,"onUpdate:value":t[3]||(t[3]=e=>J(s).inputValue=e)},null,8,["value"])])),_:1},8,["label"]),q(a,null,{default:W((()=>[q(n,{class:"w-90px",value:J(s).selectLength,"onUpdate:value":t[4]||(t[4]=e=>J(s).selectLength=e),options:p},null,8,["value"])])),_:1})])),_:1}),q(a,{label:" "},{default:W((()=>[q(x,{type:"primary",onClick:_},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])):ee("",!0)])),_:1},8,["model"]),q(h,null,{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_38")),1),K("li",null,F(e.$t("Site.Proxy.index_39")),1),K("li",null,F(e.$t("Site.Proxy.index_40")),1)])),_:1})])}}}),Gt={class:"p-20px"},Qt=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),i=r(),{siteName:n}=G(i),o=async()=>{const e=await gt(n.value);l(e)&&(s.selectValue=e.proxy_log.log_type,s.inputValue=e.proxy_log.rsyslog_host,s.unx=e.proxy_log.log_path)};o(),t({init:o});const u=D(null),s=Q({inputValue:"",selectValue:"default",unx:""}),d={inputValue:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"},unx:{required:!0,message:a("Site.Proxy.index_41"),trigger:["blur","input"]}},p=[{label:a("Site.Proxy.index_54"),value:"default"},{label:a("Site.Proxy.index_55"),value:"off"},{label:a("Site.Proxy.index_56"),value:"file"},{label:a("Site.Proxy.index_57"),value:"rsyslog"}],c=async()=>{await(u.value?.validate());let e={site_name:n.value,log_type:s.selectValue,log_path:"file"===s.selectValue?s.unx:"rsyslog"===s.selectValue?s.inputValue:""};await ke(e),o()};return(e,t)=>{const l=it,a=tt,i=_t,n=et,o=Ze,r=ot;return H(),M("div",Gt,[q(r,{ref_key:"formRef",ref:u,"label-width":150,model:J(s),rules:d,"label-placement":"left"},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_51")},{default:W((()=>[q(l,{class:"w-300px",value:J(s).selectValue,"onUpdate:value":t[0]||(t[0]=e=>J(s).selectValue=e),options:p},null,8,["value"])])),_:1},8,["label"]),"file"==J(s).selectValue?(H(),le(a,{key:0,label:e.$t("Site.Proxy.index_52"),path:"unx"},{default:W((()=>[q(i,{class:"w-400px","checked-type":["dir"],value:J(s).unx,"onUpdate:value":t[1]||(t[1]=e=>J(s).unx=e)},null,8,["value"])])),_:1},8,["label"])):ee("",!0),"rsyslog"==J(s).selectValue?(H(),le(a,{key:1,label:e.$t("Site.Proxy.index_53"),path:"inputValue"},{default:W((()=>[q(n,{class:"w-300px!",value:J(s).inputValue,"onUpdate:value":t[2]||(t[2]=e=>J(s).inputValue=e),placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1},8,["label"])):ee("",!0),q(a,{label:" "},{default:W((()=>[q(o,{type:"primary",onClick:c},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),Zt={class:"p-20px"},el=I({__name:"index",setup(e,{expose:t}){const a=r(),{siteName:i}=G(a),n=async()=>{const e=await gt(i.value);l(e)&&(u.switchValue=e.websocket.websocket_status)};n(),t({init:n});const o=D(null),u=Q({switchValue:!1}),s=async()=>{await(o.value?.validate()),Pe({site_name:i.value,websocket_status:u.switchValue?1:0})};return(e,t)=>{const l=lt,a=tt,i=ot;return H(),M("div",Zt,[q(i,{ref_key:"formRef",ref:o,"label-width":150,model:J(u),"label-placement":"left"},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_58")},{default:W((()=>[q(l,{value:J(u).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>J(u).switchValue=e),s]},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),tl=I({__name:"index",setup(e){const{t:t}=A(),l=D("cache"),a=[{key:"cache",label:t("Site.Lable.index_31"),component:Ft},{key:"compressed",label:t("Site.Proxy.index_61"),component:Yt},{key:"black",label:t("Site.Proxy.index_62"),component:Bt},{key:"white",label:t("Site.Proxy.index_63"),component:jt},{key:"http",label:t("Site.Proxy.index_64"),component:Mt},{key:"log",label:t("Site.Proxy.index_51"),component:Qt},{key:"websocket",label:t("Site.Proxy.index_65"),component:el}];return(e,t)=>{const i=pt;return H(),le(i,{value:J(l),"onUpdate:value":t[0]||(t[0]=e=>X(l)?l.value=e:null),options:a},null,8,["value"])}}});var ll={exports:{}};
/*!
			 * clipboard.js v2.0.11
			 * https://clipboardjs.com/
			 *
			 * Licensed MIT © Zeno Rocha
			 */!function(e){var t;t=function(){return function(){var e={686:function(e,t,l){l.d(t,{default:function(){return w}});var a=l(279),i=l.n(a),n=l(370),o=l.n(n),r=l(817),u=l.n(r);function s(e){try{return document.execCommand(e)}catch(t){return!1}}var d=function(e){var t=u()(e);return s("cut"),t},p=function(e,t){var l=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),l=document.createElement("textarea");l.style.fontSize="12pt",l.style.border="0",l.style.padding="0",l.style.margin="0",l.style.position="absolute",l.style[t?"right":"left"]="-9999px";var a=window.pageYOffset||document.documentElement.scrollTop;return l.style.top="".concat(a,"px"),l.setAttribute("readonly",""),l.value=e,l}(e);t.container.appendChild(l);var a=u()(l);return s("copy"),l.remove(),a},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},l="";return"string"==typeof e?l=p(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?l=p(e.value,t):(l=u()(e),s("copy")),l};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,l=void 0===t?"copy":t,a=e.container,i=e.target,n=e.text;if("copy"!==l&&"cut"!==l)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==i){if(!i||"object"!==_(i)||1!==i.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===l&&i.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===l&&(i.hasAttribute("readonly")||i.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return n?c(n,{container:a}):i?"cut"===l?d(i):c(i,{container:a}):void 0};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){for(var l=0;l<t.length;l++){var a=t[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var l,a,i,n=f(e);if(t){var o=f(this).constructor;l=Reflect.construct(n,arguments,o)}else l=n.apply(this,arguments);return a=this,!(i=l)||"object"!==y(i)&&"function"!=typeof i?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a):i}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function b(e,t){var l="data-clipboard-".concat(e);if(t.hasAttribute(l))return t.getAttribute(l)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,e);var t,l,a,i=v(n);function n(e,t){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(l=i.call(this)).resolveOptions(t),l.listenClick(e),l}return t=n,l=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===y(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=o()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,l=this.action(t)||"copy",a=x({action:l,container:this.container,target:this.target(t),text:this.text(t)});this.emit(a?"success":"error",{action:l,text:a,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return b("action",e)}},{key:"defaultTarget",value:function(e){var t=b("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return b("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],a=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return c(e,t)}},{key:"cut",value:function(e){return d(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,l=!!document.queryCommandSupported;return t.forEach((function(e){l=l&&!!document.queryCommandSupported(e)})),l}}],l&&h(t.prototype,l),a&&h(t,a),n}(i()),w=g},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,l){var a=l(828);function i(e,t,l,a,i){var o=n.apply(this,arguments);return e.addEventListener(l,o,i),{destroy:function(){e.removeEventListener(l,o,i)}}}function n(e,t,l,i){return function(l){l.delegateTarget=a(l.target,t),l.delegateTarget&&i.call(e,l)}}e.exports=function(e,t,l,a,n){return"function"==typeof e.addEventListener?i.apply(null,arguments):"function"==typeof l?i.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return i(e,t,l,a,n)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var l=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===l||"[object HTMLCollection]"===l)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,l){var a=l(879),i=l(438);e.exports=function(e,t,l){if(!e&&!t&&!l)throw new Error("Missing required arguments");if(!a.string(t))throw new TypeError("Second argument must be a String");if(!a.fn(l))throw new TypeError("Third argument must be a Function");if(a.node(e))return function(e,t,l){return e.addEventListener(t,l),{destroy:function(){e.removeEventListener(t,l)}}}(e,t,l);if(a.nodeList(e))return function(e,t,l){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,l)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,l)}))}}}(e,t,l);if(a.string(e))return function(e,t,l){return i(document.body,e,t,l)}(e,t,l);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var l=e.hasAttribute("readonly");l||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),l||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var a=window.getSelection(),i=document.createRange();i.selectNodeContents(e),a.removeAllRanges(),a.addRange(i),t=a.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,l){var a=this.e||(this.e={});return(a[e]||(a[e]=[])).push({fn:t,ctx:l}),this},once:function(e,t,l){var a=this;function i(){a.off(e,i),t.apply(l,arguments)}return i._=t,this.on(e,i,l)},emit:function(e){for(var t=[].slice.call(arguments,1),l=((this.e||(this.e={}))[e]||[]).slice(),a=0,i=l.length;a<i;a++)l[a].fn.apply(l[a].ctx,t);return this},off:function(e,t){var l=this.e||(this.e={}),a=l[e],i=[];if(a&&t)for(var n=0,o=a.length;n<o;n++)a[n].fn!==t&&a[n].fn._!==t&&i.push(a[n]);return i.length?l[e]=i:delete l[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function l(a){if(t[a])return t[a].exports;var i=t[a]={exports:{}};return e[a](i,i.exports,l),i.exports}return l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l(686)}().default},e.exports=t()}(ll);const al=yt(ll.exports),il=e=>({toClipboard:(e,t)=>new Promise(((l,a)=>{const i=document.createElement("button"),n=new al(i,{text:()=>e,action:()=>"copy",container:void 0!==t?t:document.body});n.on("success",(e=>{n.destroy(),l(e)})),n.on("error",(e=>{n.destroy(),a(e)})),document.body.appendChild(i),i.click(),document.body.removeChild(i)}))}),nl={class:"mb-10px"},ol=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{data:i}=St(),n=D(""),r=D(""),u=D({readOnly:!0}),{toClipboard:s}=il();let d=D();const p=async()=>{(async()=>{const{message:e}=await $e({site_name:i.name});l(e)&&(r.value=e.site_conf)})()};return ae((()=>{p()})),t({init:p}),(e,t)=>{const l=Ze;return H(),M(te,null,[K("div",nl,F(e.$t("Site.Proxy.index_73")),1),q(xt,{path:J(n),"onUpdate:path":t[0]||(t[0]=e=>X(n)?n.value=e:null),value:J(r),"onUpdate:value":t[1]||(t[1]=e=>X(r)?r.value=e:null),config:J(u),height:530,readOnly:!0,"show-tips":!1},null,8,["path","value","config"]),q(l,{class:"mt-10px",ref_key:"copyBtn",ref:d,onClick:t[2]||(t[2]=e=>(async e=>{try{await s(e,d.value.$el),o.success(a("Site.Cert.index_1"))}catch(t){console.error(t),o.success(a("Site.Cert.index_2"))}})(J(r)))},{default:W((()=>[Y(F(e.$t("Public.Btn.Copy")),1)])),_:1},512)],64)}}}),rl={key:0},ul={href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#server",target:"_blank",class:"text-#20a53a"},sl={key:1},dl={href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#http",target:"_blank",class:"text-#20a53a"},pl=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{data:i}=St(),n=D(""),r=D(""),u=D("server_block"),s=[{value:"server_block",label:"server"},{value:"http_block",label:"http"}],d=async()=>{await Ce({site_name:i.name,conf_type:u.value,body:r.value}),_()},{toClipboard:p}=il();let c=D();const _=async()=>{(async()=>{const{message:e}=await $e({site_name:i.name});l(e)&&(r.value=e[u.value])})()};return ae((()=>{_()})),t({init:_}),(e,t)=>{const l=it,i=nt,x=Ze,y=C;return H(),M(te,null,[q(i,{class:"items-center mb-10px"},{default:W((()=>[Y(F(e.$t("Site.Proxy.index_68"))+" ",1),q(l,{class:"w-200px",value:J(u),"onUpdate:value":[t[0]||(t[0]=e=>X(u)?u.value=e:null),_],options:s},null,8,["value"])])),_:1}),q(xt,{path:J(n),"onUpdate:path":t[1]||(t[1]=e=>X(n)?n.value=e:null),value:J(r),"onUpdate:value":t[2]||(t[2]=e=>X(r)?r.value=e:null),config:s,height:400,"show-tips":!1},null,8,["path","value"]),q(i,{class:"mt-10px mb-10px"},{default:W((()=>[q(x,{type:"primary",onClick:d},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1}),q(x,{ref_key:"copyBtn",ref:c,onClick:t[3]||(t[3]=e=>(async e=>{try{await p(e,c.value.$el),o.success(a("Site.Cert.index_1"))}catch(t){console.error(t),o.success(a("Site.Cert.index_2"))}})(J(r)))},{default:W((()=>[Y(F(e.$t("Public.Btn.Copy")),1)])),_:1},512)])),_:1}),q(y,null,{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_69")),1),K("li",null,F(e.$t("Site.Proxy.index_70")),1),"server_block"==J(u)?(H(),M("li",rl,[Y(F(e.$t("Site.Proxy.index_71"))+" ",1),K("a",ul,F(e.$t("Site.Proxy.index_72")),1)])):(H(),M("li",sl,[Y(F(e.$t("Site.Proxy.index_71"))+" ",1),K("a",dl,F(e.$t("Site.Proxy.index_72")),1)]))])),_:1})],64)}}}),cl=I({__name:"index",setup(e){const{t:t}=A(),l=D("main"),a=[{key:"main",label:t("Site.Proxy.index_66"),component:ol},{key:"customize",label:t("Site.Proxy.index_67"),component:pl}];return(e,t)=>{const i=pt;return H(),le(i,{value:J(l),"onUpdate:value":t[0]||(t[0]=e=>X(l)?l.value=e:null),options:a},null,8,["value"])}}}),_l={class:"px-20px py-24px"},xl={class:"w-120px"},yl={class:"w-120px"},hl={class:"w-200px"},ml={class:"w-200px"},vl={class:"w-200px"},fl=I({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=A(),i=e,{isEdit:o,siteId:r,siteName:u,row:s,getList:d}=i.data,p=D(null),c=Q({redirectname:`${(new Date).valueOf()}`,type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),_={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error(a("Site.RulesError.index_23"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error(a("Site.RulesError.index_24"))},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error("Site.RulesError.index_25")}},x=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],y=[{label:"301",value:"301"},{label:"302",value:"302"}],h=D([]),m=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:v,setLoading:f}=P();return o&&s&&(c.redirectname=s.redirectname,c.type=s.type,c.holdpath=s.holdpath,c.redirecttype=s.redirecttype,c.redirectpath=s.redirectpath,c.domainorpath=s.domainorpath,c.redirectdomain=s.redirectdomain,c.tourl=s.tourl),(async()=>{try{f(!0);const{message:e}=await _e({site_name:u,id:r});l(e)&&(h.value=n(e.domain_list)?e.domain_list.map((e=>({label:e.name,value:e.name}))):[])}finally{f(!1)}})(),t({onConfirm:async({hide:e})=>{await(p.value?.validate());const t={...Z(c),site_name:u};o?await Ue(t):await Le(t),d?.(),e()}}),(e,t)=>{const l=lt,a=tt,i=nt,n=it,o=et,r=ct,u=C;return H(),M("div",_l,[q(r,{ref_key:"formRef",ref:p,model:J(c),rules:_},{default:W((()=>[q(i,{size:60},{default:W((()=>[q(a,{label:e.$t("Site.Lable.index_34")},{default:W((()=>[q(l,{value:J(c).type,"onUpdate:value":t[0]||(t[0]=e=>J(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),q(a,{label:e.$t("Site.TableRow.index_13"),"label-width":"120"},{default:W((()=>[q(l,{value:J(c).holdpath,"onUpdate:value":t[1]||(t[1]=e=>J(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),q(i,{size:30},{default:W((()=>[q(a,{label:e.$t("Site.TableRow.index_11")},{default:W((()=>[K("div",xl,[q(n,{value:J(c).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>J(c).domainorpath=e),m],options:x},null,8,["value"])])])),_:1},8,["label"]),q(a,{label:e.$t("Site.TableRow.index_12"),"label-width":"70"},{default:W((()=>[K("div",yl,[q(n,{value:J(c).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>J(c).redirecttype=e),options:y},null,8,["value"])])])),_:1},8,["label"])])),_:1}),"domain"===J(c).domainorpath?(H(),le(a,{key:0,label:e.$t("Site.Lable.index_32"),path:"redirectdomain"},{default:W((()=>[K("div",hl,[q(n,{value:J(c).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>J(c).redirectdomain=e),multiple:!0,loading:J(v),options:J(h),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1},8,["label"])):ee("",!0),"path"===J(c).domainorpath?(H(),le(a,{key:1,label:e.$t("Site.Lable.index_30"),path:"redirectpath"},{default:W((()=>[K("div",ml,[q(o,{value:J(c).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>J(c).redirectpath=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])):ee("",!0),q(a,{label:e.$t("Site.Lable.index_33"),path:"tourl"},{default:W((()=>[K("div",vl,[q(o,{value:J(c).tourl,"onUpdate:value":t[6]||(t[6]=e=>J(c).tourl=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),q(u,{class:"mt-12px"},{default:W((()=>[K("li",null,F(e.$t("Site.Config.index_77")),1),K("li",null,F(e.$t("Site.Config.index_78")),1),K("li",null,F(e.$t("Site.Config.index_79")),1),K("li",null,F(e.$t("Site.Config.index_80")),1),K("li",null,F(e.$t("Site.Config.index_81")),1),K("li",null,F(e.$t("Site.Config.index_82")),1)])),_:1})])}}}),bl={class:"p-20px"},gl={class:"mt-12px"},wl=I({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:i,getList:n}=a.data,r=t,u=D(""),s=D(""),d=async()=>{const{message:e}=await Ve({path:i.redirect_conf_file,data:u.value,encoding:s.value});l(e)&&o.success(e.msg),n?.(),r("close")};return(async()=>{const{message:e}=await Te({path:i.redirect_conf_file});l(e)&&(u.value=e.data,s.value=e.encoding)})(),(e,t)=>{const l=Ze,a=C;return H(),M("div",bl,[q(xt,{value:J(u),"onUpdate:value":t[0]||(t[0]=e=>X(u)?u.value=e:null),height:350,"show-tips":!0},null,8,["value"]),K("div",gl,[q(l,{type:"primary",onClick:d},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})]),q(a,{class:"mt-24px"},{default:W((()=>[K("li",null,F(e.$t("Site.Config.index_83")),1)])),_:1})])}}}),Sl=I({__name:"index",setup(e,{expose:t}){const{t:l}=A(),{data:a}=St(),i=e=>({site_name:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:o,table:r,columns:u}=k([{title:l("Site.TableRow.index_9"),key:"name",ellipsis:{tooltip:{width:"trigger"}},render:e=>"domain"===e.domainorpath&&e.redirectdomain.length?e.redirectdomain.join("、"):e.redirectpath},{title:l("Site.TableRow.index_11"),key:"name",width:90,render:e=>"domain"===e.domainorpath?"Domain":"Approach"},{key:"tourl",title:l("Site.TableRow.index_10"),width:140},{key:"type",title:l("Site.TableRow.index_14"),width:100,render:e=>q(T,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await Ue({...i(e),type:t,holdpath:e.holdpath,errorpage:0}),e.type=t}},null)},L({width:120,options:e=>[{label:l("Site.TableOP.index_2"),onClick:()=>{h(e)}},{label:l("Site.TableOP.index_7"),onClick:()=>{x(e)}},{label:l("Public.Btn.Del"),onClick:()=>{w({title:`${l("Site.Batch.index_14")} [${e.redirectname}]`,content:l("Site.Batch.index_15"),onConfirm:async({hide:t})=>{await Re({site_name:a.name,redirectname:e.redirectname}),p(),t()}})}}]})]),{loading:s,setLoading:d}=P(),p=async()=>{try{d(!0);const{message:e}=await je({sitename:a.name});r.data=n(e)?e:[]}finally{o.value=[],d(!1)}},c=U(l("Site.Config.index_74"),{row:void 0,siteId:a.id,siteName:a.name,isEdit:!1,getList:p}),_=()=>{c.data.row=void 0,c.data.isEdit=!1,c.title=l("Site.Config.index_74"),c.show=!0},x=e=>{c.data.row=e,c.data.isEdit=!0,c.title=`${l("Site.Config.index_75")} [${e.redirectname}]`,c.show=!0},y=U("",{row:void 0,siteName:a.name,getList:p}),h=e=>{y.data.row=e,y.title=`${l("Site.Config.index_76")} [${e.redirectname}]`,y.show=!0};return p(),t({init:p}),(e,t)=>{const l=Ze,a=$,i=f,n=C,d=v;return H(),M("div",null,[q(i,null,{toolsLeft:W((()=>[q(l,{type:"primary",onClick:_},{default:W((()=>[Y(F(e.$t("Site.Config.index_73")),1)])),_:1})])),table:W((()=>[q(a,{"checked-row-keys":J(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>X(o)?o.value=e:null),"row-key":"redirectname",loading:J(s),"max-height":440,data:J(r).data,columns:J(u)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),q(n,{class:"mt-20px"},{default:W((()=>[K("li",null,F(e.$t("Site.Config.index_84")),1)])),_:1}),q(d,{show:J(c).show,"onUpdate:show":t[1]||(t[1]=e=>J(c).show=e),title:J(c).title,data:J(c).data,width:660,footer:!0,component:fl},null,8,["show","title","data"]),q(d,{show:J(y).show,"onUpdate:show":t[2]||(t[2]=e=>J(y).show=e),title:J(y).title,data:J(y).data,width:580,component:wl},null,8,["show","title","data"])])}}}),kl={class:"m-15px"},Pl={class:"list-none!"},$l={class:"list-none!"},Cl={class:"list-none!"},Ll=I({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=A(),a=e,{getList:i,siteName:n}=a.data,o=()=>{"2"===_.proxy_type?_.proxy_host="$http_host":_.proxy_host=""},r=e=>{if("2"===_.proxy_type)return void(_.proxy_host="$http_host");let t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),u.value||(_.proxy_host=t)},u=D(!1),s=()=>{_.proxy_host&&"$http_host"!==_.proxy_host&&(u.value=!0)},p=D(null),c=[{label:l("Site.Proxy.index_11"),value:"1"},{label:l("Site.Proxy.index_12"),value:"2"}],_=Q({proxy_path:"",proxy_type:"1",url:"http://",unx:"",proxy_host:"$http_host",remark:"",keepuri:1,rewrite:[{key:"",value:""}]}),x=D([{key:"",value:""}]),y={proxy_path:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(""===t.trim())return new Error(l("Site.RulesError.index_33"))}},url:{required:!0,trigger:["blur","change"],validator:(e,t)=>!!t.replace(/^http[s]?:\/\//,"")||new Error(l("Site.Proxy.index_14"))},unx:{required:!0,message:l("Site.PHP.add_site_26"),trigger:["blur","change"]},proxy_host:{required:!0,message:l("Site.PHP.add_site_26"),trigger:["blur","change"]}};return t({onConfirm:async()=>{await(p.value?.validate());const e=x.value.filter((e=>""!==e.key||""!==e.value)).map((e=>({dir1:e.key,dir2:e.value})));let t={keepuri:_.keepuri,site_name:n,remark:_.remark,proxy_type:"1"==_.proxy_type?"http":"unix",proxy_pass:"1"==_.proxy_type?_.url:_.unx,proxy_path:_.proxy_path,proxy_host:_.proxy_host,rewritedir:JSON.stringify(e)};await Ee(t),i?.()}}),(e,t)=>{const l=lt,a=tt,i=et,n=it,u=_t,h=nt,m=rt,v=d,f=ct,b=C;return H(),M("div",kl,[q(f,{ref_key:"formRef",ref:p,model:J(_),rules:y},{default:W((()=>["1"==J(_).proxy_type?(H(),le(a,{key:0,label:"Show Proxy Path"},{default:W((()=>[q(l,{value:J(_).keepuri,"onUpdate:value":t[0]||(t[0]=e=>J(_).keepuri=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})):ee("",!0),q(a,{label:e.$t("Site.TableRow.index_32"),path:"proxy_path",class:"w-570px"},{default:W((()=>[q(i,{value:J(_).proxy_path,"onUpdate:value":t[1]||(t[1]=e=>J(_).proxy_path=e),placeholder:e.$t("Site.Placeholder.Index_9")},null,8,["value","placeholder"])])),_:1},8,["label"]),q(h,null,{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_1")},{default:W((()=>[q(n,{value:J(_).proxy_type,"onUpdate:value":[t[2]||(t[2]=e=>J(_).proxy_type=e),o],options:c,class:"w-120px"},null,8,["value"])])),_:1},8,["label"]),"1"==J(_).proxy_type?(H(),le(a,{key:0,path:"url",class:"w-310px"},{default:W((()=>[q(i,{value:J(_).url,"onUpdate:value":t[3]||(t[3]=e=>J(_).url=e),onInput:r},null,8,["value"])])),_:1})):(H(),le(a,{key:1,path:"unx",class:"w-310px"},{default:W((()=>[q(u,{"checked-type":["dir","file"],value:J(_).unx,"onUpdate:value":t[4]||(t[4]=e=>J(_).unx=e),onChange:r},null,8,["value"])])),_:1}))])),_:1}),q(a,{label:e.$t("Site.Proxy.index_2"),path:"proxy_host",class:"w-570px"},{default:W((()=>[q(m,{trigger:"hover"},{trigger:W((()=>[q(i,{value:J(_).proxy_host,"onUpdate:value":t[5]||(t[5]=e=>J(_).proxy_host=e),onBlur:s},null,8,["value"])])),default:W((()=>[Y(" "+F(e.$t("Site.Proxy.index_75")),1)])),_:1})])),_:1},8,["label"]),"1"==J(_).proxy_type?(H(),le(a,{key:1,label:"URL Rewrite"},{default:W((()=>[q(v,{class:"w-440px",min:1,value:J(x),"onUpdate:value":t[6]||(t[6]=e=>X(x)?x.value=e:null),preset:"pair","key-placeholder":"/aaa","value-placeholder":"/bbb"},null,8,["value"])])),_:1})):ee("",!0),q(a,{label:e.$t("Site.Proxy.index_3"),class:"w-570px"},{default:W((()=>[q(i,{value:J(_).remark,"onUpdate:value":t[7]||(t[7]=e=>J(_).remark=e),placeholder:e.$t("Site.Proxy.index_5")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),q(b,{class:"mt-16px"},{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_76")),1),K("li",null,F(e.$t("Site.Proxy.index_77")),1),K("li",Pl,F(e.$t("Site.Proxy.index_78")),1),K("li",$l,F(e.$t("Site.Proxy.index_79")),1),K("li",Cl,F(e.$t("Site.Proxy.index_80")),1)])),_:1})])}}}),Ul={class:"p-20px"},Tl={class:"w-280px"},Vl=I({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=A(),a=r(),{siteName:i,proxyPath:n}=G(a),o=e,{getList:u}=o.data,s=D(null),d=Q({name:""}),p={name:{required:!0,message:l("Site.Proxy.index_20"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(s.value?.validate()),await ze({site_name:i.value,proxy_path:n.value,ip_type:"white",ips:d.name}),u?.(),e()}}),(e,t)=>{const l=et,a=tt,i=ct,n=C;return H(),M("div",Ul,[q(i,{ref_key:"formRef",ref:s,model:J(d),rules:p},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_18"),path:"name"},{default:W((()=>[K("div",Tl,[q(l,{type:"textarea",value:J(d).name,"onUpdate:value":t[0]||(t[0]=e=>J(d).name=e),placeholder:e.$t("Site.Proxy.index_20")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),q(n,{class:"mt-4px"},{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_19")),1)])),_:1})])}}}),Rl=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{loading:i,setLoading:n}=P(),o=r(),{siteName:u,proxyPath:s}=G(o),d=async()=>{try{n(!0);const e=await wt(u.value,s.value);l(e)&&(c.data=e.ip_limit.ip_white.map((e=>({ip:e}))))}finally{p.value=[],n(!1)}};d(),t({init:d});const{keys:p,table:c,columns:_}=k([{type:"selection",width:40},{key:"ip",title:a("Site.Proxy.index_18"),ellipsis:{tooltip:{width:"trigger"}}},L({width:130,options:e=>[{label:a("Public.Btn.Del"),onClick:()=>{w({title:`${a("Site.TableOP.index_6")} [${e.ip}]`,content:a("Site.Proxy.index_23"),onConfirm:async()=>{await Ne({site_name:u.value,proxy_path:s.value,ip_type:"white",ip:e.ip}),d()}})}}]})]),x=[{key:"del",label:a("Site.Batch.index_20"),onBatch:e=>{w({title:a("Site.Batch.index_21"),content:a("Site.Batch.index_11"),onConfirm:async()=>{await Be({site_name:u.value,proxy_path:s.value,ip_type:"white",ips:e.map((e=>e.ip)).join("\n")}),d()}})}}],y=()=>{h.title=a("Site.Proxy.index_22"),h.show=!0},h=U(a("Site.Proxy.index_22"),{getList:d});return(e,t)=>{const l=Ze,a=$,n=g,o=f,r=v;return H(),M("div",null,[q(o,null,{toolsLeft:W((()=>[q(l,{type:"primary",onClick:y},{default:W((()=>[Y(F(e.$t("Site.Proxy.index_22")),1)])),_:1})])),table:W((()=>[q(a,{"checked-row-keys":J(p),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>X(p)?p.value=e:null),"row-key":"ip",loading:J(i),"max-height":440,data:J(c).data,columns:J(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:W((()=>[q(n,{"checked-row-keys":J(p),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>X(p)?p.value=e:null),"row-key":"ip",data:J(c).data,options:x},null,8,["checked-row-keys","data"])])),_:1}),q(r,{show:J(h).show,"onUpdate:show":t[2]||(t[2]=e=>J(h).show=e),title:J(h).title,data:J(h).data,width:480,footer:!0,component:Vl},null,8,["show","title","data"])])}}}),jl={class:"p-20px"},El={class:"w-280px"},zl=I({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=A(),a=r(),{siteName:i,proxyPath:n}=G(a),o=e,{getList:u}=o.data,s=D(null),d=Q({name:""}),p={name:{required:!0,message:l("Site.Proxy.index_20"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(s.value?.validate()),await ze({site_name:i.value,proxy_path:n.value,ip_type:"black",ips:d.name}),u?.(),e()}}),(e,t)=>{const l=et,a=tt,i=ct,n=C;return H(),M("div",jl,[q(i,{ref_key:"formRef",ref:s,model:J(d),rules:p},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_18"),path:"name"},{default:W((()=>[K("div",El,[q(l,{type:"textarea",value:J(d).name,"onUpdate:value":t[0]||(t[0]=e=>J(d).name=e),placeholder:e.$t("Site.Proxy.index_20")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),q(n,{class:"mt-4px"},{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_19")),1)])),_:1})])}}}),Nl=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{loading:i,setLoading:n}=P(),o=r(),{siteName:u,proxyPath:s}=G(o),d=async()=>{try{n(!0);const e=await wt(u.value,s.value);l(e)&&(c.data=e.ip_limit.ip_black.map((e=>({ip:e}))))}finally{p.value=[],n(!1)}};d(),t({init:d});const{keys:p,table:c,columns:_}=k([{type:"selection",width:40},{key:"ip",title:a("Site.Proxy.index_18"),ellipsis:{tooltip:{width:"trigger"}}},L({width:130,options:e=>[{label:a("Public.Btn.Del"),onClick:()=>{w({title:`${a("Site.TableOP.index_6")} [${e.ip}]`,content:a("Site.Proxy.index_23"),onConfirm:async()=>{await Ne({site_name:u.value,proxy_path:s.value,ip_type:"black",ip:e.ip}),d()}})}}]})]),x=[{key:"del",label:a("Site.Batch.index_20"),onBatch:e=>{w({title:a("Site.Batch.index_21"),content:a("Site.Batch.index_11"),onConfirm:async()=>{await Be({site_name:u.value,proxy_path:s.value,ip_type:"black",ips:e.map((e=>e.ip)).join("\n")}),d()}})}}],y=()=>{h.title=a("Site.Proxy.index_21"),h.show=!0},h=U(a("Site.Proxy.index_21"),{getList:d});return(e,t)=>{const l=Ze,a=$,n=g,o=f,r=v;return H(),M("div",null,[q(o,null,{toolsLeft:W((()=>[q(l,{type:"primary",onClick:y},{default:W((()=>[Y(F(e.$t("Site.Proxy.index_21")),1)])),_:1})])),table:W((()=>[q(a,{"checked-row-keys":J(p),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>X(p)?p.value=e:null),"row-key":"ip",loading:J(i),"max-height":440,data:J(c).data,columns:J(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:W((()=>[q(n,{"checked-row-keys":J(p),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>X(p)?p.value=e:null),"row-key":"ip",data:J(c).data,options:x},null,8,["checked-row-keys","data"])])),_:1}),q(r,{show:J(h).show,"onUpdate:show":t[2]||(t[2]=e=>J(h).show=e),title:J(h).title,data:J(h).data,width:480,footer:!0,component:zl},null,8,["show","title","data"])])}}}),Bl={class:"p-20px"},Ol={key:0},ql=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),i=r(),{siteName:n,proxyPath:o}=G(i),u=D(null),s=Q({switchValue:!1,inputValue:1,selectValue:"m"}),d=async()=>{const e=await wt(n.value,o.value);l(e)&&(s.switchValue=e.proxy_cache.cache_status,e.proxy_cache.expires.length>1&&(s.inputValue=Number(e.proxy_cache.expires.slice(0,-1)),s.selectValue=e.proxy_cache.expires.slice(-1)))};d(),t({init:d});const p={inputValue:{required:!0,validator(e,t){if(!t)return new Error(a("Site.Proxy.index_26"))},trigger:["input","blur"]}},c=[{label:a("Public.Unit.Minute"),value:"m"},{label:a("Public.Unit.Hour"),value:"h"},{label:a("Public.Unit.Day"),value:"d"}],_=async()=>{await(u.value?.validate());let e={site_name:n.value,proxy_path:o.value,cache_status:s.switchValue?1:0,expires:`${s.inputValue}${s.selectValue}`};await Oe(e),d()};return(e,t)=>{const l=lt,a=tt,i=at,n=it,o=nt,r=Ze,d=ot,x=C;return H(),M(te,null,[K("div",Bl,[q(d,{ref_key:"formRef",ref:u,"label-width":100,model:J(s),rules:p,"label-placement":"left"},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_24")},{default:W((()=>[q(l,{value:J(s).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>J(s).switchValue=e),_]},null,8,["value"])])),_:1},8,["label"]),J(s).switchValue?(H(),M("div",Ol,[q(o,null,{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_25"),path:"inputValue"},{default:W((()=>[q(i,{"show-button":!1,value:J(s).inputValue,"onUpdate:value":t[1]||(t[1]=e=>J(s).inputValue=e)},null,8,["value"])])),_:1},8,["label"]),q(a,null,{default:W((()=>[q(n,{class:"w-90px",value:J(s).selectValue,"onUpdate:value":t[2]||(t[2]=e=>J(s).selectValue=e),options:c},null,8,["value"])])),_:1})])),_:1}),q(a,{label:" "},{default:W((()=>[q(r,{type:"primary",onClick:_},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])):ee("",!0)])),_:1},8,["model"])]),q(x,null,{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_28")),1),K("li",null,F(e.$t("Site.Proxy.index_29")),1),K("li",null,F(e.$t("Site.Proxy.index_30")),1),K("li",null,F(e.$t("Site.Proxy.index_31")),1),K("li",null,F(e.$t("Site.Proxy.index_32"))+" css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map ",1)])),_:1})],64)}}}),Il={class:"p-20px"},Al={key:0},Dl=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),i=r(),{siteName:n,proxyPath:o}=G(i),u=async()=>{const e=await wt(n.value,o.value);if(l(e)){d.switchValue=e.gzip.gzip_status,d.inputType=e.gzip.gzip_types,d.selectLevel=Number(e.gzip.gzip_comp_level);let t="",l="m";e.gzip.gzip_min_length&&e.gzip.gzip_min_length.length>1&&(t=e.gzip.gzip_min_length.slice(0,-1),l=e.gzip.gzip_min_length.slice(-1)),d.inputValue=Number(t),d.selectLength=l}};u(),t({init:u});const s=D(null),d=Q({switchValue:!0,inputType:"",selectLevel:1,selectLength:"m",inputValue:1}),p={inputType:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"},inputValue:{required:!0,trigger:"blur",validator:(e,t)=>{if(!t)return new Error(a("Site.Proxy.index_41"))}}},c=[{label:"k",value:"k"},{label:"m",value:"m"}],_=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9}],x=async()=>{await(s.value?.validate());let e={site_name:n.value,proxy_path:o.value,gzip_status:d.switchValue?1:0,gzip_min_length:`${d.inputValue}${d.selectLength}`,gzip_comp_level:d.selectLevel,gzip_types:d.inputType};await qe(e),u()};return(e,t)=>{const l=lt,a=tt,i=et,n=it,o=at,r=nt,u=Ze,y=ot,h=C;return H(),M("div",Il,[q(y,{ref_key:"formRef",ref:s,"label-width":150,model:J(d),rules:p,"label-placement":"left"},{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_34")},{default:W((()=>[q(l,{value:J(d).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>J(d).switchValue=e),x]},null,8,["value"])])),_:1},8,["label"]),J(d).switchValue?(H(),M("div",Al,[q(a,{label:e.$t("Site.Proxy.index_35"),path:"inputType"},{default:W((()=>[q(i,{value:J(d).inputType,"onUpdate:value":t[1]||(t[1]=e=>J(d).inputType=e),type:"textarea",placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Proxy.index_36")},{default:W((()=>[q(n,{value:J(d).selectLevel,"onUpdate:value":t[2]||(t[2]=e=>J(d).selectLevel=e),placeholder:"Select",options:_},null,8,["value"])])),_:1},8,["label"]),q(r,null,{default:W((()=>[q(a,{label:e.$t("Site.Proxy.index_37"),path:"inputValue"},{default:W((()=>[q(o,{"show-button":!1,value:J(d).inputValue,"onUpdate:value":t[3]||(t[3]=e=>J(d).inputValue=e)},null,8,["value"])])),_:1},8,["label"]),q(a,null,{default:W((()=>[q(n,{class:"w-90px",value:J(d).selectLength,"onUpdate:value":t[4]||(t[4]=e=>J(d).selectLength=e),options:c},null,8,["value"])])),_:1})])),_:1}),q(a,{label:" "},{default:W((()=>[q(u,{type:"primary",onClick:x},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])):ee("",!0)])),_:1},8,["model"]),q(h,null,{default:W((()=>[K("li",null,F(e.$t("Site.Proxy.index_38")),1),K("li",null,F(e.$t("Site.Proxy.index_39")),1),K("li",null,F(e.$t("Site.Proxy.index_40")),1)])),_:1})])}}}),Hl={class:"p-20px"},Ml=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),i=r(),{siteName:n,proxyPath:o}=G(i),u=D(!1),s=async()=>{const e=await wt(n.value,o.value);l(e)&&(c.proxy_type=e.proxy_type?"http":"unix",c.proxy_pass=e.proxy_pass,c.proxy_host=e.proxy_host,c.proxy_path=e.proxy_path,c.remark=e.remark,u.value=e.global_websocket,c.websocket=e.websocket?.websocket_status,c.proxy_connect_timeout=e.timeout?.proxy_connect_timeout,c.proxy_send_timeout=e.timeout?.proxy_send_timeout,c.proxy_read_timeout=e.timeout?.proxy_read_timeout,c.keepuri=e.keepuri,_.value=e.rewritedir.length?e.rewritedir.map((e=>({key:e.dir1,value:e.dir2}))):[{key:"",value:""}])};s(),t({init:s});const p=D(null),c=Q({keepuri:1,proxy_path:"",proxy_pass:"",proxy_host:"",proxy_type:"http",remark:"",websocket:!1,proxy_connect_timeout:"",proxy_send_timeout:"",proxy_read_timeout:"",rewrite:[{key:"",value:""}]}),_=D([{key:"",value:""}]),x={proxy_path:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"},proxy_pass:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"},proxy_host:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"},proxy_connect_timeout:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"},proxy_send_timeout:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"},proxy_read_timeout:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"}},y=[{label:a("Site.Proxy.index_11"),value:"http"},{label:a("Site.Proxy.index_12"),value:"unix"}],h=async()=>{await(p.value?.validate());const e=_.value.filter((e=>""!==e.key||""!==e.value)).map((e=>({dir1:e.key,dir2:e.value})));let t={site_name:n.value,proxy_path:c.proxy_path,proxy_pass:c.proxy_pass,proxy_host:c.proxy_host,proxy_type:c.proxy_type,remark:c.remark,websocket:c.websocket?1:0,proxy_connect_timeout:c.proxy_connect_timeout,proxy_send_timeout:c.proxy_send_timeout,proxy_read_timeout:c.proxy_read_timeout,keepuri:c.keepuri,rewritedir:JSON.stringify(e)};await Ie(t),s()};return(e,t)=>{const l=lt,a=tt,i=et,n=it,o=d,r=ut,s=rt,m=ht,v=Ze,f=ot;return H(),M("div",Hl,[q(f,{ref_key:"formRef",ref:p,"label-width":180,model:J(c),rules:x,"label-placement":"left"},{default:W((()=>["http"===J(c).proxy_type?(H(),le(a,{key:0,label:"Show Proxy Path"},{default:W((()=>[q(l,{value:J(c).keepuri,"onUpdate:value":t[0]||(t[0]=e=>J(c).keepuri=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})):ee("",!0),q(a,{label:e.$t("Site.TableRow.index_21"),path:"proxy_path"},{default:W((()=>[q(i,{class:"w-400px!",value:J(c).proxy_path,"onUpdate:value":t[1]||(t[1]=e=>J(c).proxy_path=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Proxy.index_1")},{default:W((()=>[q(n,{class:"w-200px",value:J(c).proxy_type,"onUpdate:value":t[2]||(t[2]=e=>J(c).proxy_type=e),options:y},null,8,["value"])])),_:1},8,["label"]),q(a,{label:" ",path:"proxy_pass"},{default:W((()=>[q(i,{class:"w-400px!",value:J(c).proxy_pass,"onUpdate:value":t[3]||(t[3]=e=>J(c).proxy_pass=e),placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1}),q(a,{label:e.$t("Site.Proxy.index_2"),path:"proxy_host"},{default:W((()=>[q(i,{class:"w-400px!",value:J(c).proxy_host,"onUpdate:value":t[4]||(t[4]=e=>J(c).proxy_host=e),placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1},8,["label"]),"http"===J(c).proxy_type?(H(),le(a,{key:1,label:"URL Rewrite"},{default:W((()=>[q(o,{class:"w-400px",min:1,value:J(_),"onUpdate:value":t[5]||(t[5]=e=>X(_)?_.value=e:null),preset:"pair","key-placeholder":"/aaa","value-placeholder":"/bbb"},null,8,["value"])])),_:1})):ee("",!0),q(a,{label:e.$t("Docker.Container.create.index_46")},{default:W((()=>[q(i,{class:"w-400px!",value:J(c).remark,"onUpdate:value":t[6]||(t[6]=e=>J(c).remark=e),placeholder:e.$t("Site.Proxy.index_41")},null,8,["value","placeholder"])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Proxy.index_58")},{default:W((()=>[q(s,{trigger:"hover"},{trigger:W((()=>[q(r,{checked:J(c).websocket,"onUpdate:checked":t[7]||(t[7]=e=>J(c).websocket=e),disabled:J(u)},null,8,["checked","disabled"])])),default:W((()=>[Y(" "+F(e.$t("Site.Tips.index_16")),1)])),_:1})])),_:1},8,["label"]),q(a,{label:e.$t("Site.Lable.index_42"),path:"proxy_connect_timeout"},{default:W((()=>[q(m,ie(e.$attrs,{class:"w-400px!",value:J(c).proxy_connect_timeout,"onUpdate:value":t[8]||(t[8]=e=>J(c).proxy_connect_timeout=e),text:"Sec"}),null,16,["value"])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Lable.index_43"),path:"proxy_send_timeout"},{default:W((()=>[q(m,ie(e.$attrs,{class:"w-400px!",value:J(c).proxy_send_timeout,"onUpdate:value":t[9]||(t[9]=e=>J(c).proxy_send_timeout=e),text:"Sec"}),null,16,["value"])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Lable.index_44"),path:"proxy_read_timeout"},{default:W((()=>[q(m,ie(e.$attrs,{class:"w-400px!",value:J(c).proxy_read_timeout,"onUpdate:value":t[10]||(t[10]=e=>J(c).proxy_read_timeout=e),text:"Sec"}),null,16,["value"])])),_:1},8,["label"]),q(a,{label:" "},{default:W((()=>[q(v,{type:"primary",onClick:h},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),Kl={class:"p-20px"},Wl=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),i=r(),{siteName:n,proxyPath:o}=G(i),u=async()=>{const e=await wt(n.value,o.value);l(e)&&(d.configValue=e.custom_conf)};u(),t({init:u});const s=D(null),d=Q({configValue:""}),p={configValue:{required:!0,message:a("Site.Proxy.index_41"),trigger:"blur"}},c=async()=>{await(s.value?.validate()),await Ae({site_name:n.value,proxy_path:o.value,custom_conf:d.configValue}),u()};return(e,t)=>{const l=et,a=tt,i=Ze,n=ot,o=C;return H(),M("div",Kl,[q(n,{ref_key:"formRef",ref:s,"label-width":180,model:J(d),rules:p,"label-placement":"left"},{default:W((()=>[q(a,{label:e.$t("Site.TableRow.index_21"),path:"configValue"},{default:W((()=>[q(l,{class:"w-400px!",rows:6,type:"textarea",value:J(d).configValue,"onUpdate:value":t[0]||(t[0]=e=>J(d).configValue=e),placeholder:'Line by line configuration, please end with, for example：\nproxy_set_header Cookie "cookie_name=cookie_value";\nallow 192.168.1.0/24;\naccess_log /www/wwwlogs/xxx.log;'},null,8,["value"])])),_:1},8,["label"]),q(a,{label:" "},{default:W((()=>[q(i,{type:"primary",onClick:c},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"]),q(o,null,{default:W((()=>[K("li",null,F(e.$t("Site.Tips.index_1")),1),K("li",null,[Y(F(e.$t("Site.Tips.index_2")),1),t[1]||(t[1]=K("br",null,null,-1)),Y(" "+F(e.$t("Site.Tips.index_4")),1),t[2]||(t[2]=K("br",null,null,-1)),Y(" "+F(e.$t("Site.Tips.index_5")),1),t[3]||(t[3]=K("br",null,null,-1)),Y(" "+F(e.$t("Site.Tips.index_6")),1),t[4]||(t[4]=K("br",null,null,-1)),Y(" "+F(e.$t("Site.Tips.index_7")),1),t[5]||(t[5]=K("br",null,null,-1)),t[6]||(t[6]=Y(" limit_except POST{")),t[7]||(t[7]=K("br",null,null,-1)),t[8]||(t[8]=Y("   allow 192.168.1.0/24;")),t[9]||(t[9]=K("br",null,null,-1)),t[10]||(t[10]=Y("   deny all;")),t[11]||(t[11]=K("br",null,null,-1)),t[12]||(t[12]=Y(" }")),t[13]||(t[13]=K("br",null,null,-1)),Y(" "+F(e.$t("Site.Tips.index_11")),1)]),K("li",null,F(e.$t("Site.Tips.index_3")),1)])),_:1})])}}}),Fl={class:"p-20px"},Jl=I({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=A(),a=r(),{siteName:i,proxyPath:n}=G(a),o=e,{getList:u}=o.data,s=D(l("Site.Tips.index_15")),d=D(null),c=Q({oldstr:"",newstr:"",sub_type:[]}),_=()=>{x(c.sub_type)},x=e=>{const t=e.includes("i")?l("Site.Tips.index_12"):"",a=e.includes("o")?l("Site.Tips.index_13"):"",i=e.includes("r")?l("Site.Tips.index_14"):"";switch(e.length){case 0:s.value=`${l("Site.Lable.index_48")} ${c.oldstr} ${l("Site.Lable.index_51")} ${c.newstr}`;break;case 1:s.value=`${l("Site.Lable.index_49")} ${a?`${l("Docker.Container.index_26.index_2")}`:""} ${c.oldstr} ${l("Site.Lable.index_51")} ${c.newstr}，${l("Site.Lable.index_50")} ${t||a||i}`;break;case 2:s.value=`${l("Site.Lable.index_49")} ${a?`${l("Docker.Container.index_26.index_2")}`:""} ${c.oldstr} ${l("Site.Lable.index_51")} ${c.newstr}，${l("Site.Lable.index_50")} ${t||a||i} ${l("Site.Lable.index_52")} ${i||a||t}`;break;case 3:s.value=`${l("Site.Lable.index_49")} ${c.oldstr} ${l("Site.Lable.index_51")} ${c.newstr} ，${l("Site.Lable.index_50")} ${t}、${a} ${l("Site.Lable.index_52")} s${i}`}},y={oldstr:{required:!0,message:l("Site.Proxy.index_41"),trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(d.value?.validate());let t={site_name:i.value,proxy_path:n.value,oldstr:c.oldstr,newstr:c.newstr,sub_type:c.sub_type?c.sub_type.join(""):"g"};await De(t),u?.(),e()}}),(e,t)=>{const l=et,a=tt,i=ut,n=p,o=st,r=ct;return H(),M("div",Fl,[q(r,{ref_key:"formRef",ref:d,model:J(c),rules:y},{default:W((()=>[q(a,{label:e.$t("Site.Lable.index_19"),path:"oldstr"},{default:W((()=>[q(l,{class:"w-280px",value:J(c).oldstr,"onUpdate:value":t[0]||(t[0]=e=>J(c).oldstr=e),placeholder:e.$t("Site.Placeholder.Index_10"),onInput:_},null,8,["value","placeholder"])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Lable.index_15")},{default:W((()=>[q(l,{class:"w-280px",value:J(c).newstr,"onUpdate:value":t[1]||(t[1]=e=>J(c).newstr=e),placeholder:e.$t("Site.Placeholder.Index_10"),onInput:_},null,8,["value","placeholder"])])),_:1},8,["label"]),q(a,{label:" "},{default:W((()=>[q(o,{value:J(c).sub_type,"onUpdate:value":[t[2]||(t[2]=e=>J(c).sub_type=e),x]},{default:W((()=>[q(n,{"item-style":"display: flex;"},{default:W((()=>[q(i,{value:"i",label:e.$t("Site.Tips.index_12")},null,8,["label"]),q(i,{value:"o",label:e.$t("Site.Tips.index_13")},null,8,["label"]),q(i,{value:"r",label:e.$t("Site.Tips.index_14")},null,8,["label"])])),_:1})])),_:1},8,["value"])])),_:1}),q(a,{label:" "},{default:W((()=>[Y(F(J(s)),1)])),_:1})])),_:1},8,["model"])])}}}),Xl=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{loading:i,setLoading:n}=P(),o=r(),{siteName:u,proxyPath:s}=G(o),d=async()=>{try{n(!0);const e=await wt(u.value,s.value);l(e)&&(c.data=e.sub_filter.sub_filter_str)}finally{p.value=[],n(!1)}};d(),t({init:d});const{keys:p,table:c,columns:_}=k([{key:"oldstr",title:a("Site.Lable.index_19"),width:200,ellipsis:{tooltip:{width:"trigger"}}},{key:"newstr",title:a("Site.Lable.index_15"),width:250,ellipsis:{tooltip:{width:"trigger"}}},{key:"sub_type",title:a("Site.Lable.index_16"),ellipsis:{tooltip:{width:"trigger"}}},L({width:130,options:e=>[{label:a("Public.Btn.Del"),onClick:async()=>{await He({site_name:u.value,proxy_path:s.value,newstr:e.newstr,oldstr:e.oldstr}),d()}}]})]),x=()=>{y.title=`${a("Site.Proxy.index_81")} [${s.value}]`,y.show=!0},y=U(`${a("Site.Proxy.index_81")} [${s.value}]`,{getList:d});return(e,t)=>{const l=Ze,a=$,n=f,o=C,r=v;return H(),M("div",null,[q(n,null,{toolsLeft:W((()=>[q(l,{type:"primary",onClick:x},{default:W((()=>[Y(F(e.$t("Site.Proxy.index_81")),1)])),_:1})])),table:W((()=>[q(a,{"checked-row-keys":J(p),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>X(p)?p.value=e:null),"row-key":"ip",loading:J(i),"max-height":440,data:J(c).data,columns:J(_)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),q(o,{class:"mt-16px"},{default:W((()=>[K("li",null,"g："+F(e.$t("Site.Tips.index_18")),1),K("li",null,"i："+F(e.$t("Site.Tips.index_12")),1),K("li",null,"o："+F(e.$t("Site.Tips.index_13")),1),K("li",null,"r："+F(e.$t("Site.Tips.index_14")),1)])),_:1}),q(r,{show:J(y).show,"onUpdate:show":t[1]||(t[1]=e=>J(y).show=e),title:J(y).title,data:J(y).data,width:600,footer:!0,component:Jl},null,8,["show","title","data"])])}}}),Yl=I({__name:"index",setup(e){const{t:t}=A(),l=D("reverse"),a=[{key:"reverse",label:t("Site.Config.index_23"),component:Ml},{key:"config",label:t("Site.Config.index_10"),component:Wl},{key:"replace",label:t("Site.Config.index_22"),component:Xl},{key:"cache",label:t("Site.Lable.index_31"),component:ql},{key:"compressed",label:t("Site.Proxy.index_61"),component:Dl},{key:"black",label:t("Site.Proxy.index_62"),component:Nl},{key:"white",label:t("Site.Proxy.index_63"),component:Rl}];return(e,t)=>{const i=pt;return H(),le(i,{class:"p-20px",value:J(l),"onUpdate:value":t[0]||(t[0]=e=>X(l)?l.value=e:null),options:a},null,8,["value"])}}}),Gl=I({__name:"index",setup(e,{expose:t}){const{t:l}=A(),a=r(),{proxyPath:i}=G(a),{data:u}=St(),{keys:s,table:d,columns:p}=k([{key:"proxy_path",title:l("Site.TableRow.index_32"),width:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxy_pass",title:l("Site.Proxy.index_1"),width:100,ellipsis:{tooltip:{width:"trigger"}}},V({key:"remark",title:l("Site.Proxy.index_3"),width:"8%",onBlur:async(e,t)=>{await Me({site_name:u.name,proxy_path:t.proxy_path,remark:e})}}),L({width:120,options:e=>[{label:l("Public.Btn.Set"),onClick:()=>{b(e)}},{label:l("Public.Btn.Del"),onClick:()=>{"/"!==e.proxy_path?w({title:`${l("Site.Batch.index_16")} [${e.proxy_path}]`,content:`${l("Site.Batch.index_17")} [${e.proxy_path}]?`,onConfirm:async({hide:t})=>{await Ke({site_name:u.name,proxy_path:e.proxy_path}),x(),t()}}):o.error(l("Site.Proxy.index_74"))}}]})]),{loading:c,setLoading:_}=P(),x=async()=>{try{_(!0);const{message:e}=await pe({site_name:u.name});d.data=n(e)?e:[]}finally{s.value=[],_(!1)}},y=U(l("Site.Config.index_86"),{row:void 0,siteName:u.name,getList:x}),h=()=>{y.data.row=void 0,y.title=l("Site.Config.index_92"),y.show=!0},m=U("",{row:void 0,siteName:u.name,getList:x}),b=e=>{i.value=e.proxy_path,m.title=`${l("Site.Config.index_93")} [${e.proxy_path}]`,m.show=!0};return x(),t({init:x}),(e,t)=>{const l=Ze,a=$,i=f,n=v;return H(),M("div",null,[q(i,null,{toolsLeft:W((()=>[q(l,{type:"primary",onClick:h},{default:W((()=>[Y(F(e.$t("Site.Config.index_85")),1)])),_:1})])),table:W((()=>[q(a,{"checked-row-keys":J(s),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>X(s)?s.value=e:null),"row-key":"proxyname",loading:J(c),"max-height":440,data:J(d).data,columns:J(p)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),q(n,{show:J(y).show,"onUpdate:show":t[1]||(t[1]=e=>J(y).show=e),title:J(y).title,data:J(y).data,width:660,footer:!0,component:Ll},null,8,["show","title","data"]),q(n,{show:J(m).show,"onUpdate:show":t[2]||(t[2]=e=>J(m).show=e),title:J(m).title,width:800,"min-height":650,component:Yl},null,8,["show","title"])])}}}),Ql={class:"pt-8px"},Zl={class:"w-300px"},ea={class:"w-300px"},ta={class:"w-300px"},la={class:"flex flex-col"},aa=I({__name:"index",setup(e,{expose:t}){const{t:a}=A(),{data:i}=St(),n=D(null),o=D(!1),r=Q({fix:"",domains:"",return_rule:"",status:!1,none:!1}),u={fix:{trigger:["blur","change"],validator:()=>""!==r.fix.trim()||new Error(a("Site.RulesError.index_330"))},return_rule:{trigger:["blur","change"],validator:()=>""!==r.return_rule.trim()||new Error(a("Site.RulesError.index_330"))}},s=e=>{e?o.value=!1:(o.value=!0,r.none=!1)},d=async()=>{await(n.value?.validate()),await We({id:i.id,name:i.name,fix:r.fix,domains:r.domains.trim().split("\n").join(","),return_rule:r.return_rule,status:r.status,http_status:!!r.none}),p()},p=async()=>{const{message:e}=await Fe({id:i.id,name:i.name});l(e)&&(r.fix=e.fix,r.domains=e.domains.split(",").join("\n"),r.return_rule=e.return_rule,r.status=e.status,r.none=e.http_status)};return p(),t({init:p}),(e,t)=>{const l=et,a=tt,i=ut,p=Ze,c=ct,_=C;return H(),M("div",Ql,[q(c,{ref_key:"formRef",ref:n,class:"px-8px",model:J(r),rules:u},{default:W((()=>[q(a,{label:e.$t("Site.Lable.index_6"),path:"fix"},{default:W((()=>[K("div",Zl,[q(l,{value:J(r).fix,"onUpdate:value":t[0]||(t[0]=e=>J(r).fix=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Lable.index_7")},{default:W((()=>[K("div",ea,[q(l,{value:J(r).domains,"onUpdate:value":t[1]||(t[1]=e=>J(r).domains=e),type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:""},null,8,["value"])])])),_:1},8,["label"]),q(a,{label:e.$t("Site.Lable.index_13"),path:"return_rule"},{default:W((()=>[K("div",ta,[q(l,{value:J(r).return_rule,"onUpdate:value":t[2]||(t[2]=e=>J(r).return_rule=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),q(a,{label:" "},{default:W((()=>[K("div",la,[q(i,{checked:J(r).status,"onUpdate:checked":[t[3]||(t[3]=e=>J(r).status=e),s]},{default:W((()=>[Y(F(e.$t("Site.Config.index_94")),1)])),_:1},8,["checked"]),q(i,{checked:J(r).none,"onUpdate:checked":t[4]||(t[4]=e=>J(r).none=e),class:"mt-16px",disabled:J(o)},{default:W((()=>[Y(F(e.$t("Site.Config.index_95")),1)])),_:1},8,["checked","disabled"])])])),_:1}),q(a,{label:" ","show-feedback":!1},{default:W((()=>[q(p,{type:"primary",onClick:d},{default:W((()=>[Y(F(e.$t("Site.Cert.index_60")),1)])),_:1})])),_:1})])),_:1},8,["model"]),q(_,{class:"mt-20px"},{default:W((()=>[K("li",null,[Y(F(e.$t("Site.Config.index_96")),1),t[5]||(t[5]=K("br",null,null,-1)),Y(" "+F(e.$t("Site.Config.index_97")),1)]),K("li",null,F(e.$t("Site.Config.index_98")),1),K("li",null,F(e.$t("Site.Config.index_99")),1)])),_:1})])}}}),ia={class:"mb-10px"},na=I({__name:"index",setup(e,{expose:t}){const{data:a}=St(),i=D("None"),n=D(0),{loading:o,setLoading:r}=P(),u=async()=>{try{r(!0);const{message:e}=await Je({site_name:a.name,type:"access"});l(e)&&(i.value=e.msg?e.msg:"None",n.value=e.size)}finally{r(!1)}};return u(),t({init:u}),(e,t)=>{const l=mt,a=c;return H(),le(a,{class:"h-560px",show:J(o)},{default:W((()=>[K("div",ia,F(e.$t("Site.Cert.index_3"))+": "+F(J(n)),1),q(l,{log:J(i)},null,8,["log"])])),_:1},8,["show"])}}}),oa={class:"mb-10px"},ra=I({__name:"index",setup(e,{expose:t}){const{data:a}=St(),i=D("None"),n=D(0),{loading:o,setLoading:r}=P(),u=async()=>{try{r(!0);const{message:e}=await Je({site_name:a.name,type:"error"});l(e)&&(i.value=e.msg?e.msg:"None",n.value=e.size)}finally{r(!1)}};return u(),t({init:u}),(e,t)=>{const l=mt,a=c;return H(),le(a,{class:"h-560px",show:J(o)},{default:W((()=>[K("div",oa,F(e.$t("Site.Cert.index_3"))+": "+F(J(n)),1),q(l,{log:J(i)},null,8,["log"])])),_:1},8,["show"])}}}),ua=I({__name:"index",setup(e,{expose:t}){const{t:l}=A(),{config:a}=St(),i=D("access"),n=D(),o=[{key:"access",label:l("Site.Config.index_100"),component:na},{key:"error",label:l("Site.Config.index_101"),component:ra}];return i.value=a.subMenu||"access",a.subMenu="",t({init:()=>{i.value="access",ne((()=>{n.value?.init()}))}}),(e,t)=>{const l=pt;return H(),le(l,{value:J(i),"onUpdate:value":t[0]||(t[0]=e=>X(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:o},null,8,["value"])}}}),sa=I({__name:"index",props:{siteInfo:{},config:{}},setup(e){const l=oe((()=>_((()=>t.import("./index-legacy242.js?v=1758532619827")),void 0))),a=r(),{siteName:i}=G(a),{t:n}=A(),o=e,{siteInfo:u,config:s}=o;i.value=o.siteInfo.name;const d=D();u&&B(bt,{data:u,config:s});const p=D("domain"),c=[{key:"domain",label:n("Site.Config.index_1"),component:Ut},{key:"proxy_pass",label:n("Site.Config.index_8"),component:Gl},{key:"config",label:n("Site.Config.index_10"),component:tl},{key:"file",label:n("Site.Config.index_15"),component:cl},{key:"ssl",label:()=>q(te,null,[n("Site.Config.index_11")]),component:l},{key:"redirect",label:n("Site.Config.index_21"),component:Sl},{key:"hotlink",label:n("Site.Config.index_24"),component:aa},{key:"logs",label:n("Site.Config.index_25"),component:ua}];return p.value=s.menu||"domain",s.menu="",ae((()=>{window.siteConfigInit=d.value.init})),(e,t)=>{const l=Ge;return H(),le(l,{value:J(p),"onUpdate:value":t[0]||(t[0]=e=>X(p)?p.value=e:null),ref_key:"tabsRef",ref:d,data:c},null,8,["value"])}}}),da=x(),{t:pa}=a.global;function ca({onClick:e}){return{key:"name",title:pa("Site.Lable.index_1"),width:"12%",minWidth:120,render:t=>q(i,{onClick:()=>{e(t)}},{default:()=>[t.name]})}}function _a({onClick:e}){return{key:"proxy_pass",title:pa("Site.TableRow.index_31"),minWidth:70,render:t=>q(i,{onClick:()=>{e(t)}},{default:()=>[t.proxy_pass]})}}function xa({onClick:e}){return{key:"ssl",title:"SSL",width:"12%",minWidth:100,render:t=>{let a;const{ssl:n}=t;return l(n)?q(i,{type:n.endtime<0?"error":"primary",onClick:()=>{e(t)}},{default:()=>[n.endtime<0?pa("Site.PHP.index_28"):pa("Site.PHP.index_29",[n.endtime])]}):q(i,{type:"warning",onClick:()=>{e(t)}},"function"==typeof(o=a=pa("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(o)&&!re(o)?a:{default:()=>[a]});var o}}}function ya({onClick:e}){const{openSiteWaf:l}=ft();return{key:"action",title:pa("Site.TableRow.index_30"),width:200,align:"right",render:a=>q(S,{options:[{label:pa("Site.PHP.index_14"),onClick:async()=>{await R({source:142}),await j("monitor"),vt({name:"monitor",title:"Website statistics-v2",admin:!0})}},{label:pa("Layout.Sider.wap_1"),show:"nginx"===da.webserver||"apache"===da.webserver,onClick:()=>{l(a.name)}},{label:pa("Site.TableOP.index_2"),onClick:()=>{e(a)}},{label:pa("Public.Btn.Del"),onClick:()=>{var e;e=[a],E({title:`${pa("Site.Tips.index_17")} - [${e[0].name}]`,width:500,minHeight:72,footer:!0,data:{rows:e},component:oe((()=>_((()=>t.import("./index-legacy243.js?v=1758532619827")),void 0)))})}}]},null)}}const ha={class:"w-860px h-700px"},ma=I({__name:"index",setup(e){const a=oe((()=>_((()=>t.import("./index-legacy244.js?v=1758532619827")),void 0))),{t:o}=A(),u=x(),s=r(),d=y(),{web:p}=G(u),c=D(!1),w=U(o("Site.Proxy.index_82")),S=()=>{w.show=!0},C=()=>{ee()},L=Q({show:!1,title:"",siteInfo:null,config:{menu:"",subMenu:""}}),T=(e,t={})=>{L.title=o("Site.PHP.index_13",[e.name,e.addtime]),L.siteInfo=e,L.config=Object.assign({menu:"",subMenu:""},t),L.show=!0},{keys:R,table:j,columns:B}=k([{type:"selection",width:40},ca({onClick:e=>{T(e)}}),_a({onClick:e=>{T(e,{menu:"proxy_pass"})}}),xa({onClick:e=>{T(e,{menu:"ssl"})}}),V({width:"14%",onBlur:async(e,t)=>{await Xe({id:t.id,ps:e})}}),ya({onClick:e=>{T(e)}})]),O=[{key:"Project",label:o("Site.Cert.index_6"),onBatch:e=>{E({title:o("Site.Cert.index_7"),content:o("Site.Cert.index_8"),width:500,minHeight:72,footer:!0,data:{rows:e},component:oe((()=>_((()=>t.import("./index-legacy243.js?v=1758532619827")),void 0)))})}}],I=Q({p:1,limit:10,search:""}),{loading:M,setLoading:Z}=P(!0),ee=async()=>{try{Z(!0);const{message:e}=await Ye(I);l(e)?l(e.data)&&(j.data=n(e.data.data)?e.data.data:[],j.total=h(e.data.page)):(j.data=[],j.total=0)}finally{R.value=[],Z(!1)}};ue((()=>s.isRefresh),(e=>{e&&(u.setRefresh(!1),ee())})),ue((()=>d.taskCount),(()=>{te()}));const te=async()=>{try{await u.getPHPConfig(),u.web.setup?(c.value=!0,ee()):(c.value=!1,Z(!1),se())}catch{Z(!1)}};return te(),(e,t)=>{const l=i,n=Ze,o=N,r=$,u=g,s=b,d=f,c=v,_=m,x=dt;return H(),le(x,null,{default:W((()=>[q(_,{install:J(p).setup&&"nginx"==J(p).type},{desc:W((()=>[K("span",null,F(e.$t("Site.Cert.index_4")),1),q(l,{class:"ml-4px",onClick:t[0]||(t[0]=e=>J(z)("nginx"))},{default:W((()=>[Y(F(e.$t("Site.PHP.index_2")),1)])),_:1})])),default:W((()=>[q(d,{class:"p-16px",feedback:!0},{toolsLeft:W((()=>[q(n,{type:"primary",onClick:S},{default:W((()=>[Y(F(e.$t("Site.Cert.index_5")),1)])),_:1})])),toolsRight:W((()=>[q(o,{value:J(I).search,"onUpdate:value":t[1]||(t[1]=e=>J(I).search=e),placeholder:e.$t("Site.Placeholder.Index_11"),onSearch:ee},null,8,["value","placeholder"])])),table:W((()=>[q(r,{"checked-row-keys":J(R),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>X(R)?R.value=e:null),loading:J(M),data:J(j).data,columns:J(B)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:W((()=>[q(u,{"checked-row-keys":J(R),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>X(R)?R.value=e:null),data:J(j).data,options:O},null,8,["checked-row-keys","data"])])),pageRight:W((()=>[q(s,{page:J(I).p,"onUpdate:page":t[4]||(t[4]=e=>J(I).p=e),"page-size":J(I).limit,"onUpdate:pageSize":t[5]||(t[5]=e=>J(I).limit=e),"item-count":J(j).total,"store-key":"site-php-page",onRefresh:ee},null,8,["page","page-size","item-count"])])),_:1}),q(c,{show:J(w).show,"onUpdate:show":t[6]||(t[6]=e=>J(w).show=e),title:J(w).title,width:640,"min-height":400,footer:!0,data:{onRefresh:C},component:J(a)},null,8,["show","title","data","component"]),q(c,{show:J(L).show,"onUpdate:show":t[7]||(t[7]=e=>J(L).show=e),title:J(L).title},{default:W((()=>[K("div",ha,[q(sa,{"site-info":J(L).siteInfo,config:J(L).config},null,8,["site-info","config"])])])),_:1},8,["show","title"])])),_:1},8,["install"])])),_:1})}}}),va=Object.freeze(Object.defineProperty({__proto__:null,default:ma},Symbol.toStringTag,{value:"Module"}));e("i",va)}}}));
