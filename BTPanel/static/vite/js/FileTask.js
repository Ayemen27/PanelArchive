import{p as e,c as s,n as t,w as a}from"./page_layout.js?v=1758532619827";import{l,a as n}from"./public.js?v=1758532619827";import{l as i,g as o,m as p}from"./index39.js?v=1758532619827";import{k as r,aw as c,w as m,R as u,S as d,n as x,P as f,r as g,c as v,U as k,X as _,a3 as y,a4 as j,V as w,j as b,a2 as h,F as T,O as C,an as L}from"./vue.js?v=1758532619827";import{dc as P,aC as $,bH as H}from"./naive.js?v=1758532619827";import"./common.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";import"./index.js?v=1758532619827";import"./soft2.js?v=1758532619827";import"./soft.js?v=1758532619827";import"./file2.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1758532619827";const R=["innerHTML"],F=e(r({__name:"FileTaskLogs",props:{value:{type:String,default:""}},setup(e){const s=e,t=c("logsRef");return m((()=>s.value),(()=>{x((()=>{const e=t.value;if(e){const{scrollHeight:s}=e;e.scrollTop=s}}))}),{immediate:!0}),(s,a)=>(u(),d("div",{ref_key:"logsRef",ref:t,class:"task-logs",innerHTML:e.value||s.$t("file.task.noLogs")},null,8,R))}}),[["__scopeId","data-v-ee8b8ada"]]),I={class:"p-16px"},M={class:"flex items-center justify-between h-36px px-10px rounded-tl-10px rounded-tr-10px bg-#f5f5f5"},O={class:"max-w-360px"},S={class:"text-desc text-14px"},q={key:0,class:"p-10px"},A={class:"flex items-center justify-between mt-4px"},B={class:"flex"},D={class:"mr-24px"},U={key:2,class:"mt-10px"},V={class:"flex items-center justify-between h-36px px-10px rounded-tl-10px rounded-tr-10px bg-#f5f5f5"},X={class:"text-desc text-14px"},z={class:"flex-1 w-0"},E={class:"min-w-0"},G={class:"text-weak text-14px"},J=["onClick"],K=e(r({__name:"FileTask",props:{taskList:{type:Array,default:()=>[]},store:{type:Object,required:!0}},emits:["close"],setup(e,{emit:r}){const c=r,{t:m}=f(),x=g(e.taskList),R=v((()=>x.value[0]||{log:"",name:"",shell:""})),K=async()=>{const{message:s}=await i();a(s)&&s.length>0?x.value=s:(o(e.store),c("close"))},{loop:N,clearTimer:Q}=l(K,2);N();const W=e=>{n({title:m("file.task.deleteTask"),content:m("file.task.confirmDeleteTask",{name:e.name,shell:e.shell}),onConfirm:async()=>{await p(e.id),(async()=>{Q(),await K(),N()})()}})};return(e,a)=>{const l=P,n=$,i=H;return u(),d("div",I,[k("div",M,[k("div",O,[_(l,null,{default:y((()=>[k("span",S,j(w(R).name+e.$t("Public.Punctuation.Colon")+w(R).shell),1)])),_:1})]),_(n,{type:"primary",text:"",onClick:a[0]||(a[0]=e=>W(w(R)))},{default:y((()=>[b(j(e.$t("Public.Btn.Cancel")),1)])),_:1})]),w(s)(w(R).log)?(u(),d("div",q,[_(i,{type:"line",height:3,"show-indicator":!1,percentage:w(R).log.pre||0},null,8,["percentage"]),k("div",A,[k("span",B,[k("span",D,j(w(R).log.used)+" / "+j(w(t)(w(R).log.total)),1),k("span",null,j(e.$t("file.task.estimatedRemaining"))+": "+j(w(R).log.total),1)]),k("span",null,j(w(R).log.speed)+"/s",1)])])):(u(),h(F,{key:1,value:w(R).log},null,8,["value"])),w(x).length>1?(u(),d("div",U,[k("div",V,[k("span",X,j(e.$t("file.task.waitingTasks")),1)]),(u(!0),d(T,null,C(w(x).slice(1),(s=>(u(),d("div",{key:s.id,class:"flex items-center h-36px px-10px"},[k("div",z,[k("div",E,[_(l,null,{default:y((()=>[k("span",G,j(s.name+e.$t("Public.Punctuation.Colon")+s.shell),1)])),_:2},1024)])]),k("div",{class:"flex items-center ml-12px cursor-pointer",onClick:e=>W(s)},a[1]||(a[1]=[k("i",{class:"i-streamline:delete-1-solid text-10px text-error"},null,-1)]),8,J)])))),128))])):L("",!0)])}}}),[["__scopeId","data-v-93cb7b82"]]);export{K as default};
