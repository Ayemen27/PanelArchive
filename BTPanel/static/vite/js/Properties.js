import{_ as e}from"./index.js?v=1758532619827";import{_ as t}from"./index108.js?v=1758532619827";import{a7 as i,n as l,t as s,c as a,m as o,q as r,_ as n,fM as p,R as u,p as d}from"./page_layout.js?v=1758532619827";import{f as m,a as f,i as c}from"./public.js?v=1758532619827";import{o as v,F as _}from"./index39.js?v=1758532619827";import{k as y,P as h,i as $,r as g,c as b,X as x,F as w,aq as j,R as k,a2 as z,a3 as T,U as C,V as P,aj as q,a4 as F,j as H,l as M,S as O}from"./vue.js?v=1758532619827";import{au as R,dc as N,dQ as S,dg as U}from"./naive.js?v=1758532619827";import"./common.js?v=1758532619827";import"./__commonjsHelpers__.js?v=1758532619827";import"./soft2.js?v=1758532619827";import"./soft.js?v=1758532619827";import"./file2.js?v=1758532619827";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1758532619827";const I={class:"properties-wrapper"},L={class:"content"},D={class:"info-group"},K={class:"info-item h-60px"},Q={class:"info-item-label"},V={class:"info-item-value"},W={class:"w-360px"},X={class:"my-10px"},A={class:"info-group"},B={class:"info-item"},E={class:"info-item-label"},G={class:"info-item-value"},J={class:"info-item"},Y={class:"info-item-label"},Z={class:"info-item-value flex"},ee={class:"max-w-300px"},te={class:"info-item",style:{"margin-bottom":"0"}},ie={class:"info-item-label"},le={class:"info-item-value"},se={class:"my-10px"},ae={class:"info-group"},oe={class:"info-item"},re={class:"info-item-label"},ne={class:"info-item-value"},pe={class:"info-item"},ue={class:"info-item-label"},de={class:"info-item-value"},me={class:"info-item",style:{"margin-bottom":"0"}},fe={class:"info-item-label"},ce={class:"info-item-value"},ve={class:"my-10px"},_e={class:"info-group"},ye={class:"info-item"},he={class:"info-item-label"},$e={class:"info-item-value"},ge={class:"info-item"},be={class:"info-item-label"},xe={class:"info-item-value"},we={class:"content overflow-auto"},je={width:"200"},ke={class:"content"},ze=d(y({__name:"Properties",setup(d,{expose:y}){const{t:ze}=h(),Te=$("fileStore"),{choosedKeys:Ce,fileList:Pe,currentPath:qe}=Te,Fe=g(!1),He=g("general"),Me=g(!1),Oe=g({st_atime:0,st_mtime:0,st_ctime:0}),Re=b((()=>Oe.value.path?"".concat(Oe.value.path,"/").concat(Oe.value.name):"--")),Ne=g([{key:"st_mtime",title:()=>ze("file.properties.modifiedTime"),width:154,render:e=>i(e.st_mtime)},{key:"st_size",title:()=>ze("file.properties.size"),width:80,render:e=>l(e.st_size)},{key:"md5",title:()=>ze("file.properties.md5"),ellipsis:{tooltip:!0}},m({width:110,options:e=>[{label:ze("file.properties.view"),onClick:()=>{!async function(){v(0,"".concat(Oe.value.path,"/").concat(Oe.value.name),qe.value)}()}},{label:ze("file.properties.restore"),onClick:()=>{!async function(e){f({title:ze("file.properties.restoreHistoryFiles"),width:480,content:()=>x(w,null,[x("div",null,[ze("file.properties.restoreHistoryConfirm",{time:i(e.st_mtime)})]),x("div",{class:"mt-8px text-12px text-default leading-[1.4]"},[ze("file.properties.restoreHistoryWarning")])]),onConfirm:async()=>{await async function(e,t){const i=o.loading(ze("file.properties.restoring"));try{const{status:i}=await s.post("/files?action=re_history",{filename:e,history:t},{requestOptions:{errorMessage:!1}});0===i?o.success(ze("file.properties.restoreSuccess")):o.error(ze("file.properties.restoreFailed"))}finally{i.close()}}("".concat(Oe.value.path,"/").concat(Oe.value.name),e.st_mtime)}})}(e)}}]})]),Se=()=>{c(Re.value)};return y({open(){Fe.value=!0;!async function(e){Me.value=!0;try{const{message:t}=await s.post("/files?action=get_file_attribute",{filename:e},{requestOptions:{isOriginalResult:!0}});a(t)&&(Oe.value=t)}finally{Me.value=!1}}(Pe.value.find((e=>e.nm==Ce.value[0])).path)},close(){Fe.value=!1}}),(s,a)=>{const o=R,d=r,m=N,f=n,c=S,v=p,y=U,h=t,$=u,g=e,b=j("table");return k(),z(g,{show:P(Fe),"onUpdate:show":a[1]||(a[1]=e=>q(Fe)?Fe.value=e:null),width:580,title:"[".concat(P(Oe).name,"] - ").concat(s.$t("file.properties.fileProperties"))},{default:T((()=>[C("div",I,[x($,{show:P(Me)},{default:T((()=>[x(h,{value:P(He),"onUpdate:value":a[0]||(a[0]=e=>q(He)?He.value=e:null)},{default:T((()=>[x(c,{name:"general",tab:s.$t("file.properties.general")},{default:T((()=>[C("div",L,[C("div",D,[C("div",K,[C("div",Q,[x(_,{ext:"".concat(P(Oe).st_type),size:"large"},null,8,["ext"])]),C("div",V,[C("div",W,[x(o,{value:P(Oe).name,readonly:""},null,8,["value"])])])])]),C("div",X,[x(d)]),C("div",A,[C("div",B,[C("div",E,F(s.$t("file.properties.type"))+":",1),C("div",G,F(P(Oe).st_type),1)]),C("div",J,[C("div",Y,F(s.$t("file.properties.location"))+":",1),C("div",Z,[C("div",ee,[x(m,null,{default:T((()=>[H(F(P(Re)),1)])),_:1})]),x(f,{class:"ml-10px cursor-pointer",name:"common-copy",size:"14",onClick:Se})])]),C("div",te,[C("div",ie,F(s.$t("file.properties.size"))+":",1),C("div",le,F(P(l)(P(Oe).st_size)),1)])]),C("div",se,[x(d)]),C("div",ae,[C("div",oe,[C("div",re,F(s.$t("file.properties.permissions"))+":",1),C("div",ne,F(P(Oe).mode),1)]),C("div",pe,[C("div",ue,F(s.$t("file.properties.group"))+":",1),C("div",de,F(P(Oe).group),1)]),C("div",me,[C("div",fe,F(s.$t("file.properties.user"))+":",1),C("div",ce,F(P(Oe).user),1)])]),C("div",ve,[x(d)]),C("div",_e,[C("div",ye,[C("div",he,F(s.$t("file.properties.visitTime"))+":",1),C("div",$e,F(P(i)(P(Oe).st_atime)),1)]),C("div",ge,[C("div",be,F(s.$t("file.properties.modifiedTime"))+":",1),C("div",xe,F(P(i)(P(Oe).st_mtime)),1)])])])])),_:1},8,["tab"]),x(c,{name:"details",tab:s.$t("file.properties.details")},{default:T((()=>[M((k(),O("div",we,[x(v,null,{default:T((()=>[C("thead",null,[C("tr",null,[C("th",je,F(s.$t("file.properties.name")),1),C("th",null,F(s.$t("file.properties.value")),1)])]),C("tbody",null,[C("tr",null,[C("td",null,F(s.$t("file.properties.name")),1),C("td",null,F(P(Oe).name),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.type")),1),C("td",null,F(P(Oe).st_type),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.location")),1),C("td",null,F(P(Oe).path),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.size")),1),C("td",null,F(P(l)(P(Oe).st_size)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.visitTime")),1),C("td",null,F(P(i)(P(Oe).st_atime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.modifiedTime")),1),C("td",null,F(P(i)(P(Oe).st_mtime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.metadataModificationTime")),1),C("td",null,F(P(i)(P(Oe).st_mtime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.md5")),1),C("td",null,F(P(Oe).md5),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.sha1")),1),C("td",null,F(P(Oe).sha1),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.user")),1),C("td",null,F(P(Oe).user),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.group")),1),C("td",null,F(P(Oe).group),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.permissions")),1),C("td",null,F(P(Oe).mode),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.uid")),1),C("td",null,F(P(Oe).st_uid),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.gid")),1),C("td",null,F(P(Oe).st_gid),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.numOfInodeLinks")),1),C("td",null,F(Number(P(Oe).is_link)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeNodeNum")),1),C("td",null,F(P(Oe).st_ino),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeProtectionMode")),1),C("td",null,F(P(Oe).st_mode),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeResidentDevice")),1),C("td",null,F(P(Oe).st_dev),1)])])])),_:1})])),[[b]])])),_:1},8,["tab"]),x(c,{name:"history",tab:s.$t("file.properties.history")},{default:T((()=>[C("div",ke,[x(y,{"max-height":"386px",columns:P(Ne),data:P(Oe).history||[]},null,8,["columns","data"])])])),_:1},8,["tab"])])),_:1},8,["value"])])),_:1},8,["show"])])])),_:1},8,["show","title"])}}}),[["__scopeId","data-v-f7957a5e"]]);export{ze as default};
